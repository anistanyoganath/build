/*! For license information please see main.ab9c4ff1.js.LICENSE.txt */
!function(){var e={757:function(e,t,n){e.exports=n(727)},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function V(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function j(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?V(e):""}function q(e){switch(e.tag){case 5:return V(e.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case x:return"Portal";case E:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function X(e,t){J(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function ae(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,Ie=null;function Ee(e){if(e=yi(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=gi(t),xe(e.stateNode,e.type,t))}}function Se(e){_e?Ie?Ie.push(e):Ie=[e]:_e=e}function Te(){if(_e){var e=_e,t=Ie;if(Ie=_e=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function De(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==_e||null!==Ie)&&(Ne(),Te())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=gi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Re=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){Re=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ve=!1,Ue=null,je={onError:function(e){Me=!0,Fe=e}};function qe(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(je,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(ze(e)!==e)throw Error(a(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ge(i),e;if(o===r)return Ge(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function mt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var gt=0;function kt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,wt,xt,_t,It,Et=!1,St=[],Tt=null,Ct=null,Nt=null,At=new Map,Dt=new Map,Pt=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Ct=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Lt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=yi(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=vi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void It(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ht(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=yi(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Vt(e,t,n){Ft(e)&&n.delete(t)}function Ut(){Et=!1,null!==Tt&&Ft(Tt)&&(Tt=null),null!==Ct&&Ft(Ct)&&(Ct=null),null!==Nt&&Ft(Nt)&&(Nt=null),At.forEach(Vt),Dt.forEach(Vt)}function jt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function qt(e){function t(t){return jt(t,e)}if(0<St.length){jt(St[0],e);for(var n=1;n<St.length;n++){var r=St[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&jt(Tt,e),null!==Ct&&jt(Ct,e),null!==Nt&&jt(Nt,e),At.forEach(t),Dt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Pt.shift()}var zt=b.ReactCurrentBatchConfig;function Bt(e,t,n,r){var i=gt,a=zt.transition;zt.transition=null;try{gt=1,Kt(e,t,n,r)}finally{gt=i,zt.transition=a}}function Gt(e,t,n,r){var i=gt,a=zt.transition;zt.transition=null;try{gt=4,Kt(e,t,n,r)}finally{gt=i,zt.transition=a}}function Kt(e,t,n,r){var i=Ht(e,t,n,r);if(null===i)zr(e,t,r,Wt,n),Ot(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Tt=Lt(Tt,e,t,n,r,i),!0;case"dragenter":return Ct=Lt(Ct,e,t,n,r,i),!0;case"mouseover":return Nt=Lt(Nt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return At.set(a,Lt(At.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Dt.set(a,Lt(Dt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==i;){var a=yi(i);if(null!==a&&bt(a),null===(a=Ht(e,t,n,r))&&zr(e,t,r,Wt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else zr(e,t,r,null,n)}var Wt=null;function Ht(e,t,n,r){if(Wt=null,null!==(e=vi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Wt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Yt=null,Jt=null;function Xt(){if(Jt)return Jt;var e,t,n=Yt,r=n.length,i="value"in $t?$t.value:$t.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Jt=i.slice(e,1<t?1-t:void 0)}function Zt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function en(){return!0}function tn(){return!1}function nn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?en:tn,this.isPropagationStopped=tn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=en)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=en)},persist:function(){},isPersistent:en}),t}var rn,an,on,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sn=nn(un),cn=F({},un,{view:0,detail:0}),ln=nn(cn),fn=F({},cn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_n,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==on&&(on&&"mousemove"===e.type?(rn=e.screenX-on.screenX,an=e.screenY-on.screenY):an=rn=0,on=e),rn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),hn=nn(fn),dn=nn(F({},fn,{dataTransfer:0})),pn=nn(F({},cn,{relatedTarget:0})),vn=nn(F({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=F({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),mn=nn(yn),gn=nn(F({},un,{data:0})),kn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wn[e])&&!!t[e]}function _n(){return xn}var In=F({},cn,{key:function(e){if(e.key){var t=kn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Zt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?bn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_n,charCode:function(e){return"keypress"===e.type?Zt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Zt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=nn(In),Sn=nn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=nn(F({},cn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_n})),Cn=nn(F({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),An=nn(Nn),Dn=[9,13,27,32],Pn=l&&"CompositionEvent"in window,Rn=null;l&&"documentMode"in document&&(Rn=document.documentMode);var On=l&&"TextEvent"in window&&!Rn,Ln=l&&(!Pn||Rn&&8<Rn&&11>=Rn),Mn=String.fromCharCode(32),Fn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var jn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Bn(e,t,n,r){Se(r),0<(t=Gr(t,"onChange")).length&&(n=new sn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Kn=null;function Wn(e){Mr(e,0)}function Hn(e){if(H(mi(e)))return e}function Qn(e,t){if("change"===e)return t}var $n=!1;if(l){var Yn;if(l){var Jn="oninput"in document;if(!Jn){var Xn=document.createElement("div");Xn.setAttribute("oninput","return;"),Jn="function"===typeof Xn.oninput}Yn=Jn}else Yn=!1;$n=Yn&&(!document.documentMode||9<document.documentMode)}function Zn(){Gn&&(Gn.detachEvent("onpropertychange",er),Kn=Gn=null)}function er(e){if("value"===e.propertyName&&Hn(Kn)){var t=[];Bn(t,Kn,e,we(e)),De(Wn,t)}}function tr(e,t,n){"focusin"===e?(Zn(),Kn=n,(Gn=t).attachEvent("onpropertychange",er)):"focusout"===e&&Zn()}function nr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Hn(Kn)}function rr(e,t){if("click"===e)return Hn(t)}function ir(e,t){if("input"===e||"change"===e)return Hn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function or(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function sr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function cr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?cr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function lr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function hr(e){var t=lr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&cr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=sr(n,a);var o=sr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var dr=l&&"documentMode"in document&&11>=document.documentMode,pr=null,vr=null,yr=null,mr=!1;function gr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;mr||null==pr||pr!==Q(r)||("selectionStart"in(r=pr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&or(yr,r)||(yr=r,0<(r=Gr(vr,"onSelect")).length&&(t=new sn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=pr)))}function kr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var br={animationend:kr("Animation","AnimationEnd"),animationiteration:kr("Animation","AnimationIteration"),animationstart:kr("Animation","AnimationStart"),transitionend:kr("Transition","TransitionEnd")},wr={},xr={};function _r(e){if(wr[e])return wr[e];if(!br[e])return e;var t,n=br[e];for(t in n)if(n.hasOwnProperty(t)&&t in xr)return wr[e]=n[t];return e}l&&(xr=document.createElement("div").style,"AnimationEvent"in window||(delete br.animationend.animation,delete br.animationiteration.animation,delete br.animationstart.animation),"TransitionEvent"in window||delete br.transitionend.transition);var Ir=_r("animationend"),Er=_r("animationiteration"),Sr=_r("animationstart"),Tr=_r("transitionend"),Cr=new Map,Nr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){Cr.set(e,t),s(t,[e])}for(var Dr=0;Dr<Nr.length;Dr++){var Pr=Nr[Dr];Ar(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Ar(Ir,"onAnimationEnd"),Ar(Er,"onAnimationIteration"),Ar(Sr,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(Tr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Or=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rr));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(qe.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ve||(Ve=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function Mr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Lr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Lr(i,u,c),a=s}}}if(Ve)throw e=Ue,Ve=!1,Ue=null,e}function Fr(e,t){var n=t[hi];void 0===n&&(n=t[hi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function jr(e){if(!e[Ur]){e[Ur]=!0,o.forEach((function(t){"selectionchange"!==t&&(Or.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Qt(t)){case 1:var i=Bt;break;case 4:i=Gt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function zr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=vi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}De((function(){var r=a,i=we(n),o=[];e:{var u=Cr.get(e);if(void 0!==u){var s=sn,c=e;switch(e){case"keypress":if(0===Zt(n))break e;case"keydown":case"keyup":s=En;break;case"focusin":c="focus",s=pn;break;case"focusout":c="blur",s=pn;break;case"beforeblur":case"afterblur":s=pn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=hn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=dn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Tn;break;case Ir:case Er:case Sr:s=vn;break;case Tr:s=Cn;break;case"scroll":s=ln;break;case"wheel":s=An;break;case"copy":case"cut":case"paste":s=mn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Sn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Pe(p,h))&&l.push(Br(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[fi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(f=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=hn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Sn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:mi(s),d=null==c?u:mi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,vi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Kr(d))p++;for(d=0,v=h;v;v=Kr(v))d++;for(;0<p-d;)l=Kr(l),p--;for(;0<d-p;)h=Kr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Kr(l),h=Kr(h)}l=null}else l=null;null!==s&&Wr(o,u,s,l,!1),null!==c&&null!==f&&Wr(o,f,c,l,!0)}if("select"===(s=(u=r?mi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Qn;else if(zn(u))if($n)y=ir;else{y=nr;var m=tr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=rr);switch(y&&(y=y(e,r))?Bn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?mi(r):window,e){case"focusin":(zn(m)||"true"===m.contentEditable)&&(pr=m,vr=r,yr=null);break;case"focusout":yr=vr=pr=null;break;case"mousedown":mr=!0;break;case"contextmenu":case"mouseup":case"dragend":mr=!1,gr(o,n,i);break;case"selectionchange":if(dr)break;case"keydown":case"keyup":gr(o,n,i)}var g;if(Pn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else jn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Ln&&"ko"!==n.locale&&(jn||"onCompositionStart"!==k?"onCompositionEnd"===k&&jn&&(g=Xt()):(Yt="value"in($t=i)?$t.value:$t.textContent,jn=!0)),0<(m=Gr(r,k)).length&&(k=new gn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=Un(n))&&(k.data=g))),(g=On?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Fn=!0,Mn);case"textInput":return(e=t.data)===Mn&&Fn?null:e;default:return null}}(e,n):function(e,t){if(jn)return"compositionend"===e||!Pn&&Vn(e,t)?(e=Xt(),Jt=Yt=$t=null,jn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new gn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Mr(o,t)}))}function Br(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Pe(e,n))&&r.unshift(Br(e,a,i)),null!=(a=Pe(e,t))&&r.push(Br(e,a,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Wr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Pe(n,a))&&o.unshift(Br(n,s,u)):i||null!=(s=Pe(n,a))&&o.push(Br(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Hr=/\r\n?/g,Qr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Hr,"\n").replace(Qr,"")}function Yr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(a(425))}function Jr(){}var Xr=null;function Zr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ei="function"===typeof setTimeout?setTimeout:void 0,ti="function"===typeof clearTimeout?clearTimeout:void 0,ni="function"===typeof Promise?Promise:void 0,ri="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ni?function(e){return ni.resolve(null).then(e).catch(ii)}:ei;function ii(e){setTimeout((function(){throw e}))}function ai(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);qt(t)}function oi(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var si=Math.random().toString(36).slice(2),ci="__reactFiber$"+si,li="__reactProps$"+si,fi="__reactContainer$"+si,hi="__reactEvents$"+si,di="__reactListeners$"+si,pi="__reactHandles$"+si;function vi(e){var t=e[ci];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[ci]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[ci])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function yi(e){return!(e=e[ci]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function mi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function gi(e){return e[li]||null}var ki=[],bi=-1;function wi(e){return{current:e}}function xi(e){0>bi||(e.current=ki[bi],ki[bi]=null,bi--)}function _i(e,t){bi++,ki[bi]=e.current,e.current=t}var Ii={},Ei=wi(Ii),Si=wi(!1),Ti=Ii;function Ci(e,t){var n=e.type.contextTypes;if(!n)return Ii;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ni(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ai(){xi(Si),xi(Ei)}function Di(e,t,n){if(Ei.current!==Ii)throw Error(a(168));_i(Ei,t),_i(Si,n)}function Pi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,B(e)||"Unknown",i));return F({},n,r)}function Ri(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ii,Ti=Ei.current,_i(Ei,e),_i(Si,Si.current),!0}function Oi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Pi(e,t,Ti),r.__reactInternalMemoizedMergedChildContext=e,xi(Si),xi(Ei),_i(Ei,e)):xi(Si),_i(Si,n)}var Li=null,Mi=!1,Fi=!1;function Vi(e){null===Li?Li=[e]:Li.push(e)}function Ui(){if(!Fi&&null!==Li){Fi=!0;var e=0,t=gt;try{var n=Li;for(gt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Li=null,Mi=!1}catch(i){throw null!==Li&&(Li=Li.slice(e+1)),He(Ze,Ui),i}finally{gt=t,Fi=!1}}return null}var ji=b.ReactCurrentBatchConfig;function qi(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var zi=wi(null),Bi=null,Gi=null,Ki=null;function Wi(){Ki=Gi=Bi=null}function Hi(e){var t=zi.current;xi(zi),e._currentValue=t}function Qi(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function $i(e,t){Bi=e,Ki=Gi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(mu=!0),e.firstContext=null)}function Yi(e){var t=e._currentValue;if(Ki!==e)if(e={context:e,memoizedValue:t,next:null},null===Gi){if(null===Bi)throw Error(a(308));Gi=e,Bi.dependencies={lanes:0,firstContext:e}}else Gi=Gi.next=e;return t}var Ji=null,Xi=!1;function Zi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ea(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ta(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function na(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,null!==gs&&0!==(1&e.mode)&&0===(2&ms)?(null===(e=n.interleaved)?(t.next=t,null===Ji?Ji=[n]:Ji.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function ra(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,mt(e,n)}}function ia(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function aa(e,t,n,r){var i=e.updateQueue;Xi=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Xi=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Es|=o,e.lanes=o,e.memoizedState=f}}function oa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var ua=(new r.Component).refs;function sa(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ca={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=zs(),i=Bs(e),a=ta(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),na(e,a),null!==(t=Gs(e,i,r))&&ra(t,e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=zs(),i=Bs(e),a=ta(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),na(e,a),null!==(t=Gs(e,i,r))&&ra(t,e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=zs(),r=Bs(e),i=ta(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),na(e,i),null!==(t=Gs(e,r,n))&&ra(t,e,r)}};function la(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!or(n,r)||!or(i,a))}function fa(e,t,n){var r=!1,i=Ii,a=t.contextType;return"object"===typeof a&&null!==a?a=Yi(a):(i=Ni(t)?Ti:Ei.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ci(e,i):Ii),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ca,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ha(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ca.enqueueReplaceState(t,t.state,null)}function da(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ua,Zi(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Yi(a):(a=Ni(t)?Ti:Ei.current,i.context=Ci(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(sa(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ca.enqueueReplaceState(i,i.state,null),aa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}var pa=[],va=0,ya=null,ma=0,ga=[],ka=0,ba=null,wa=1,xa="";function _a(e,t){pa[va++]=ma,pa[va++]=ya,ya=e,ma=t}function Ia(e,t,n){ga[ka++]=wa,ga[ka++]=xa,ga[ka++]=ba,ba=e;var r=wa;e=xa;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,wa=1<<32-ot(t)+i|n<<i|r,xa=a+e}else wa=1<<a|n<<i|r,xa=e}function Ea(e){null!==e.return&&(_a(e,1),Ia(e,1,0))}function Sa(e){for(;e===ya;)ya=pa[--va],pa[va]=null,ma=pa[--va],pa[va]=null;for(;e===ba;)ba=ga[--ka],ga[ka]=null,xa=ga[--ka],ga[ka]=null,wa=ga[--ka],ga[ka]=null}var Ta=null,Ca=null,Na=!1,Aa=null;function Da(e,t){var n=bc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Pa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Ta=e,Ca=oi(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Ta=e,Ca=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==ba?{id:wa,overflow:xa}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=bc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Ta=e,Ca=null,!0);default:return!1}}function Ra(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function Oa(e){if(Na){var t=Ca;if(t){var n=t;if(!Pa(e,t)){if(Ra(e))throw Error(a(418));t=oi(n.nextSibling);var r=Ta;t&&Pa(e,t)?Da(r,n):(e.flags=-4097&e.flags|2,Na=!1,Ta=e)}}else{if(Ra(e))throw Error(a(418));e.flags=-4097&e.flags|2,Na=!1,Ta=e}}}function La(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ta=e}function Ma(e){if(e!==Ta)return!1;if(!Na)return La(e),Na=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!Zr(e.type,e.memoizedProps)),t&&(t=Ca)){if(Ra(e)){for(e=Ca;e;)e=oi(e.nextSibling);throw Error(a(418))}for(;t;)Da(e,t),t=oi(t.nextSibling)}if(La(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ca=oi(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ca=null}}else Ca=Ta?oi(e.stateNode.nextSibling):null;return!0}function Fa(){Ca=Ta=null,Na=!1}function Va(e){null===Aa?Aa=[e]:Aa.push(e)}function Ua(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function ja(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function qa(e){return(0,e._init)(e._payload)}function za(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=xc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Sc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===_?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===P&&qa(a)===t.type)?((r=i(t,n.props)).ref=Ua(e,t,n),r.return=e,r):((r=_c(n.type,n.key,n.props,null,e.mode,r)).ref=Ua(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Tc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Ic(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Sc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=_c(t.type,t.key,t.props,null,e.mode,n)).ref=Ua(e,null,t),n.return=e,n;case x:return(t=Tc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Ic(t,e.mode,n,null)).return=e,t;ja(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null;case P:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);ja(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);ja(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),Na&&_a(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return Na&&_a(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),Na&&_a(i,v),c}function y(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),Na&&_a(i,y),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return Na&&_a(i,y),l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),Na&&_a(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===_){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ua(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===_?((a=Ic(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=_c(o.type,o.key,o.props,null,r.mode,s)).ref=Ua(r,a,o),s.return=r,r=s)}return u(r);case x:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Tc(o,r.mode,s)).return=r,r=a}return u(r);case P:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return y(r,a,o,s);ja(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Sc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Ba=za(!0),Ga=za(!1),Ka={},Wa=wi(Ka),Ha=wi(Ka),Qa=wi(Ka);function $a(e){if(e===Ka)throw Error(a(174));return e}function Ya(e,t){switch(_i(Qa,t),_i(Ha,e),_i(Wa,Ka),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}xi(Wa),_i(Wa,t)}function Ja(){xi(Wa),xi(Ha),xi(Qa)}function Xa(e){$a(Qa.current);var t=$a(Wa.current),n=se(t,e.type);t!==n&&(_i(Ha,e),_i(Wa,n))}function Za(e){Ha.current===e&&(xi(Wa),xi(Ha))}var eo=wi(0);function to(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var no=[];function ro(){for(var e=0;e<no.length;e++)no[e]._workInProgressVersionPrimary=null;no.length=0}var io=b.ReactCurrentDispatcher,ao=b.ReactCurrentBatchConfig,oo=0,uo=null,so=null,co=null,lo=!1,fo=!1,ho=0,po=0;function vo(){throw Error(a(321))}function yo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function mo(e,t,n,r,i,o){if(oo=o,uo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,io.current=null===e||null===e.memoizedState?Zo:eu,e=n(r,i),fo){o=0;do{if(fo=!1,ho=0,25<=o)throw Error(a(301));o+=1,co=so=null,t.updateQueue=null,io.current=tu,e=n(r,i)}while(fo)}if(io.current=Xo,t=null!==so&&null!==so.next,oo=0,co=so=uo=null,lo=!1,t)throw Error(a(300));return e}function go(){var e=0!==ho;return ho=0,e}function ko(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===co?uo.memoizedState=co=e:co=co.next=e,co}function bo(){if(null===so){var e=uo.alternate;e=null!==e?e.memoizedState:null}else e=so.next;var t=null===co?uo.memoizedState:co.next;if(null!==t)co=t,so=e;else{if(null===e)throw Error(a(310));e={memoizedState:(so=e).memoizedState,baseState:so.baseState,baseQueue:so.baseQueue,queue:so.queue,next:null},null===co?uo.memoizedState=co=e:co=co.next=e}return co}function wo(e,t){return"function"===typeof t?t(e):t}function xo(e){var t=bo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=so,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((oo&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,uo.lanes|=f,Es|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ar(r,t.memoizedState)||(mu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,uo.lanes|=o,Es|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _o(e){var t=bo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ar(o,t.memoizedState)||(mu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Io(){}function Eo(e,t){var n=uo,r=bo(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,mu=!0),r=r.queue,Mo(Co.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==co&&1&co.memoizedState.tag){if(n.flags|=2048,Do(9,To.bind(null,n,r,i,t),void 0,null),null===gs)throw Error(a(349));0!==(30&oo)||So(n,t,i)}return i}function So(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=uo.updateQueue)?(t={lastEffect:null,stores:null},uo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function To(e,t,n,r){t.value=n,t.getSnapshot=r,No(t)&&Gs(e,1,-1)}function Co(e,t,n){return n((function(){No(t)&&Gs(e,1,-1)}))}function No(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Ao(e){var t=ko();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:e},t.queue=e,e=e.dispatch=Ho.bind(null,uo,e),[t.memoizedState,e]}function Do(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=uo.updateQueue)?(t={lastEffect:null,stores:null},uo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Po(){return bo().memoizedState}function Ro(e,t,n,r){var i=ko();uo.flags|=e,i.memoizedState=Do(1|t,n,void 0,void 0===r?null:r)}function Oo(e,t,n,r){var i=bo();r=void 0===r?null:r;var a=void 0;if(null!==so){var o=so.memoizedState;if(a=o.destroy,null!==r&&yo(r,o.deps))return void(i.memoizedState=Do(t,n,a,r))}uo.flags|=e,i.memoizedState=Do(1|t,n,a,r)}function Lo(e,t){return Ro(8390656,8,e,t)}function Mo(e,t){return Oo(2048,8,e,t)}function Fo(e,t){return Oo(4,2,e,t)}function Vo(e,t){return Oo(4,4,e,t)}function Uo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function jo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oo(4,4,Uo.bind(null,t,e),n)}function qo(){}function zo(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&yo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Bo(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&yo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Go(e,t){var n=gt;gt=0!==n&&4>n?n:4,e(!0);var r=ao.transition;ao.transition={};try{e(!1),t()}finally{gt=n,ao.transition=r}}function Ko(){return bo().memoizedState}function Wo(e,t,n){var r=Bs(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qo(e)?$o(t,n):(Yo(e,t,n),null!==(e=Gs(e,r,n=zs()))&&Jo(e,t,r))}function Ho(e,t,n){var r=Bs(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qo(e))$o(t,i);else{Yo(e,t,i);var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ar(u,o))return}catch(s){}null!==(e=Gs(e,r,n=zs()))&&Jo(e,t,r)}}function Qo(e){var t=e.alternate;return e===uo||null!==t&&t===uo}function $o(e,t){fo=lo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Yo(e,t,n){null!==gs&&0!==(1&e.mode)&&0===(2&ms)?(null===(e=t.interleaved)?(n.next=n,null===Ji?Ji=[t]:Ji.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function Jo(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,mt(e,n)}}var Xo={readContext:Yi,useCallback:vo,useContext:vo,useEffect:vo,useImperativeHandle:vo,useInsertionEffect:vo,useLayoutEffect:vo,useMemo:vo,useReducer:vo,useRef:vo,useState:vo,useDebugValue:vo,useDeferredValue:vo,useTransition:vo,useMutableSource:vo,useSyncExternalStore:vo,useId:vo,unstable_isNewReconciler:!1},Zo={readContext:Yi,useCallback:function(e,t){return ko().memoizedState=[e,void 0===t?null:t],e},useContext:Yi,useEffect:Lo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ro(4194308,4,Uo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ro(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ro(4,2,e,t)},useMemo:function(e,t){var n=ko();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ko();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Wo.bind(null,uo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ko().memoizedState=e},useState:Ao,useDebugValue:qo,useDeferredValue:function(e){var t=Ao(e),n=t[0],r=t[1];return Lo((function(){var t=ao.transition;ao.transition={};try{r(e)}finally{ao.transition=t}}),[e]),n},useTransition:function(){var e=Ao(!1),t=e[0];return e=Go.bind(null,e[1]),ko().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=uo,i=ko();if(Na){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===gs)throw Error(a(349));0!==(30&oo)||So(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Lo(Co.bind(null,r,o,e),[e]),r.flags|=2048,Do(9,To.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ko(),t=gs.identifierPrefix;if(Na){var n=xa;t=":"+t+"R"+(n=(wa&~(1<<32-ot(wa)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=po++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},eu={readContext:Yi,useCallback:zo,useContext:Yi,useEffect:Mo,useImperativeHandle:jo,useInsertionEffect:Fo,useLayoutEffect:Vo,useMemo:Bo,useReducer:xo,useRef:Po,useState:function(){return xo(wo)},useDebugValue:qo,useDeferredValue:function(e){var t=xo(wo),n=t[0],r=t[1];return Mo((function(){var t=ao.transition;ao.transition={};try{r(e)}finally{ao.transition=t}}),[e]),n},useTransition:function(){return[xo(wo)[0],bo().memoizedState]},useMutableSource:Io,useSyncExternalStore:Eo,useId:Ko,unstable_isNewReconciler:!1},tu={readContext:Yi,useCallback:zo,useContext:Yi,useEffect:Mo,useImperativeHandle:jo,useInsertionEffect:Fo,useLayoutEffect:Vo,useMemo:Bo,useReducer:_o,useRef:Po,useState:function(){return _o(wo)},useDebugValue:qo,useDeferredValue:function(e){var t=_o(wo),n=t[0],r=t[1];return Mo((function(){var t=ao.transition;ao.transition={};try{r(e)}finally{ao.transition=t}}),[e]),n},useTransition:function(){return[_o(wo)[0],bo().memoizedState]},useMutableSource:Io,useSyncExternalStore:Eo,useId:Ko,unstable_isNewReconciler:!1};function nu(e,t){try{var n="",r=t;do{n+=q(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function ru(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var iu,au,ou,uu="function"===typeof WeakMap?WeakMap:Map;function su(e,t,n){(n=ta(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ps||(Ps=!0,Rs=r),ru(0,t)},n}function cu(e,t,n){(n=ta(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ru(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){ru(0,t),"function"!==typeof r&&(null===Os?Os=new Set([this]):Os.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function lu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new uu;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=pc.bind(null,e,t,n),t.then(e,e))}function fu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function hu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ta(-1,1)).tag=2,na(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}function du(e,t){if(!Na)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function pu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function vu(e,t,n){var r=t.pendingProps;switch(Sa(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pu(t),null;case 1:case 17:return Ni(t.type)&&Ai(),pu(t),null;case 3:return r=t.stateNode,Ja(),xi(Si),xi(Ei),ro(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ma(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Aa&&($s(Aa),Aa=null))),pu(t),null;case 5:Za(t);var i=$a(Qa.current);if(n=t.type,null!==e&&null!=t.stateNode)au(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return pu(t),null}if(e=$a(Wa.current),Ma(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[ci]=t,r[li]=o,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(i=0;i<Rr.length;i++)Fr(Rr[i],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":Y(r,o),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Fr("invalid",r);break;case"textarea":ie(r,o),Fr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(Yr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(Yr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Fr("scroll",r)}switch(n){case"input":W(r),Z(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Jr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[ci]=t,e[li]=r,iu(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),i=r;break;case"iframe":case"object":case"embed":Fr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Rr.length;i++)Fr(Rr[i],e);i=r;break;case"source":Fr("error",e),i=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),i=r;break;case"details":Fr("toggle",e),i=r;break;case"input":Y(e,r),i=$(e,r),Fr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Fr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Fr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return pu(t),null;case 6:if(e&&null!=t.stateNode)ou(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=$a(Qa.current),$a(Wa.current),Ma(t)){if(r=t.stateNode,n=t.memoizedProps,r[ci]=t,(o=r.nodeValue!==n)&&null!==(e=Ta))switch(s=0!==(1&e.mode),e.tag){case 3:Yr(r.nodeValue,n,s);break;case 5:!0!==e.memoizedProps[void 0]&&Yr(r.nodeValue,n,s)}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ci]=t,t.stateNode=r}return pu(t),null;case 13:if(xi(eo),r=t.memoizedState,Na&&null!==Ca&&0!==(1&t.mode)&&0===(128&t.flags)){for(r=Ca;r;)r=oi(r.nextSibling);return Fa(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=Ma(t),null===e){if(!r)throw Error(a(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(a(317));r[ci]=t}else Fa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return pu(t),null}return null!==Aa&&($s(Aa),Aa=null),0!==(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?Ma(t):n=null!==e.memoizedState,r&&!n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&eo.current)?0===_s&&(_s=3):ic())),null!==t.updateQueue&&(t.flags|=4),pu(t),null);case 4:return Ja(),null===e&&jr(t.stateNode.containerInfo),pu(t),null;case 10:return Hi(t.type._context),pu(t),null;case 19:if(xi(eo),null===(o=t.memoizedState))return pu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)du(o,!1);else{if(0!==_s||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=to(e))){for(t.flags|=128,du(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _i(eo,1&eo.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>Ds&&(t.flags|=128,r=!0,du(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=to(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),du(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!Na)return pu(t),null}else 2*Je()-o.renderingStartTime>Ds&&1073741824!==n&&(t.flags|=128,r=!0,du(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=eo.current,_i(eo,r?1&n|2:1&n),t):(pu(t),null);case 22:case 23:return ec(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&ws)&&(pu(t),6&t.subtreeFlags&&(t.flags|=8192)):pu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}iu=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},au=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,$a(Wa.current);var a,o=null;switch(n){case"input":i=$(e,i),r=$(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Fr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},ou=function(e,t,n,r){n!==r&&(t.flags|=4)};var yu=b.ReactCurrentOwner,mu=!1;function gu(e,t,n,r){t.child=null===e?Ga(t,null,n,r):Ba(t,e.child,n,r)}function ku(e,t,n,r,i){n=n.render;var a=t.ref;return $i(t,i),r=mo(e,t,n,r,a,i),n=go(),null===e||mu?(Na&&n&&Ea(t),t.flags|=1,gu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Uu(e,t,i))}function bu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||wc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=_c(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,wu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:or)(o,r)&&e.ref===t.ref)return Uu(e,t,i)}return t.flags|=1,(e=xc(a,r)).ref=t.ref,e.return=t,t.child=e}function wu(e,t,n,r,i){if(null!==e&&or(e.memoizedProps,r)&&e.ref===t.ref){if(mu=!1,0===(e.lanes&i))return t.lanes=e.lanes,Uu(e,t,i);0!==(131072&e.flags)&&(mu=!0)}return Iu(e,t,n,r,i)}function xu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null},_i(xs,ws),ws|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,_i(xs,ws),ws|=e,null;t.memoizedState={baseLanes:0,cachePool:null},r=null!==a?a.baseLanes:n,_i(xs,ws),ws|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,_i(xs,ws),ws|=r;return gu(e,t,i,n),t.child}function _u(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Iu(e,t,n,r,i){var a=Ni(n)?Ti:Ei.current;return a=Ci(t,a),$i(t,i),n=mo(e,t,n,r,a,i),r=go(),null===e||mu?(Na&&r&&Ea(t),t.flags|=1,gu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Uu(e,t,i))}function Eu(e,t,n,r,i){if(Ni(n)){var a=!0;Ri(t)}else a=!1;if($i(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),fa(t,n,r),da(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Yi(c):c=Ci(t,c=Ni(n)?Ti:Ei.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&ha(t,o,r,c),Xi=!1;var h=t.memoizedState;o.state=h,aa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Si.current||Xi?("function"===typeof l&&(sa(t,n,l,r),s=t.memoizedState),(u=Xi||la(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ea(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:qi(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Yi(s):s=Ci(t,s=Ni(n)?Ti:Ei.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&ha(t,o,r,s),Xi=!1,h=t.memoizedState,o.state=h,aa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Si.current||Xi?("function"===typeof d&&(sa(t,n,d,r),p=t.memoizedState),(c=Xi||la(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Su(e,t,n,r,a,i)}function Su(e,t,n,r,i,a){_u(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Oi(t,n,!1),Uu(e,t,a);r=t.stateNode,yu.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ba(t,e.child,null,a),t.child=Ba(t,null,u,a)):gu(e,t,u,a),t.memoizedState=r.state,i&&Oi(t,n,!0),t.child}function Tu(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),Ya(e,t.containerInfo)}function Cu(e,t,n,r,i){return Fa(),Va(i),t.flags|=256,gu(e,t,n,r),t.child}var Nu={dehydrated:null,treeContext:null,retryLane:0};function Au(e){return{baseLanes:e,cachePool:null}}function Du(e,t,n){var r,i=t.pendingProps,o=eo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),_i(eo,1&o),null===e)return Oa(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=i.children,e=i.fallback,u?(i=t.mode,u=t.child,o={mode:"hidden",children:o},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=o):u=Ec(o,i,0,null),e=Ic(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Au(n),t.memoizedState=Nu,e):Pu(t,o));if(null!==(o=e.memoizedState)){if(null!==(r=o.dehydrated)){if(s)return 256&t.flags?(t.flags&=-257,Lu(e,t,n,Error(a(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(u=i.fallback,o=t.mode,i=Ec({mode:"visible",children:i.children},o,0,null),(u=Ic(u,o,n,null)).flags|=2,i.return=t,u.return=t,i.sibling=u,t.child=i,0!==(1&t.mode)&&Ba(t,e.child,null,n),t.child.memoizedState=Au(n),t.memoizedState=Nu,u);if(0===(1&t.mode))t=Lu(e,t,n,null);else if("$!"===r.data)t=Lu(e,t,n,Error(a(419)));else if(i=0!==(n&e.childLanes),mu||i){if(null!==(i=gs)){switch(n&-n){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}0!==(i=0!==(u&(i.suspendedLanes|n))?0:u)&&i!==o.retryLane&&(o.retryLane=i,Gs(e,i,-1))}ic(),t=Lu(e,t,n,Error(a(421)))}else"$?"===r.data?(t.flags|=128,t.child=e.child,t=yc.bind(null,e),r._reactRetry=t,t=null):(n=o.treeContext,Ca=oi(r.nextSibling),Ta=t,Na=!0,Aa=null,null!==n&&(ga[ka++]=wa,ga[ka++]=xa,ga[ka++]=ba,wa=n.id,xa=n.overflow,ba=t),(t=Pu(t,t.pendingProps.children)).flags|=4096);return t}return u?(i=Ou(e,t,i.children,i.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=null===o?Au(n):{baseLanes:o.baseLanes|n,cachePool:null},u.childLanes=e.childLanes&~n,t.memoizedState=Nu,i):(n=Ru(e,t,i.children,n),t.memoizedState=null,n)}return u?(i=Ou(e,t,i.children,i.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=null===o?Au(n):{baseLanes:o.baseLanes|n,cachePool:null},u.childLanes=e.childLanes&~n,t.memoizedState=Nu,i):(n=Ru(e,t,i.children,n),t.memoizedState=null,n)}function Pu(e,t){return(t=Ec({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ru(e,t,n,r){var i=e.child;return e=i.sibling,n=xc(i,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function Ou(e,t,n,r,i){var a=t.mode,o=(e=e.child).sibling,u={mode:"hidden",children:n};return 0===(1&a)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=u,t.deletions=null):(n=xc(e,u)).subtreeFlags=14680064&e.subtreeFlags,null!==o?r=xc(o,r):(r=Ic(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Lu(e,t,n,r){return null!==r&&Va(r),Ba(t,e.child,null,n),(e=Pu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Mu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Qi(e.return,t,n)}function Fu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Vu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(gu(e,t,r.children,n),0!==(2&(r=eo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Mu(e,n,t);else if(19===e.tag)Mu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(_i(eo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===to(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Fu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===to(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Fu(t,!0,n,null,a);break;case"together":Fu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Uu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Es|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=xc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=xc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function ju(e,t){switch(Sa(t),t.tag){case 1:return Ni(t.type)&&Ai(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ja(),xi(Si),xi(Ei),ro(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Za(t),null;case 13:if(xi(eo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));Fa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return xi(eo),null;case 4:return Ja(),null;case 10:return Hi(t.type._context),null;case 22:case 23:return ec(),null;default:return null}}var qu=!1,zu=!1,Bu="function"===typeof WeakSet?WeakSet:Set,Gu=null;function Ku(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){dc(e,t,r)}else n.current=null}function Wu(e,t,n){try{n()}catch(r){dc(e,t,r)}}var Hu=!1;function Qu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&Wu(t,n,a)}i=i.next}while(i!==r)}}function $u(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Yu(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function Ju(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,t)}catch(o){}switch(t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e=e.next;do{var i=r,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&Wu(t,n,a),r=r.next}while(r!==e)}break;case 1:if(Ku(t,n),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){dc(t,n,o)}break;case 5:Ku(t,n);break;case 4:is(e,t,n)}}function Xu(e){var t=e.alternate;null!==t&&(e.alternate=null,Xu(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ci],delete t[li],delete t[hi],delete t[di],delete t[pi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Zu(e){return 5===e.tag||3===e.tag||4===e.tag}function es(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Zu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ts(e){e:{for(var t=e.return;null!==t;){if(Zu(t))break e;t=t.return}throw Error(a(160))}var n=t;switch(n.tag){case 5:t=n.stateNode,32&n.flags&&(he(t,""),n.flags&=-33),rs(e,n=es(e),t);break;case 3:case 4:t=n.stateNode.containerInfo,ns(e,n=es(e),t);break;default:throw Error(a(161))}}function ns(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(ns(e,t,n),e=e.sibling;null!==e;)ns(e,t,n),e=e.sibling}function rs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(rs(e,t,n),e=e.sibling;null!==e;)rs(e,t,n),e=e.sibling}function is(e,t,n){for(var r,i,o=t,u=!1;;){if(!u){u=o.return;e:for(;;){if(null===u)throw Error(a(160));switch(r=u.stateNode,u.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}u=u.return}u=!0}if(5===o.tag||6===o.tag){e:for(var s=e,c=o,l=n,f=c;;)if(Ju(s,f,l),null!==f.child&&4!==f.tag)f.child.return=f,f=f.child;else{if(f===c)break e;for(;null===f.sibling;){if(null===f.return||f.return===c)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i?(s=r,c=o.stateNode,8===s.nodeType?s.parentNode.removeChild(c):s.removeChild(c)):r.removeChild(o.stateNode)}else if(18===o.tag)i?(s=r,c=o.stateNode,8===s.nodeType?ai(s.parentNode,c):1===s.nodeType&&ai(s,c),qt(s)):ai(r,o.stateNode);else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(Ju(e,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(u=!1)}o.sibling.return=o.return,o=o.sibling}}function as(e,t){switch(t.tag){case 0:case 11:case 14:case 15:return Qu(3,t,t.return),$u(3,t),void Qu(5,t,t.return);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for("input"===e&&"radio"===r.type&&null!=r.name&&J(n,r),ke(e,i),t=ke(e,r),i=0;i<o.length;i+=2){var u=o[i],s=o[i+1];"style"===u?ye(n,s):"dangerouslySetInnerHTML"===u?fe(n,s):"children"===u?he(n,s):k(n,u,s,t)}switch(e){case"input":X(n,r);break;case"textarea":ae(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?ne(n,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?ne(n,!!r.multiple,r.defaultValue,!0):ne(n,!!r.multiple,r.multiple?[]:"",!1))}n[li]=r}}return;case 6:if(null===t.stateNode)throw Error(a(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void(null!==e&&e.memoizedState.isDehydrated&&qt(t.stateNode.containerInfo));case 13:case 19:return void os(t)}throw Error(a(163))}function os(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Bu),t.forEach((function(t){var r=mc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function us(e,t,n){Gu=e,ss(e,t,n)}function ss(e,t,n){for(var r=0!==(1&e.mode);null!==Gu;){var i=Gu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||qu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||zu;u=qu;var c=zu;if(qu=o,(zu=s)&&!c)for(Gu=i;null!==Gu;)s=(o=Gu).child,22===o.tag&&null!==o.memoizedState?fs(i):null!==s?(s.return=o,Gu=s):fs(i);for(;null!==a;)Gu=a,ss(a,t,n),a=a.sibling;Gu=i,qu=u,zu=c}cs(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Gu=a):cs(e)}}function cs(e){for(;null!==Gu;){var t=Gu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:zu||$u(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!zu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:qi(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&oa(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}oa(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&qt(h)}}}break;default:throw Error(a(163))}zu||512&t.flags&&Yu(t)}catch(d){dc(t,t.return,d)}}if(t===e){Gu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Gu=n;break}Gu=t.return}}function ls(e){for(;null!==Gu;){var t=Gu;if(t===e){Gu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Gu=n;break}Gu=t.return}}function fs(e){for(;null!==Gu;){var t=Gu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{$u(4,t)}catch(s){dc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){dc(t,i,s)}}var a=t.return;try{Yu(t)}catch(s){dc(t,a,s)}break;case 5:var o=t.return;try{Yu(t)}catch(s){dc(t,o,s)}}}catch(s){dc(t,t.return,s)}if(t===e){Gu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Gu=u;break}Gu=t.return}}var hs,ds=Math.ceil,ps=b.ReactCurrentDispatcher,vs=b.ReactCurrentOwner,ys=b.ReactCurrentBatchConfig,ms=0,gs=null,ks=null,bs=0,ws=0,xs=wi(0),_s=0,Is=null,Es=0,Ss=0,Ts=0,Cs=null,Ns=null,As=0,Ds=1/0,Ps=!1,Rs=null,Os=null,Ls=!1,Ms=null,Fs=0,Vs=0,Us=null,js=-1,qs=0;function zs(){return 0!==(6&ms)?Je():-1!==js?js:js=Je()}function Bs(e){return 0===(1&e.mode)?1:0!==(2&ms)&&0!==bs?bs&-bs:null!==ji.transition?(0===qs&&(e=ct,0===(4194240&(ct<<=1))&&(ct=64),qs=e),qs):0!==(e=gt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function Gs(e,t,n){if(50<Vs)throw Vs=0,Us=null,Error(a(185));var r=Ks(e,t);return null===r?null:(yt(r,t,n),0!==(2&ms)&&r===gs||(r===gs&&(0===(2&ms)&&(Ss|=t),4===_s&&Ys(r,bs)),Ws(r,n),1===t&&0===ms&&0===(1&e.mode)&&(Ds=Je()+500,Mi&&Ui())),r)}function Ks(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function Ws(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===gs?bs:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Mi=!0,Vi(e)}(Js.bind(null,e)):Vi(Js.bind(null,e)),ri((function(){0===ms&&Ui()})),n=null;else{switch(kt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=gc(n,Hs.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Hs(e,t){if(js=-1,qs=0,0!==(6&ms))throw Error(a(327));var n=e.callbackNode;if(fc()&&e.callbackNode!==n)return null;var r=ht(e,e===gs?bs:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=ac(e,r);else{t=r;var i=ms;ms|=2;var o=rc();for(gs===e&&bs===t||(Ds=Je()+500,tc(e,t));;)try{uc();break}catch(s){nc(e,s)}Wi(),ps.current=o,ms=i,null!==ks?t=0:(gs=null,bs=0,t=_s)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=Qs(e,i))),1===t)throw n=Is,tc(e,0),Ys(e,r),Ws(e,Je()),n;if(6===t)Ys(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ar(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=ac(e,r))&&(0!==(o=pt(e))&&(r=o,t=Qs(e,o))),1===t))throw n=Is,tc(e,0),Ys(e,r),Ws(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:lc(e,Ns);break;case 3:if(Ys(e,r),(130023424&r)===r&&10<(t=As+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){zs(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ei(lc.bind(null,e,Ns),t);break}lc(e,Ns);break;case 4:if(Ys(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ds(r/1960))-r)){e.timeoutHandle=ei(lc.bind(null,e,Ns),r);break}lc(e,Ns);break;default:throw Error(a(329))}}}return Ws(e,Je()),e.callbackNode===n?Hs.bind(null,e):null}function Qs(e,t){var n=Cs;return e.current.memoizedState.isDehydrated&&(tc(e,t).flags|=256),2!==(e=ac(e,t))&&(t=Ns,Ns=n,null!==t&&$s(t)),e}function $s(e){null===Ns?Ns=e:Ns.push.apply(Ns,e)}function Ys(e,t){for(t&=~Ts,t&=~Ss,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function Js(e){if(0!==(6&ms))throw Error(a(327));fc();var t=ht(e,0);if(0===(1&t))return Ws(e,Je()),null;var n=ac(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=Qs(e,r))}if(1===n)throw n=Is,tc(e,0),Ys(e,t),Ws(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,lc(e,Ns),Ws(e,Je()),null}function Xs(e,t){var n=ms;ms|=1;try{return e(t)}finally{0===(ms=n)&&(Ds=Je()+500,Mi&&Ui())}}function Zs(e){null!==Ms&&0===Ms.tag&&0===(6&ms)&&fc();var t=ms;ms|=1;var n=ys.transition,r=gt;try{if(ys.transition=null,gt=1,e)return e()}finally{gt=r,ys.transition=n,0===(6&(ms=t))&&Ui()}}function ec(){ws=xs.current,xi(xs)}function tc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ti(n)),null!==ks)for(n=ks.return;null!==n;){var r=n;switch(Sa(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ai();break;case 3:Ja(),xi(Si),xi(Ei),ro();break;case 5:Za(r);break;case 4:Ja();break;case 13:case 19:xi(eo);break;case 10:Hi(r.type._context);break;case 22:case 23:ec()}n=n.return}if(gs=e,ks=e=xc(e.current,null),bs=ws=t,_s=0,Is=null,Ts=Ss=Es=0,Ns=Cs=null,null!==Ji){for(t=0;t<Ji.length;t++)if(null!==(r=(n=Ji[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ji=null}return e}function nc(e,t){for(;;){var n=ks;try{if(Wi(),io.current=Xo,lo){for(var r=uo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}lo=!1}if(oo=0,co=so=uo=null,fo=!1,ho=0,vs.current=null,null===n||null===n.return){_s=1,Is=t,ks=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=bs,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=fu(u);if(null!==p){p.flags&=-257,hu(p,u,s,0,t),1&p.mode&&lu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){lu(o,l,t),ic();break e}c=Error(a(426))}else if(Na&&1&s.mode){var m=fu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),hu(m,u,s,0,t),Va(c);break e}}o=c,4!==_s&&(_s=2),null===Cs?Cs=[o]:Cs.push(o),c=nu(c,s),s=u;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,ia(s,su(0,c,t));break e;case 1:o=c;var g=s.type,k=s.stateNode;if(0===(128&s.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Os||!Os.has(k)))){s.flags|=65536,t&=-t,s.lanes|=t,ia(s,cu(s,o,t));break e}}s=s.return}while(null!==s)}cc(n)}catch(b){t=b,ks===n&&null!==n&&(ks=n=n.return);continue}break}}function rc(){var e=ps.current;return ps.current=Xo,null===e?Xo:e}function ic(){0!==_s&&3!==_s&&2!==_s||(_s=4),null===gs||0===(268435455&Es)&&0===(268435455&Ss)||Ys(gs,bs)}function ac(e,t){var n=ms;ms|=2;var r=rc();for(gs===e&&bs===t||tc(e,t);;)try{oc();break}catch(i){nc(e,i)}if(Wi(),ms=n,ps.current=r,null!==ks)throw Error(a(261));return gs=null,bs=0,_s}function oc(){for(;null!==ks;)sc(ks)}function uc(){for(;null!==ks&&!$e();)sc(ks)}function sc(e){var t=hs(e.alternate,e,ws);e.memoizedProps=e.pendingProps,null===t?cc(e):ks=t,vs.current=null}function cc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=vu(n,t,ws)))return void(ks=n)}else{if(null!==(n=ju(n,t)))return n.flags&=32767,void(ks=n);if(null===e)return _s=6,void(ks=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(ks=t);ks=t=e}while(null!==t);0===_s&&(_s=5)}function lc(e,t){var n=gt,r=ys.transition;try{ys.transition=null,gt=1,function(e,t,n){do{fc()}while(null!==Ms);if(0!==(6&ms))throw Error(a(327));var r=e.finishedWork,i=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===gs&&(ks=gs=null,bs=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Ls||(Ls=!0,gc(tt,(function(){return fc(),null}))),o=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||o){o=ys.transition,ys.transition=null;var u=gt;gt=1;var s=ms;ms|=4,vs.current=null,function(e,t){if(fr(e=lr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(x){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xr={focusedElem:e,selectionRange:n},Gu=t;null!==Gu;)if(e=(t=Gu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Gu=e;else for(;null!==Gu;){t=Gu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:qi(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;if(1===b.nodeType)b.textContent="";else if(9===b.nodeType){var w=b.body;null!=w&&(w.textContent="")}break;default:throw Error(a(163))}}catch(x){dc(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Gu=e;break}Gu=t.return}v=Hu,Hu=!1}(e,r),function(e,t){for(Gu=t;null!==Gu;){var n=(t=Gu).deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{is(e,i,t);var a=i.alternate;null!==a&&(a.return=null),i.return=null}catch(I){dc(i,t,I)}}if(n=t.child,0!==(12854&t.subtreeFlags)&&null!==n)n.return=t,Gu=n;else for(;null!==Gu;){t=Gu;try{var o=t.flags;if(32&o&&he(t.stateNode,""),512&o){var u=t.alternate;if(null!==u){var s=u.ref;null!==s&&("function"===typeof s?s(null):s.current=null)}}if(8192&o)switch(t.tag){case 13:if(null!==t.memoizedState){var c=t.alternate;null!==c&&null!==c.memoizedState||(As=Je())}break;case 22:var l=null!==t.memoizedState,f=t.alternate,h=null!==f&&null!==f.memoizedState;e:{i=l;for(var d=null,p=r=n=t;;){if(5===p.tag){if(null===d){d=p;var v=p.stateNode;if(i){var y=v.style;"function"===typeof y.setProperty?y.setProperty("display","none","important"):y.display="none"}else{var m=p.stateNode,g=p.memoizedProps.style,k=void 0!==g&&null!==g&&g.hasOwnProperty("display")?g.display:null;m.style.display=ve("display",k)}}}else if(6===p.tag)null===d&&(p.stateNode.nodeValue=i?"":p.memoizedProps);else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===r)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===r)break;for(;null===p.sibling;){if(null===p.return||p.return===r)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}if(l&&!h&&0!==(1&n.mode)){Gu=n;for(var b=n.child;null!==b;){for(n=Gu=b;null!==Gu;){var w=(r=Gu).child;switch(r.tag){case 0:case 11:case 14:case 15:Qu(4,r,r.return);break;case 1:Ku(r,r.return);var x=r.stateNode;if("function"===typeof x.componentWillUnmount){var _=r.return;try{x.props=r.memoizedProps,x.state=r.memoizedState,x.componentWillUnmount()}catch(I){dc(r,_,I)}}break;case 5:Ku(r,r.return);break;case 22:if(null!==r.memoizedState){ls(n);continue}}null!==w?(w.return=r,Gu=w):ls(n)}b=b.sibling}}}switch(4102&o){case 2:ts(t),t.flags&=-3;break;case 6:ts(t),t.flags&=-3,as(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,as(t.alternate,t);break;case 4:as(t.alternate,t)}}catch(I){dc(t,t.return,I)}if(null!==(n=t.sibling)){n.return=t.return,Gu=n;break}Gu=t.return}}}(e,r),hr(Xr),Xr=null,e.current=r,us(r,e,i),Ye(),ms=s,gt=u,ys.transition=o}else e.current=r;if(Ls&&(Ls=!1,Ms=e,Fs=i),0===(o=e.pendingLanes)&&(Os=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),Ws(e,Je()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)n(t[r]);if(Ps)throw Ps=!1,e=Rs,Rs=null,e;0!==(1&Fs)&&0!==e.tag&&fc(),0!==(1&(o=e.pendingLanes))?e===Us?Vs++:(Vs=0,Us=e):Vs=0,Ui()}(e,t,n)}finally{ys.transition=r,gt=n}return null}function fc(){if(null!==Ms){var e=kt(Fs),t=ys.transition,n=gt;try{if(ys.transition=null,gt=16>e?16:e,null===Ms)var r=!1;else{if(e=Ms,Ms=null,Fs=0,0!==(6&ms))throw Error(a(331));var i=ms;for(ms|=4,Gu=e.current;null!==Gu;){var o=Gu,u=o.child;if(0!==(16&Gu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Gu=l;null!==Gu;){var f=Gu;switch(f.tag){case 0:case 11:case 15:Qu(8,f,o)}var h=f.child;if(null!==h)h.return=f,Gu=h;else for(;null!==Gu;){var d=(f=Gu).sibling,p=f.return;if(Xu(f),f===l){Gu=null;break}if(null!==d){d.return=p,Gu=d;break}Gu=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Gu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Gu=u;else e:for(;null!==Gu;){if(0!==(2048&(o=Gu).flags))switch(o.tag){case 0:case 11:case 15:Qu(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Gu=g;break e}Gu=o.return}}var k=e.current;for(Gu=k;null!==Gu;){var b=(u=Gu).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Gu=b;else e:for(u=k;null!==Gu;){if(0!==(2048&(s=Gu).flags))try{switch(s.tag){case 0:case 11:case 15:$u(9,s)}}catch(x){dc(s,s.return,x)}if(s===u){Gu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Gu=w;break e}Gu=s.return}}if(ms=i,Ui(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{gt=n,ys.transition=t}}return!1}function hc(e,t,n){na(e,t=su(0,t=nu(n,t),1)),t=zs(),null!==(e=Ks(e,1))&&(yt(e,1,t),Ws(e,t))}function dc(e,t,n){if(3===e.tag)hc(e,e,n);else for(;null!==t;){if(3===t.tag){hc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Os||!Os.has(r))){na(t,e=cu(t,e=nu(n,e),1)),e=zs(),null!==(t=Ks(t,1))&&(yt(t,1,e),Ws(t,e));break}}t=t.return}}function pc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=zs(),e.pingedLanes|=e.suspendedLanes&n,gs===e&&(bs&n)===n&&(4===_s||3===_s&&(130023424&bs)===bs&&500>Je()-As?tc(e,0):Ts|=n),Ws(e,t)}function vc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=zs();null!==(e=Ks(e,t))&&(yt(e,t,n),Ws(e,n))}function yc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),vc(e,n)}function mc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),vc(e,n)}function gc(e,t){return He(e,t)}function kc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bc(e,t,n,r){return new kc(e,t,n,r)}function wc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function xc(e,t){var n=e.alternate;return null===n?((n=bc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function _c(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)wc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case _:return Ic(n.children,i,o,t);case I:u=8,i|=8;break;case E:return(e=bc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case N:return(e=bc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=bc(19,n,t,i)).elementType=A,e.lanes=o,e;case R:return Ec(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:u=10;break e;case T:u=9;break e;case C:u=11;break e;case D:u=14;break e;case P:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=bc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Ic(e,t,n,r){return(e=bc(7,e,r,t)).lanes=n,e}function Ec(e,t,n,r){return(e=bc(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={},e}function Sc(e,t,n){return(e=bc(6,e,null,t)).lanes=n,e}function Tc(e,t,n){return(t=bc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Cc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vt(0),this.expirationTimes=vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Nc(e,t,n,r,i,a,o,u,s){return e=new Cc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=bc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null},Zi(a),e}function Ac(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Dc(e){if(!e)return Ii;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ni(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ni(n))return Pi(e,n,t)}return t}function Pc(e,t,n,r,i,a,o,u,s){return(e=Nc(n,r,!0,e,0,a,0,u,s)).context=Dc(null),n=e.current,(a=ta(r=zs(),i=Bs(n))).callback=void 0!==t&&null!==t?t:null,na(n,a),e.current.lanes=i,yt(e,i,r),Ws(e,r),e}function Rc(e,t,n,r){var i=t.current,a=zs(),o=Bs(i);return n=Dc(n),null===t.context?t.context=n:t.pendingContext=n,(t=ta(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),na(i,t),null!==(e=Gs(i,o,a))&&ra(e,i,o),o}function Oc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Lc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Mc(e,t){Lc(e,t),(e=e.alternate)&&Lc(e,t)}hs=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Si.current)mu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return mu=!1,function(e,t,n){switch(t.tag){case 3:Tu(t),Fa();break;case 5:Xa(t);break;case 1:Ni(t.type)&&Ri(t);break;case 4:Ya(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;_i(zi,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(_i(eo,1&eo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Du(e,t,n):(_i(eo,1&eo.current),null!==(e=Uu(e,t,n))?e.sibling:null);_i(eo,1&eo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Vu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),_i(eo,eo.current),r)break;return null;case 22:case 23:return t.lanes=0,xu(e,t,n)}return Uu(e,t,n)}(e,t,n);mu=0!==(131072&e.flags)}else mu=!1,Na&&0!==(1048576&t.flags)&&Ia(t,ma,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var i=Ci(t,Ei.current);$i(t,n),i=mo(null,t,r,e,i,n);var o=go();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ni(r)?(o=!0,Ri(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Zi(t),i.updater=ca,t.stateNode=i,i._reactInternals=t,da(t,r,e,n),t=Su(null,t,r,!0,o,n)):(t.tag=0,Na&&o&&Ea(t),gu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return wc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===D)return 14}return 2}(r),e=qi(r,e),i){case 0:t=Iu(null,t,r,e,n);break e;case 1:t=Eu(null,t,r,e,n);break e;case 11:t=ku(null,t,r,e,n);break e;case 14:t=bu(null,t,r,qi(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Iu(e,t,r,i=t.elementType===r?i:qi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Eu(e,t,r,i=t.elementType===r?i:qi(r,i),n);case 3:e:{if(Tu(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,ea(e,t),aa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Cu(e,t,r,n,i=Error(a(423)));break e}if(r!==i){t=Cu(e,t,r,n,i=Error(a(424)));break e}for(Ca=oi(t.stateNode.containerInfo.firstChild),Ta=t,Na=!0,Aa=null,n=Ga(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Fa(),r===i){t=Uu(e,t,n);break e}gu(e,t,r,n)}t=t.child}return t;case 5:return Xa(t),null===e&&Oa(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,Zr(r,i)?u=null:null!==o&&Zr(r,o)&&(t.flags|=32),_u(e,t),gu(e,t,u,n),t.child;case 6:return null===e&&Oa(t),null;case 13:return Du(e,t,n);case 4:return Ya(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ba(t,null,r,n):gu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ku(e,t,r,i=t.elementType===r?i:qi(r,i),n);case 7:return gu(e,t,t.pendingProps,n),t.child;case 8:case 12:return gu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,_i(zi,r._currentValue),r._currentValue=u,null!==o)if(ar(o.value,u)){if(o.children===i.children&&!Si.current){t=Uu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=ta(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Qi(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),Qi(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}gu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,$i(t,n),r=r(i=Yi(i)),t.flags|=1,gu(e,t,r,n),t.child;case 14:return i=qi(r=t.type,t.pendingProps),bu(e,t,r,i=qi(r.type,i),n);case 15:return wu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:qi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Ni(r)?(e=!0,Ri(t)):e=!1,$i(t,n),fa(t,r,i),da(t,r,i,n),Su(null,t,r,!0,e,n);case 19:return Vu(e,t,n);case 22:return xu(e,t,n)}throw Error(a(156,t.tag))};var Fc="function"===typeof reportError?reportError:function(e){console.error(e)};function Vc(e){this._internalRoot=e}function Uc(e){this._internalRoot=e}function jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function zc(){}function Bc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Oc(o);u.call(e)}}Rc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Oc(o);a.call(e)}}var o=Pc(t,r,e,0,null,!1,0,"",zc);return e._reactRootContainer=o,e[fi]=o.current,jr(8===e.nodeType?e.parentNode:e),Zs(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Oc(s);u.call(e)}}var s=Nc(e,0,!1,null,0,!1,0,"",zc);return e._reactRootContainer=s,e[fi]=s.current,jr(8===e.nodeType?e.parentNode:e),Zs((function(){Rc(t,s,n,r)})),s}(n,t,e,i,r);return Oc(o)}Uc.prototype.render=Vc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Rc(e,t,null,null)},Uc.prototype.unmount=Vc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Zs((function(){Rc(null,e,null,null)})),t[fi]=null}},Uc.prototype.unstable_scheduleHydration=function(e){if(e){var t=_t();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Mt(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(mt(t,1|n),Ws(t,Je()),0===(6&ms)&&(Ds=Je()+500,Ui()))}break;case 13:var r=zs();Zs((function(){return Gs(e,1,r)})),Mc(e,1)}},wt=function(e){13===e.tag&&(Gs(e,134217728,zs()),Mc(e,134217728))},xt=function(e){if(13===e.tag){var t=zs(),n=Bs(e);Gs(e,n,t),Mc(e,n)}},_t=function(){return gt},It=function(e,t){var n=gt;try{return gt=e,t()}finally{gt=n}},xe=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=gi(r);if(!i)throw Error(a(90));H(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=Xs,Ne=Zs;var Gc={usingClientEntryPoint:!1,Events:[yi,mi,gi,Se,Te,Xs]},Kc={findFiberByHostInstance:vi,bundleType:0,version:"18.0.0-fc46dba67-20220329",rendererPackageName:"react-dom"},Wc={bundleType:Kc.bundleType,version:Kc.version,rendererPackageName:Kc.rendererPackageName,rendererConfig:Kc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:Kc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hc.isDisabled&&Hc.supportsFiber)try{it=Hc.inject(Wc),at=Hc}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!jc(t))throw Error(a(200));return Ac(e,t,null,n)},t.createRoot=function(e,t){if(!jc(e))throw Error(a(299));var n=!1,r="",i=Fc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Nc(e,1,!1,null,0,n,0,r,i),e[fi]=t.current,jr(8===e.nodeType?e.parentNode:e),new Vc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return Zs(e)},t.hydrate=function(e,t,n){if(!qc(t))throw Error(a(200));return Bc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!jc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Fc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=Pc(t,null,e,1,null!=n?n:null,i,0,o,u),e[fi]=t.current,jr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Uc(t)},t.render=function(e,t,n){if(!qc(t))throw Error(a(200));return Bc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!qc(e))throw Error(a(40));return!!e._reactRootContainer&&(Zs((function(){Bc(null,null,e,!1,(function(){e._reactRootContainer=null,e[fi]=null}))})),!0)},t.unstable_batchedUpdates=Xs,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!qc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Bc(e,t,n,!1,r)},t.version="18.0.0-fc46dba67-20220329"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var b=k.prototype=new g;b.constructor=k,v(b,m.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,_={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:_.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},R={transition:null},O={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:R,ReactCurrentOwner:_};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)x.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.0.0-fc46dba67-20220329"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(D){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r=f;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return A()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=E(o,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=l(e,t,n);if("normal"===s.type){if(r=n.done?p:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=p,n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(D){return{type:"throw",arg:D}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function y(){}function m(){}function g(){}var k={};s(k,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(N([])));w&&w!==n&&r.call(w,a)&&(k=w);var x=g.prototype=y.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(i,a,o,u){var s=l(e[i],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function E(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:A}}function A(){return{value:t,done:!0}}return m.prototype=g,s(x,"constructor",g),s(g,"constructor",m),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},_(I.prototype),s(I.prototype,o,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new I(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},_(x),s(x,u,"Generator"),s(x,a,(function(){return this})),s(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=N,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return u.type="throw",u.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(y=!1,b(e),!v)if(null!==r(c))v=!0,R(x);else{var t=r(l);null!==t&&O(w,t.startTime-e)}}function x(e,n){v=!1,y&&(y=!1,g(S),S=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&O(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,I=!1,E=null,S=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function A(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?_():(I=!1,E=null)}}else I=!1}if("function"===typeof k)_=function(){k(A)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,P=D.port2;D.port1.onmessage=A,_=function(){P.postMessage(null)}}else _=function(){m(A,0)};function R(e){E=e,I||(I=!0,_())}function O(e,n){S=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,R(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(S),S=-1):y=!0,O(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,R(x))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".0f427806.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="chit-chat:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var h=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=h.bind(null,u.onerror),u.onload=h.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkchit_chat=self.webpackChunkchit_chat||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return G},SDK_VERSION:function(){return Ke},_DEFAULT_ENTRY_NAME:function(){return Pe},_addComponent:function(){return Me},_addOrOverwriteComponent:function(){return Fe},_apps:function(){return Oe},_clearComponents:function(){return qe},_components:function(){return Le},_getProvider:function(){return Ue},_registerComponent:function(){return Ve},_removeServiceInstance:function(){return je},deleteApp:function(){return $e},getApp:function(){return He},getApps:function(){return Qe},initializeApp:function(){return We},onLog:function(){return Xe},registerVersion:function(){return Je},setLogLevel:function(){return Ze}});var t=n(791),r=n(164);function i(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function u(e){i(o,r,a,u,s,"next",e)}function s(e){i(o,r,a,u,s,"throw",e)}u(void 0)}))}}function o(e){if(Array.isArray(e))return e}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(e){if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){return o(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||s(e,t)||c()}var f=n(757),h=n.n(f);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t){return k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},k(e,t)}function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function x(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function I(e,t){if(t&&("object"===_(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function E(e){var t=x();return function(){var n,r=w(e);if(t){var i=w(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return I(this,n)}}function S(e,t,n){return S=x()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&k(i,n.prototype),i},S.apply(null,arguments)}function T(e){var t="function"===typeof Map?new Map:void 0;return T=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return S(e,arguments,w(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),k(n,e)},T(e)}var C=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},N={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(C(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},A=function(e){return function(e){var t=C(e);return N.encodeByteArray(t,!0)}(e).replace(/\./g,"")},D=function(e){try{return N.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function P(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=P(e[n],t[n]));return e}var R=function(){function e(){var t=this;p(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return y(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function O(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[A(JSON.stringify({alg:"none",type:"JWT"})),A(JSON.stringify(a)),""].join(".")}function L(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function M(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(L())}function F(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function V(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function U(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function j(){var e=L();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function q(){return"object"===typeof indexedDB}function z(){return new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}}))}function B(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}var G=function(e){b(n,e);var t=E(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(g(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(g(a),K.prototype.create),a}return y(n)}(T(Error)),K=function(){function e(t,n,r){p(this,e),this.service=t,this.serviceName=n,this.errors=r}return y(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?W(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new G(n,a,t);return o}}]),e}();function W(e,t){return e.replace(H,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var H=/\{\$([^}]+)}/g;function Q(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function $(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Y(u)&&Y(s)){if(!$(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Y(e){return null!==e&&"object"===typeof e}function J(e){for(var t=[],n=function(){var e=l(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function X(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=l(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Z(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function ee(e,t){var n=new te(e,t);return n.subscribe.bind(n)}var te=function(){function e(t,n){var r=this;p(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return y(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=m(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=ne),void 0===r.error&&(r.error=ne),void 0===r.complete&&(r.complete=ne);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function ne(){}var re=144e5;function ie(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(re,r+i)}function ae(e){return e&&e._delegate?e._delegate:e}function oe(e,t){return new Promise((function(n,r){e.onsuccess=function(e){n(e.target.result)},e.onerror=function(e){var n;r("".concat(t,": ").concat(null===(n=e.target.error)||void 0===n?void 0:n.message))}}))}var ue=function(){function e(t){p(this,e),this._db=t,this.objectStoreNames=this._db.objectStoreNames}return y(e,[{key:"transaction",value:function(e,t){return new se(this._db.transaction.call(this._db,e,t))}},{key:"createObjectStore",value:function(e,t){return new ce(this._db.createObjectStore(e,t))}},{key:"close",value:function(){this._db.close()}}]),e}(),se=function(){function e(t){var n=this;p(this,e),this._transaction=t,this.complete=new Promise((function(e,t){n._transaction.oncomplete=function(){e()},n._transaction.onerror=function(){t(n._transaction.error)},n._transaction.onabort=function(){t(n._transaction.error)}}))}return y(e,[{key:"objectStore",value:function(e){return new ce(this._transaction.objectStore(e))}}]),e}(),ce=function(){function e(t){p(this,e),this._store=t}return y(e,[{key:"index",value:function(e){return new le(this._store.index(e))}},{key:"createIndex",value:function(e,t,n){return new le(this._store.createIndex(e,t,n))}},{key:"get",value:function(e){return oe(this._store.get(e),"Error reading from IndexedDB")}},{key:"put",value:function(e,t){return oe(this._store.put(e,t),"Error writing to IndexedDB")}},{key:"delete",value:function(e){return oe(this._store.delete(e),"Error deleting from IndexedDB")}},{key:"clear",value:function(){return oe(this._store.clear(),"Error clearing IndexedDB object store")}}]),e}(),le=function(){function e(t){p(this,e),this._index=t}return y(e,[{key:"get",value:function(e){return oe(this._index.get(e),"Error reading from IndexedDB")}}]),e}();function fe(e,t,n){return new Promise((function(r,i){try{var a=indexedDB.open(e,t);a.onsuccess=function(e){r(new ue(e.target.result))},a.onerror=function(e){var t;i("Error opening indexedDB: ".concat(null===(t=e.target.error)||void 0===t?void 0:t.message))},a.onupgradeneeded=function(e){n(new ue(a.result),e.oldVersion,e.newVersion,new se(a.transaction))}}catch(o){i("Error opening indexedDB: ".concat(o.message))}}))}function he(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function de(e){return function(e){if(Array.isArray(e))return u(e)}(e)||he(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var pe=function(){function e(t,n,r){p(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return y(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),ve="[DEFAULT]",ye=function(){function e(t,n){p(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return y(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new R;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ve})}catch(s){}var t,n=m(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=l(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=a(f.mark((function e(){var t;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(de(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),de(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=m(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=l(i.value,2),s=u[0],c=u[1],f=this.normalizeInstanceIdentifier(s);r===f&&c.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=m(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(Bp){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===ve?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(Bp){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve;return this.component?this.component.multipleInstances?e:ve:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var me,ge,ke=function(){function e(t){p(this,e),this.name=t,this.providers=new Map}return y(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new ye(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),be=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ge||(ge={}));var we,xe,_e={debug:ge.DEBUG,verbose:ge.VERBOSE,info:ge.INFO,warn:ge.WARN,error:ge.ERROR,silent:ge.SILENT},Ie=ge.INFO,Ee=(d(me={},ge.DEBUG,"log"),d(me,ge.VERBOSE,"log"),d(me,ge.INFO,"info"),d(me,ge.WARN,"warn"),d(me,ge.ERROR,"error"),me),Se=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Ee[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Te=function(){function e(t){p(this,e),this.name=t,this._logLevel=Ie,this._logHandler=Se,this._userLogHandler=null,be.push(this)}return y(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in ge))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?_e[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ge.DEBUG].concat(t)),this._logHandler.apply(this,[this,ge.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ge.VERBOSE].concat(t)),this._logHandler.apply(this,[this,ge.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ge.INFO].concat(t)),this._logHandler.apply(this,[this,ge.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ge.WARN].concat(t)),this._logHandler.apply(this,[this,ge.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ge.ERROR].concat(t)),this._logHandler.apply(this,[this,ge.ERROR].concat(t))}}]),e}();var Ce=function(){function e(t){p(this,e),this.container=t}return y(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Ne="@firebase/app",Ae="0.7.20",De=new Te("@firebase/app"),Pe="[DEFAULT]",Re=(d(we={},Ne,"fire-core"),d(we,"@firebase/app-compat","fire-core-compat"),d(we,"@firebase/analytics","fire-analytics"),d(we,"@firebase/analytics-compat","fire-analytics-compat"),d(we,"@firebase/app-check","fire-app-check"),d(we,"@firebase/app-check-compat","fire-app-check-compat"),d(we,"@firebase/auth","fire-auth"),d(we,"@firebase/auth-compat","fire-auth-compat"),d(we,"@firebase/database","fire-rtdb"),d(we,"@firebase/database-compat","fire-rtdb-compat"),d(we,"@firebase/functions","fire-fn"),d(we,"@firebase/functions-compat","fire-fn-compat"),d(we,"@firebase/installations","fire-iid"),d(we,"@firebase/installations-compat","fire-iid-compat"),d(we,"@firebase/messaging","fire-fcm"),d(we,"@firebase/messaging-compat","fire-fcm-compat"),d(we,"@firebase/performance","fire-perf"),d(we,"@firebase/performance-compat","fire-perf-compat"),d(we,"@firebase/remote-config","fire-rc"),d(we,"@firebase/remote-config-compat","fire-rc-compat"),d(we,"@firebase/storage","fire-gcs"),d(we,"@firebase/storage-compat","fire-gcs-compat"),d(we,"@firebase/firestore","fire-fst"),d(we,"@firebase/firestore-compat","fire-fst-compat"),d(we,"fire-js","fire-js"),d(we,"firebase","fire-js-all"),we),Oe=new Map,Le=new Map;function Me(e,t){try{e.container.addComponent(t)}catch(n){De.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Fe(e,t){e.container.addOrOverwriteComponent(t)}function Ve(e){var t=e.name;if(Le.has(t))return De.debug("There were multiple attempts to register component ".concat(t,".")),!1;Le.set(t,e);var n,r=m(Oe.values());try{for(r.s();!(n=r.n()).done;){Me(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Ue(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function je(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pe;Ue(e,t).clearInstance(n)}function qe(){Le.clear()}var ze=(d(xe={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),d(xe,"bad-app-name","Illegal App name: '{$appName}"),d(xe,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),d(xe,"app-deleted","Firebase App named '{$appName}' already deleted"),d(xe,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),d(xe,"invalid-log-argument","First argument to `onLog` must be null or a function."),d(xe,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),d(xe,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),d(xe,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),d(xe,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),xe),Be=new K("app","Firebase",ze),Ge=function(){function e(t,n,r){var i=this;p(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new pe("app",(function(){return i}),"PUBLIC"))}return y(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Be.create("app-deleted",{appName:this._name})}}]),e}(),Ke="9.6.10";function We(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:Pe,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Be.create("bad-app-name",{appName:String(i)});var a=Oe.get(i);if(a){if($(e,a.options)&&$(r,a.config))return a;throw Be.create("duplicate-app",{appName:i})}var o,u=new ke(i),s=m(Le.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new Ge(e,r,u);return Oe.set(i,l),l}function He(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,t=Oe.get(e);if(!t)throw Be.create("no-app",{appName:e});return t}function Qe(){return Array.from(Oe.values())}function $e(e){return Ye.apply(this,arguments)}function Ye(){return(Ye=a(f.mark((function e(t){var n;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Oe.has(n)){e.next=6;break}return Oe.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Je(e,t,n){var r,i=null!==(r=Re[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void De.warn(u.join(" "))}Ve(new pe("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Xe(e,t){if(null!==e&&"function"!==typeof e)throw Be.create("invalid-log-argument");!function(e,t){var n,r=m(be);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=_e[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:ge[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Ze(e){var t;t=e,be.forEach((function(e){e.setLogLevel(t)}))}var et="firebase-heartbeat-store",tt=null;function nt(){return tt||(tt=fe("firebase-heartbeat-database",1,(function(e,t){if(0===t)e.createObjectStore(et)})).catch((function(e){throw Be.create("storage-open",{originalErrorMessage:e.message})}))),tt}function rt(e){return it.apply(this,arguments)}function it(){return it=a(f.mark((function e(t){var n;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,nt();case 3:return n=e.sent,e.abrupt("return",n.transaction(et).objectStore(et).get(ut(t)));case 7:throw e.prev=7,e.t0=e.catch(0),Be.create("storage-get",{originalErrorMessage:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),it.apply(this,arguments)}function at(e,t){return ot.apply(this,arguments)}function ot(){return ot=a(f.mark((function e(t,n){var r,i,a;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,nt();case 3:return r=e.sent,i=r.transaction(et,"readwrite"),a=i.objectStore(et),e.next=8,a.put(n,ut(t));case 8:return e.abrupt("return",i.complete);case 11:throw e.prev=11,e.t0=e.catch(0),Be.create("storage-set",{originalErrorMessage:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),ot.apply(this,arguments)}function ut(e){return"".concat(e.name,"!").concat(e.options.appId)}var st=function(){function e(t){var n=this;p(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new dt(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return y(e,[{key:"triggerHeartbeat",value:function(){var e=a(f.mark((function e(){var t,n,r;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=ct(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=a(f.mark((function e(){var t,n,r,i,a;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=ct(),n=lt(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=A(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ct(){return(new Date).toISOString().substring(0,10)}function lt(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=m(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),pt(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),pt(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var ft,ht,dt=function(){function e(t){p(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return y(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=a(f.mark((function e(){return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(q()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",z().then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=a(f.mark((function e(){var t;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,rt(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=a(f.mark((function e(t){var n,r;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",at(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=a(f.mark((function e(t){var n,r;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",at(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(de(r.heartbeats),de(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function pt(e){return A(JSON.stringify({version:2,heartbeats:e})).length}ft="",Ve(new pe("platform-logger",(function(e){return new Ce(e)}),"PRIVATE")),Ve(new pe("heartbeat",(function(e){return new st(e)}),"PRIVATE")),Je(Ne,Ae,ft),Je(Ne,Ae,"esm2017"),Je("fire-js","");var vt=function(){function e(t,n){var r=this;p(this,e),this._delegate=t,this.firebase=n,Me(t,new pe("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return y(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),$e(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pe;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pe;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Me(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Fe(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),yt=(d(ht={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),d(ht,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),ht),mt=new K("app-compat","Firebase",yt);var gt=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=We(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Q(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Je,setLogLevel:Ze,onLog:Xe,apps:null,SDK_VERSION:Ke,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Ve(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw mt.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&P(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Q(n,e=e||Pe))throw mt.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(vt);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){P(n,e)},createSubscribe:ee,ErrorFactory:K,deepExtend:P}),n}(),kt=new Te("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){kt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var bt=self.firebase.SDK_VERSION;bt&&bt.indexOf("LITE")>=0&&kt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var wt=gt;!function(e){Je("@firebase/app-compat","0.1.21",e)}();function xt(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}function _t(){return _t="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=xt(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},_t.apply(this,arguments)}wt.registerVersion("firebase","9.6.10","app-compat");var It,Et="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},St={},Tt=Tt||{},Ct=Et||self;function Nt(){}function At(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Dt(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Pt="closure_uid_"+(1e9*Math.random()>>>0),Rt=0;function Ot(e,t,n){return e.call.apply(e.bind,arguments)}function Lt(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Mt(e,t,n){return(Mt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ot:Lt).apply(null,arguments)}function Ft(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Vt(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Ut(){this.s=this.s,this.o=this.o}var jt={};Ut.prototype.s=!1,Ut.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Pt)&&e[Pt]||(e[Pt]=++Rt)}(this);delete jt[e]}},Ut.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var qt=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},zt=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function Bt(e){return Array.prototype.concat.apply([],arguments)}function Gt(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Kt(e){return/^[\s\xa0]*$/.test(e)}var Wt,Ht=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Qt(e,t){return-1!=e.indexOf(t)}function $t(e,t){return e<t?-1:e>t?1:0}e:{var Yt=Ct.navigator;if(Yt){var Jt=Yt.userAgent;if(Jt){Wt=Jt;break e}}Wt=""}function Xt(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Zt(e){var t={};for(var n in e)t[n]=e[n];return t}var en="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function tn(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<en.length;a++)n=en[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function nn(e){return nn[" "](e),e}nn[" "]=Nt;var rn,an=Qt(Wt,"Opera"),on=Qt(Wt,"Trident")||Qt(Wt,"MSIE"),un=Qt(Wt,"Edge"),sn=un||on,cn=Qt(Wt,"Gecko")&&!(Qt(Wt.toLowerCase(),"webkit")&&!Qt(Wt,"Edge"))&&!(Qt(Wt,"Trident")||Qt(Wt,"MSIE"))&&!Qt(Wt,"Edge"),ln=Qt(Wt.toLowerCase(),"webkit")&&!Qt(Wt,"Edge");function fn(){var e=Ct.document;return e?e.documentMode:void 0}e:{var hn="",dn=function(){var e=Wt;return cn?/rv:([^\);]+)(\)|;)/.exec(e):un?/Edge\/([\d\.]+)/.exec(e):on?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):ln?/WebKit\/(\S+)/.exec(e):an?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(dn&&(hn=dn?dn[1]:""),on){var pn=fn();if(null!=pn&&pn>parseFloat(hn)){rn=String(pn);break e}}rn=hn}var vn,yn={};function mn(){return function(e){var t=yn;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Ht(String(rn)).split("."),n=Ht("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=$t(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||$t(0==a[2].length,0==o[2].length)||$t(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Ct.document&&on){var gn=fn();vn=gn||(parseInt(rn,10)||void 0)}else vn=void 0;var kn=vn,bn=function(){if(!Ct.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Ct.addEventListener("test",Nt,t),Ct.removeEventListener("test",Nt,t)}catch(n){}return e}();function wn(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function xn(e,t){if(wn.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(cn){e:{try{nn(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:_n[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&xn.Z.h.call(this)}}wn.prototype.h=function(){this.defaultPrevented=!0},Vt(xn,wn);var _n={2:"touch",3:"pen",4:"mouse"};xn.prototype.h=function(){xn.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var In="closure_listenable_"+(1e6*Math.random()|0),En=0;function Sn(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++En,this.ca=this.fa=!1}function Tn(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Cn(e){this.src=e,this.g={},this.h=0}function Nn(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=qt(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Tn(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function An(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}Cn.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=An(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Sn(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var Dn="closure_lm_"+(1e6*Math.random()|0),Pn={};function Rn(e,t,n,r,i){if(r&&r.once)return Ln(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Rn(e,t[a],n,r,i);return null}return n=zn(n),e&&e[In]?e.N(t,n,Dt(r)?!!r.capture:!!r,i):On(e,t,n,!1,r,i)}function On(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Dt(i)?!!i.capture:!!i,u=jn(e);if(u||(e[Dn]=u=new Cn(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Un;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)bn||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Vn(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Ln(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Ln(e,t[a],n,r,i);return null}return n=zn(n),e&&e[In]?e.O(t,n,Dt(r)?!!r.capture:!!r,i):On(e,t,n,!0,r,i)}function Mn(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Mn(e,t[a],n,r,i);else r=Dt(r)?!!r.capture:!!r,n=zn(n),e&&e[In]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=An(a=e.g[t],n,r,i))&&(Tn(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=jn(e))&&(t=e.g[t.toString()],e=-1,t&&(e=An(t,n,r,i)),(n=-1<e?t[e]:null)&&Fn(n))}function Fn(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[In])Nn(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Vn(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=jn(t))?(Nn(n,e),0==n.h&&(n.src=null,t[Dn]=null)):Tn(e)}}}function Vn(e){return e in Pn?Pn[e]:Pn[e]="on"+e}function Un(e,t){if(e.ca)e=!0;else{t=new xn(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Fn(e),e=n.call(r,t)}return e}function jn(e){return(e=e[Dn])instanceof Cn?e:null}var qn="__closure_events_fn_"+(1e9*Math.random()>>>0);function zn(e){return"function"===typeof e?e:(e[qn]||(e[qn]=function(t){return e.handleEvent(t)}),e[qn])}function Bn(){Ut.call(this),this.i=new Cn(this),this.P=this,this.I=null}function Gn(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new wn(t,e);else if(t instanceof wn)t.target=t.target||e;else{var i=t;tn(t=new wn(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Kn(o,r,!0,t)&&i}if(i=Kn(o=t.g=e,r,!0,t)&&i,i=Kn(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Kn(o=t.g=n[a],r,!1,t)&&i}function Kn(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&Nn(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Vt(Bn,Ut),Bn.prototype[In]=!0,Bn.prototype.removeEventListener=function(e,t,n,r){Mn(this,e,t,n,r)},Bn.prototype.M=function(){if(Bn.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Tn(n[r]);delete t.g[e],t.h--}}this.I=null},Bn.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Bn.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Wn=Ct.JSON.stringify;function Hn(){var e=tr,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Qn,$n=function(){function e(){p(this,e),this.h=this.g=null}return y(e,[{key:"add",value:function(e,t){var n=Yn.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Yn=new(function(){function e(t,n){p(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return y(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Jn}),(function(e){return e.reset()})),Jn=function(){function e(){p(this,e),this.next=this.g=this.h=null}return y(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Xn(e){Ct.setTimeout((function(){throw e}),0)}function Zn(e,t){Qn||function(){var e=Ct.Promise.resolve(void 0);Qn=function(){e.then(nr)}}(),er||(Qn(),er=!0),tr.add(e,t)}var er=!1,tr=new $n;function nr(){for(var e;e=Hn();){try{e.h.call(e.g)}catch(n){Xn(n)}var t=Yn;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}er=!1}function rr(e,t){Bn.call(this),this.h=e||1,this.g=t||Ct,this.j=Mt(this.kb,this),this.l=Date.now()}function ir(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function ar(e,t,n){if("function"===typeof e)n&&(e=Mt(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Mt(e.handleEvent,e)}return 2147483647<Number(t)?-1:Ct.setTimeout(e,t||0)}function or(e){e.g=ar((function(){e.g=null,e.i&&(e.i=!1,or(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Vt(rr,Bn),(It=rr.prototype).da=!1,It.S=null,It.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Gn(this,"tick"),this.da&&(ir(this),this.start()))}},It.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},It.M=function(){rr.Z.M.call(this),ir(this),delete this.g};var ur=function(e){b(n,e);var t=E(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return y(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:or(this)}},{key:"M",value:function(){_t(w(n.prototype),"M",this).call(this),this.g&&(Ct.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Ut);function sr(e){Ut.call(this),this.h=e,this.g={}}Vt(sr,Ut);var cr=[];function lr(e,t,n,r){Array.isArray(n)||(n&&(cr[0]=n.toString()),n=cr);for(var i=0;i<n.length;i++){var a=Rn(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function fr(e){Xt(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Fn(e)}),e),e.g={}}function hr(){this.g=!0}function dr(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Wn(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}sr.prototype.M=function(){sr.Z.M.call(this),fr(this)},sr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},hr.prototype.Aa=function(){this.g=!1},hr.prototype.info=function(){};var pr={},vr=null;function yr(){return vr=vr||new Bn}function mr(e){wn.call(this,pr.Ma,e)}function gr(e){var t=yr();Gn(t,new mr(t,e))}function kr(e,t){wn.call(this,pr.STAT_EVENT,e),this.stat=t}function br(e){var t=yr();Gn(t,new kr(t,e))}function wr(e,t){wn.call(this,pr.Na,e),this.size=t}function xr(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Ct.setTimeout((function(){e()}),t)}pr.Ma="serverreachability",Vt(mr,wn),pr.STAT_EVENT="statevent",Vt(kr,wn),pr.Na="timingevent",Vt(wr,wn);var _r={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Ir={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Er(){}function Sr(e){return e.h||(e.h=e.i())}function Tr(){}Er.prototype.h=null;var Cr,Nr={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Ar(){wn.call(this,"d")}function Dr(){wn.call(this,"c")}function Pr(){}function Rr(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new sr(this),this.P=Lr,e=sn?125:void 0,this.W=new rr(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Or}function Or(){this.i=null,this.g="",this.h=!1}Vt(Ar,wn),Vt(Dr,wn),Vt(Pr,Er),Pr.prototype.g=function(){return new XMLHttpRequest},Pr.prototype.i=function(){return{}},Cr=new Pr;var Lr=45e3,Mr={},Fr={};function Vr(e,t,n){e.K=1,e.v=ui(ti(t)),e.s=n,e.U=!0,Ur(e,null)}function Ur(e,t){e.F=Date.now(),Br(e),e.A=ti(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),bi(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Or,e.g=xa(e.l,n?t:null,!e.s),0<e.O&&(e.L=new ur(Mt(e.Ia,e,e.g),e.O)),lr(e.V,e.g,"readystatechange",e.gb),t=e.H?Zt(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),gr(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function jr(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function qr(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=zr(e,n))==Fr){4==t&&(e.o=4,br(14),i=!1),dr(e.j,e.m,null,"[Incomplete Response]");break}if(r==Mr){e.o=4,br(15),dr(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}dr(e.j,e.m,r,null),Qr(e,r)}jr(e)&&r!=Fr&&r!=Mr&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,br(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),pa(t),t.L=!0,br(11))):(dr(e.j,e.m,n,"[Invalid Chunked Response]"),Hr(e),Wr(e))}function zr(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fr:(n=Number(t.substring(n,r)),isNaN(n)?Mr:(r+=1)+n>t.length?Fr:(t=t.substr(r,n),e.C=r+n,t))}function Br(e){e.Y=Date.now()+e.P,Gr(e,e.P)}function Gr(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=xr(Mt(e.eb,e),t)}function Kr(e){e.B&&(Ct.clearTimeout(e.B),e.B=null)}function Wr(e){0==e.l.G||e.I||ma(e.l,e)}function Hr(e){Kr(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,ir(e.W),fr(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Qr(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Ci(n.i,e)))if(n.I=e.N,!e.J&&Ci(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;ya(n),aa(n)}da(n),br(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=xr(Mt(n.ab,n),6e3));if(1>=Ti(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else ka(n,11)}else if((e.J||n.g==e)&&ya(n),!Kt(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(Qt(l,"spdy")||Qt(l,"quic")||Qt(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(Ni(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,oi(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=wa(r,r.H?r.la:null,r.W),d.J){Ai(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(Kr(p),Br(p)),r.g=d}else ha(r);0<n.l.length&&sa(n)}else"stop"!=a[0]&&"close"!=a[0]||ka(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?ka(n,7):ia(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}gr(4)}catch(a){}}function $r(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(At(e)||"string"===typeof e)zt(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(At(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(At(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function Yr(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Yr)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Jr(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Xr(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Xr(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Xr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(It=Rr.prototype).setTimeout=function(e){this.P=e},It.gb=function(e){e=e.target;var t=this.L;t&&3==Zi(e)?t.l():this.Ia(e)},It.Ia=function(e){try{if(e==this.g)e:{var t=Zi(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||sn||this.g&&(this.h.h||this.g.ga()||ea(this.g)))){this.I||4!=t||7==n||gr(8==n||0>=r?3:2),Kr(this);var i=this.g.ba();this.N=i;t:if(jr(this)){var a=ea(this.g);e="";var o=a.length,u=4==Zi(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Hr(this),Wr(this);var s="";break t}this.h.i=new Ct.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Kt(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,br(12),Hr(this),Wr(this);break e}dr(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Qr(this,i)}this.U?(qr(this,t,s),sn&&this.i&&3==t&&(lr(this.V,this.W,"tick",this.fb),this.W.start())):(dr(this.j,this.m,s,null),Qr(this,s)),4==t&&Hr(this),this.i&&!this.I&&(4==t?ma(this.l,this):(this.i=!1,Br(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,br(12)):(this.o=0,br(13)),Hr(this),Wr(this)}}}catch(t){}},It.fb=function(){if(this.g){var e=Zi(this.g),t=this.g.ga();this.C<t.length&&(Kr(this),qr(this,e,t),this.i&&4!=e&&Br(this))}},It.cancel=function(){this.I=!0,Hr(this)},It.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(gr(3),br(17)),Hr(this),this.o=2,Wr(this)):Gr(this,this.Y-e)},(It=Yr.prototype).R=function(){Jr(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},It.T=function(){return Jr(this),this.g.concat()},It.get=function(e,t){return Xr(this.h,e)?this.h[e]:t},It.set=function(e,t){Xr(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},It.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var Zr=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ei(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof ei){this.g=void 0!==t?t:e.g,ni(this,e.j),this.s=e.s,ri(this,e.i),ii(this,e.m),this.l=e.l,t=e.h;var n=new yi;n.i=t.i,t.g&&(n.g=new Yr(t.g),n.h=t.h),ai(this,n),this.o=e.o}else e&&(n=String(e).match(Zr))?(this.g=!!t,ni(this,n[1]||"",!0),this.s=si(n[2]||""),ri(this,n[3]||"",!0),ii(this,n[4]),this.l=si(n[5]||"",!0),ai(this,n[6]||"",!0),this.o=si(n[7]||"")):(this.g=!!t,this.h=new yi(null,this.g))}function ti(e){return new ei(e)}function ni(e,t,n){e.j=n?si(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ri(e,t,n){e.i=n?si(t,!0):t}function ii(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function ai(e,t,n){t instanceof yi?(e.h=t,function(e,t){t&&!e.j&&(mi(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(gi(this,t),bi(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=ci(t,pi)),e.h=new yi(t,e.g))}function oi(e,t,n){e.h.set(t,n)}function ui(e){return oi(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function si(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ci(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,li),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function li(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ei.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ci(t,fi,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(ci(t,fi,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(ci(n,"/"==n.charAt(0)?di:hi,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",ci(n,vi)),e.join("")};var fi=/[#\/\?@]/g,hi=/[#\?:]/g,di=/[#\?]/g,pi=/[#\?@]/g,vi=/#/g;function yi(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function mi(e){e.g||(e.g=new Yr,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function gi(e,t){mi(e),t=wi(e,t),Xr(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Xr((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Jr(e)))}function ki(e,t){return mi(e),t=wi(e,t),Xr(e.g.h,t)}function bi(e,t,n){gi(e,t),0<n.length&&(e.i=null,e.g.set(wi(e,t),Gt(n)),e.h+=n.length)}function wi(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(It=yi.prototype).add=function(e,t){mi(this),this.i=null,e=wi(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},It.forEach=function(e,t){mi(this),this.g.forEach((function(n,r){zt(n,(function(n){e.call(t,n,r,this)}),this)}),this)},It.T=function(){mi(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},It.R=function(e){mi(this);var t=[];if("string"===typeof e)ki(this,e)&&(t=Bt(t,this.g.get(wi(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=Bt(t,e[n])}return t},It.set=function(e,t){return mi(this),this.i=null,ki(this,e=wi(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},It.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},It.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var xi=y((function e(t,n){p(this,e),this.h=t,this.g=n}));function _i(e){this.l=e||Ei,Ct.PerformanceNavigationTiming?e=0<(e=Ct.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Ct.g&&Ct.g.Ea&&Ct.g.Ea()&&Ct.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ii,Ei=10;function Si(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ti(e){return e.h?1:e.g?e.g.size:0}function Ci(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ni(e,t){e.g?e.g.add(t):e.h=t}function Ai(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Di(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=m(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return Gt(e.i)}function Pi(){}function Ri(){this.g=new Pi}function Oi(e,t,n){var r=n||"";try{$r(e,(function(e,n){var i=e;Dt(e)&&(i=Wn(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Li(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Mi(e){this.l=e.$b||null,this.j=e.ib||!1}function Fi(e,t){Bn.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Vi,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}_i.prototype.cancel=function(){if(this.i=Di(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=m(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Pi.prototype.stringify=function(e){return Ct.JSON.stringify(e,void 0)},Pi.prototype.parse=function(e){return Ct.JSON.parse(e,void 0)},Vt(Mi,Er),Mi.prototype.g=function(){return new Fi(this.l,this.j)},Mi.prototype.i=(Ii={},function(){return Ii}),Vt(Fi,Bn);var Vi=0;function Ui(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function ji(e){e.readyState=4,e.l=null,e.j=null,e.A=null,qi(e)}function qi(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(It=Fi.prototype).open=function(e,t){if(this.readyState!=Vi)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,qi(this)},It.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Ct).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},It.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ji(this)),this.readyState=Vi},It.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,qi(this)),this.g&&(this.readyState=3,qi(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof Ct.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ui(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},It.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ji(this):qi(this),3==this.readyState&&Ui(this)}},It.Ua=function(e){this.g&&(this.response=this.responseText=e,ji(this))},It.Ta=function(e){this.g&&(this.response=e,ji(this))},It.ha=function(){this.g&&ji(this)},It.setRequestHeader=function(e,t){this.v.append(e,t)},It.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},It.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Fi.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var zi=Ct.JSON.parse;function Bi(e){Bn.call(this),this.headers=new Yr,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Gi,this.K=this.L=!1}Vt(Bi,Bn);var Gi="",Ki=/^https?$/i,Wi=["POST","PUT"];function Hi(e){return"content-type"==e.toLowerCase()}function Qi(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,$i(e),Ji(e)}function $i(e){e.D||(e.D=!0,Gn(e,"complete"),Gn(e,"error"))}function Yi(e){if(e.h&&"undefined"!=typeof Tt&&(!e.C[1]||4!=Zi(e)||2!=e.ba()))if(e.v&&4==Zi(e))ar(e.Fa,0,e);else if(Gn(e,"readystatechange"),4==Zi(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Zr)[1]||null;if(!a&&Ct.self&&Ct.self.location){var o=Ct.self.location.protocol;a=o.substr(0,o.length-1)}i=!Ki.test(a?a.toLowerCase():"")}t=i}if(t)Gn(e,"complete"),Gn(e,"success");else{e.m=6;try{var u=2<Zi(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",$i(e)}}finally{Ji(e)}}}function Ji(e,t){if(e.g){Xi(e);var n=e.g,r=e.C[0]?Nt:null;e.g=null,e.C=null,t||Gn(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Xi(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Ct.clearTimeout(e.A),e.A=null)}function Zi(e){return e.g?e.g.readyState:0}function ea(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Gi:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function ta(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Xt(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):oi(e,t,n))}function na(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function ra(e){this.za=0,this.l=[],this.h=new hr,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=na("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=na("baseRetryDelayMs",5e3,e),this.$a=na("retryDelaySeedMs",1e4,e),this.Ya=na("forwardChannelMaxRetries",2,e),this.ra=na("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new _i(e&&e.concurrentRequestLimit),this.Ca=new Ri,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function ia(e){if(oa(e),3==e.G){var t=e.V++,n=ti(e.F);oi(n,"SID",e.J),oi(n,"RID",t),oi(n,"TYPE","terminate"),la(e,n),(t=new Rr(e,e.h,t,void 0)).K=2,t.v=ui(ti(n)),n=!1,Ct.navigator&&Ct.navigator.sendBeacon&&(n=Ct.navigator.sendBeacon(t.v.toString(),"")),!n&&Ct.Image&&((new Image).src=t.v,n=!0),n||(t.g=xa(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Br(t)}ba(e)}function aa(e){e.g&&(pa(e),e.g.cancel(),e.g=null)}function oa(e){aa(e),e.u&&(Ct.clearTimeout(e.u),e.u=null),ya(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Ct.clearTimeout(e.m),e.m=null)}function ua(e,t){e.l.push(new xi(e.Za++,t)),3==e.G&&sa(e)}function sa(e){Si(e.i)||e.m||(e.m=!0,Zn(e.Ha,e),e.C=0)}function ca(e,t){var n;n=t?t.m:e.V++;var r=ti(e.F);oi(r,"SID",e.J),oi(r,"RID",n),oi(r,"AID",e.U),la(e,r),e.o&&e.s&&ta(r,e.o,e.s),n=new Rr(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=fa(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Ni(e.i,n),Vr(n,r,t)}function la(e,t){e.j&&$r({},(function(e,n){oi(t,n,e)}))}function fa(e,t,n){n=Math.min(e.l.length,n);var r=e.j?Mt(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Oi(l,o,"req"+c+"_")}catch($a){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function ha(e){e.g||e.u||(e.Y=1,Zn(e.Ga,e),e.A=0)}function da(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=xr(Mt(e.Ga,e),ga(e,e.A)),e.A++,!0)}function pa(e){null!=e.B&&(Ct.clearTimeout(e.B),e.B=null)}function va(e){e.g=new Rr(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=ti(e.oa);oi(t,"RID","rpc"),oi(t,"SID",e.J),oi(t,"CI",e.N?"0":"1"),oi(t,"AID",e.U),la(e,t),oi(t,"TYPE","xmlhttp"),e.o&&e.s&&ta(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=ui(ti(t)),n.s=null,n.U=!0,Ur(n,e)}function ya(e){null!=e.v&&(Ct.clearTimeout(e.v),e.v=null)}function ma(e,t){var n=null;if(e.g==t){ya(e),pa(e),e.g=null;var r=2}else{if(!Ci(e.i,t))return;n=t.D,Ai(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Gn(r=yr(),new wr(r,n,t,i)),sa(e)}else ha(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Ti(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=xr(Mt(e.Ha,e,t),ga(e,e.C)),e.C++,!0))}(e,t)||2==r&&da(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:ka(e,5);break;case 4:ka(e,10);break;case 3:ka(e,6);break;default:ka(e,2)}}function ga(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function ka(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=Mt(e.jb,e);n||(n=new ei("//www.google.com/images/cleardot.gif"),Ct.location&&"http"==Ct.location.protocol||ni(n,"https"),ui(n)),function(e,t){var n=new hr;if(Ct.Image){var r=new Image;r.onload=Ft(Li,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Ft(Li,n,r,"TestLoadImage: error",!1,t),r.onabort=Ft(Li,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Ft(Li,n,r,"TestLoadImage: timeout",!1,t),Ct.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else br(2);e.G=0,e.j&&e.j.va(t),ba(e),oa(e)}function ba(e){e.G=0,e.I=-1,e.j&&(0==Di(e.i).length&&0==e.l.length||(e.i.i.length=0,Gt(e.l),e.l.length=0),e.j.ua())}function wa(e,t,n){var r=function(e){return e instanceof ei?ti(e):new ei(e,void 0)}(n);if(""!=r.i)t&&ri(r,t+"."+r.i),ii(r,r.m);else{var i=Ct.location;r=function(e,t,n,r){var i=new ei(null,void 0);return e&&ni(i,e),t&&ri(i,t),n&&ii(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Xt(e.aa,(function(e,t){oi(r,t,e)})),t=e.D,n=e.sa,t&&n&&oi(r,t,n),oi(r,"VER",e.ma),la(e,r),r}function xa(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new Bi(new Mi({ib:!0})):new Bi(e.qa)).L=e.H,t}function _a(){}function Ia(){if(on&&!(10<=Number(kn)))throw Error("Environmental error: no available transport.")}function Ea(e,t){Bn.call(this),this.g=new ra(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Kt(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Kt(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Ca(this)}function Sa(e){Ar.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Ta(){Dr.call(this),this.status=1}function Ca(e){this.g=e}(It=Bi.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Cr.g(),this.C=this.u?Sr(this.u):Sr(Cr),this.g.onreadystatechange=Mt(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void Qi(this,a)}e=n||"";var i=new Yr(this.headers);r&&$r(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Hi,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=Ct.FormData&&e instanceof Ct.FormData,!(0<=qt(Wi,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Xi(this),0<this.B&&((this.K=function(e){return on&&mn()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Mt(this.pa,this)):this.A=ar(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){Qi(this,a)}},It.pa=function(){"undefined"!=typeof Tt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Gn(this,"timeout"),this.abort(8))},It.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Gn(this,"complete"),Gn(this,"abort"),Ji(this))},It.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ji(this,!0)),Bi.Z.M.call(this)},It.Fa=function(){this.s||(this.F||this.v||this.l?Yi(this):this.cb())},It.cb=function(){Yi(this)},It.ba=function(){try{return 2<Zi(this)?this.g.status:-1}catch(Ii){return-1}},It.ga=function(){try{return this.g?this.g.responseText:""}catch(Ii){return""}},It.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),zi(t)}},It.Da=function(){return this.m},It.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(It=ra.prototype).ma=8,It.G=1,It.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},It.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Rr(this,this.h,e,void 0),n=this.s;if(this.P&&(n?tn(n=Zt(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=fa(this,t,r),oi(i=ti(this.F),"RID",e),oi(i,"CVER",22),this.D&&oi(i,"X-HTTP-Session-Id",this.D),la(this,i),this.o&&n&&ta(i,this.o,n),Ni(this.i,t),this.Ra&&oi(i,"TYPE","init"),this.ja?(oi(i,"$req",r),oi(i,"SID","null"),t.$=!0,Vr(t,i,null)):Vr(t,i,r),this.G=2}}else 3==this.G&&(e?ca(this,e):0==this.l.length||Si(this.i)||ca(this))},It.Ga=function(){if(this.u=null,va(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=xr(Mt(this.bb,this),e)}},It.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,br(10),aa(this),va(this))},It.ab=function(){null!=this.v&&(this.v=null,aa(this),da(this),br(19))},It.jb=function(e){e?(this.h.info("Successfully pinged google.com"),br(2)):(this.h.info("Failed to ping google.com"),br(1))},(It=_a.prototype).xa=function(){},It.wa=function(){},It.va=function(){},It.ua=function(){},It.Oa=function(){},Ia.prototype.g=function(e,t){return new Ea(e,t)},Vt(Ea,Bn),Ea.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Zn(Mt(e.hb,e,t))),br(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=wa(e,null,e.W),sa(e)},Ea.prototype.close=function(){ia(this.g)},Ea.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,ua(this.g,t)}else this.v?((t={}).__data__=Wn(e),ua(this.g,t)):ua(this.g,e)},Ea.prototype.M=function(){this.g.j=null,delete this.j,ia(this.g),delete this.g,Ea.Z.M.call(this)},Vt(Sa,Ar),Vt(Ta,Dr),Vt(Ca,_a),Ca.prototype.xa=function(){Gn(this.g,"a")},Ca.prototype.wa=function(e){Gn(this.g,new Sa(e))},Ca.prototype.va=function(e){Gn(this.g,new Ta(e))},Ca.prototype.ua=function(){Gn(this.g,"b")},Ia.prototype.createWebChannel=Ia.prototype.g,Ea.prototype.send=Ea.prototype.u,Ea.prototype.open=Ea.prototype.m,Ea.prototype.close=Ea.prototype.close,_r.NO_ERROR=0,_r.TIMEOUT=8,_r.HTTP_ERROR=6,Ir.COMPLETE="complete",Tr.EventType=Nr,Nr.OPEN="a",Nr.CLOSE="b",Nr.ERROR="c",Nr.MESSAGE="d",Bn.prototype.listen=Bn.prototype.N,Bi.prototype.listenOnce=Bi.prototype.O,Bi.prototype.getLastError=Bi.prototype.La,Bi.prototype.getLastErrorCode=Bi.prototype.Da,Bi.prototype.getStatus=Bi.prototype.ba,Bi.prototype.getResponseJson=Bi.prototype.Qa,Bi.prototype.getResponseText=Bi.prototype.ga,Bi.prototype.send=Bi.prototype.ea;var Na=St.createWebChannelTransport=function(){return new Ia},Aa=St.getStatEventTarget=function(){return yr()},Da=St.ErrorCode=_r,Pa=St.EventType=Ir,Ra=St.Event=pr,Oa=St.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},La=St.FetchXmlHttpFactory=Mi,Ma=St.WebChannel=Tr,Fa=St.XhrIo=Bi,Va="@firebase/firestore",Ua=function(){function e(t){p(this,e),this.uid=t}return y(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Ua.UNAUTHENTICATED=new Ua(null),Ua.GOOGLE_CREDENTIALS=new Ua("google-credentials-uid"),Ua.FIRST_PARTY=new Ua("first-party-uid"),Ua.MOCK_USER=new Ua("mock-user");var ja="9.6.10",qa=new Te("@firebase/firestore");function za(){return qa.logLevel}function Ba(e){if(qa.logLevel<=ge.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Wa);qa.debug.apply(qa,["Firestore (".concat(ja,"): ").concat(e)].concat(de(i)))}}function Ga(e){if(qa.logLevel<=ge.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Wa);qa.error.apply(qa,["Firestore (".concat(ja,"): ").concat(e)].concat(de(i)))}}function Ka(e){if(qa.logLevel<=ge.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Wa);qa.warn.apply(qa,["Firestore (".concat(ja,"): ").concat(e)].concat(de(i)))}}function Wa(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Ha(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(ja,") INTERNAL ASSERTION FAILED: ")+e;throw Ga(t),new Error(t)}function Qa(e,t){e||Ha()}function $a(e,t){return e}var Ya={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ja=function(e){b(n,e);var t=E(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return y(n)}(G),Xa=y((function e(){var t=this;p(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Za=y((function e(t,n){p(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),eo=function(){function e(){p(this,e)}return y(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ua.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),to=function(){function e(t){p(this,e),this.token=t,this.changeListener=null}return y(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),no=function(){function e(t){p(this,e),this.t=t,this.currentUser=Ua.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return y(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},o=new Xa;this.o=function(){n.i++,n.currentUser=n.u(),o.resolve(),o=new Xa,e.enqueueRetryable((function(){return i(n.currentUser)}))};var u=function(){var t=o;e.enqueueRetryable(a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){Ba("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),u()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(Ba("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Xa)}}),0),u()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Ba("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Qa("string"==typeof n.accessToken),new Za(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Qa(null===e||"string"==typeof e),new Ua(e)}}]),e}(),ro=y((function e(t,n,r){p(this,e),this.type="FirstParty",this.user=Ua.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),io=function(){function e(t,n,r){p(this,e),this.h=t,this.l=n,this.m=r}return y(e,[{key:"getToken",value:function(){return Promise.resolve(new ro(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ua.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),ao=y((function e(t){p(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),oo=function(){function e(t){p(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return y(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Ba("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,Ba("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Ba("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):Ba("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Qa("string"==typeof t.token),e.p=t.token,new ao(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),uo=function(){function e(t,n){var r=this;p(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return y(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function so(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}uo.A=-1;var co=function(){function e(){p(this,e)}return y(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=so(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function lo(e,t){return e<t?-1:e>t?1:0}function fo(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function ho(e){return e+"\0"}var po=function(){function e(t,n){if(p(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Ja(Ya.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ja(Ya.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Ja(Ya.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ja(Ya.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return y(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?lo(this.nanoseconds,e.nanoseconds):lo(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),vo=function(){function e(t){p(this,e),this.timestamp=t}return y(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new po(0,0))}},{key:"max",value:function(){return new e(new po(253402300799,999999999))}}]),e}();function yo(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function mo(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function go(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var ko=function(){function e(t,n,r){p(this,e),void 0===n?n=0:n>t.length&&Ha(),void 0===r?r=t.length-n:r>t.length-n&&Ha(),this.segments=t,this.offset=n,this.len=r}return y(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),bo=function(e){b(n,e);var t=E(n);function n(){return p(this,n),t.apply(this,arguments)}return y(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Ja(Ya.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,de(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(ko),wo=/^[_a-zA-Z][_a-zA-Z0-9]*$/,xo=function(e){b(n,e);var t=E(n);function n(){return p(this,n),t.apply(this,arguments)}return y(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return wo.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Ja(Ya.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Ja(Ya.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Ja(Ya.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Ja(Ya.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(ko),_o=function(){function e(t){p(this,e),this.fields=t,t.sort(xo.comparator)}return y(e,[{key:"covers",value:function(e){var t,n=m(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return fo(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var Io=function(e){function t(e){p(this,t),this.binaryString=e}return y(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return lo(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Io.EMPTY_BYTE_STRING=new Io("");var Eo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function So(e){if(Qa(!!e),"string"==typeof e){var t=0,n=Eo.exec(e);if(Qa(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:To(e.seconds),nanos:To(e.nanos)}}function To(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Co(e){return"string"==typeof e?Io.fromBase64String(e):Io.fromUint8Array(e)}function No(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ao(e){var t=e.mapValue.fields.__previous_value__;return No(t)?Ao(t):t}function Do(e){var t=So(e.mapValue.fields.__local_write_time__.timestampValue);return new po(t.seconds,t.nanos)}var Po=y((function e(t,n,r,i,a,o,u,s){p(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),Ro=function(){function e(t,n){p(this,e),this.projectId=t,this.database=n||"(default)"}return y(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Oo(e){return null==e}function Lo(e){return 0===e&&1/e==-1/0}function Mo(e){return"number"==typeof e&&Number.isInteger(e)&&!Lo(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Fo=function(){function e(t){p(this,e),this.path=t}return y(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===bo.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(bo.fromString(t))}},{key:"fromName",value:function(t){return new e(bo.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(bo.emptyPath())}},{key:"comparator",value:function(e,t){return bo.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new bo(t.slice()))}}]),e}(),Vo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Uo={nullValue:"NULL_VALUE"};function jo(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?No(e)?4:eu(e)?9:10:Ha()}function qo(e,t){if(e===t)return!0;var n=jo(e);if(n!==jo(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Do(e).isEqual(Do(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=So(e.timestampValue),r=So(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Co(e.bytesValue).isEqual(Co(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return To(e.geoPointValue.latitude)===To(t.geoPointValue.latitude)&&To(e.geoPointValue.longitude)===To(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return To(e.integerValue)===To(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=To(e.doubleValue),r=To(t.doubleValue);return n===r?Lo(n)===Lo(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return fo(e.arrayValue.values||[],t.arrayValue.values||[],qo);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(yo(n)!==yo(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!qo(n[i],r[i])))return!1;return!0}(e,t);default:return Ha()}}function zo(e,t){return void 0!==(e.values||[]).find((function(e){return qo(e,t)}))}function Bo(e,t){if(e===t)return 0;var n=jo(e),r=jo(t);if(n!==r)return lo(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return lo(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=To(e.integerValue||e.doubleValue),r=To(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Go(e.timestampValue,t.timestampValue);case 4:return Go(Do(e),Do(t));case 5:return lo(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Co(e),r=Co(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=lo(n[i],r[i]);if(0!==a)return a}return lo(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=lo(To(e.latitude),To(t.latitude));return 0!==n?n:lo(To(e.longitude),To(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Bo(n[i],r[i]);if(a)return a}return lo(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=lo(r[o],a[o]);if(0!==u)return u;var s=Bo(n[r[o]],i[a[o]]);if(0!==s)return s}return lo(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Ha()}}function Go(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return lo(e,t);var n=So(e),r=So(t),i=lo(n.seconds,r.seconds);return 0!==i?i:lo(n.nanos,r.nanos)}function Ko(e){return Wo(e)}function Wo(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=So(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Co(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Fo.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=m(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Wo(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=m(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Wo(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Ha();var t,n}function Ho(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Qo(e){return!!e&&"integerValue"in e}function $o(e){return!!e&&"arrayValue"in e}function Yo(e){return!!e&&"nullValue"in e}function Jo(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Xo(e){return!!e&&"mapValue"in e}function Zo(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return mo(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Zo(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Zo(e.arrayValue.values[r]);return n}return Object.assign({},e)}function eu(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function tu(e,t){return void 0===e?t:void 0===t||Bo(e,t)>0?e:t}function nu(e,t){return void 0===e?t:void 0===t||Bo(e,t)<0?e:t}var ru=function(){function e(t){p(this,e),this.value=t}return y(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Xo(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zo(t)}},{key:"setAll",value:function(e){var t=this,n=xo.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Zo(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Xo(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return qo(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Xo(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){mo(t,(function(t,n){return e[t]=n}));var r,i=m(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Zo(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function iu(e){var t=[];return mo(e.fields,(function(e,n){var r=new xo([e]);if(Xo(n)){var i=iu(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=m(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new _o(t)}var au=function(){function e(t,n,r,i,a,o){p(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return y(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=ru.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=ru.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,vo.min(),vo.min(),ru.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,vo.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,vo.min(),ru.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,vo.min(),ru.empty(),2)}}]),e}(),ou=y((function e(t,n,r,i){p(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function uu(e){return e.fields.find((function(e){return 2===e.kind}))}function su(e){return e.fields.filter((function(e){return 2!==e.kind}))}ou.UNKNOWN_ID=-1;var cu=y((function e(t,n){p(this,e),this.fieldPath=t,this.kind=n})),lu=function(){function e(t,n){p(this,e),this.sequenceNumber=t,this.offset=n}return y(e,null,[{key:"empty",value:function(){return new e(0,du.min())}}]),e}();function fu(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=vo.fromTimestamp(1e9===r?new po(n+1,0):new po(n,r));return new du(i,Fo.empty(),t)}function hu(e){return new du(e.readTime,e.key,-1)}var du=function(){function e(t,n,r){p(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return y(e,null,[{key:"min",value:function(){return new e(vo.min(),Fo.empty(),-1)}},{key:"max",value:function(){return new e(vo.max(),Fo.empty(),-1)}}]),e}();function pu(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Fo.comparator(e.documentKey,t.documentKey))?n:lo(e.largestBatchId,t.largestBatchId)}var vu=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;p(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.P=null}));function yu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new vu(e,t,n,r,i,a,o)}function mu(e){var t=$a(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+Ko(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Oo(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Ko(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Ko(e)})).join(",")),t.P=n}return t.P}function gu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Pu(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!qo(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ou(e.startAt,t.startAt)&&Ou(e.endAt,t.endAt)}function ku(e){return Fo.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function bu(e,t){return e.filters.filter((function(e){return e instanceof wu&&e.field.isEqual(t)}))}var wu=function(e){b(n,e);var t=E(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return y(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Bo(t,this.value)):null!==t&&jo(this.value)===jo(t)&&this.v(Bo(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ha()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new xu(e,t,r):"array-contains"===t?new Su(e,r):"in"===t?new Tu(e,r):"not-in"===t?new Cu(e,r):"array-contains-any"===t?new Nu(e,r):new n(e,t,r)}},{key:"V",value:function(e,t,n){return"in"===t?new _u(e,n):new Iu(e,n)}}]),n}(function(){return y((function e(){p(this,e)}))}()),xu=function(e){b(n,e);var t=E(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this,e,r,i)).key=Fo.fromName(i.referenceValue),a}return y(n,[{key:"matches",value:function(e){var t=Fo.comparator(e.key,this.key);return this.v(t)}}]),n}(wu),_u=function(e){b(n,e);var t=E(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,"in",r)).keys=Eu("in",r),i}return y(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(wu),Iu=function(e){b(n,e);var t=E(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,"not-in",r)).keys=Eu("not-in",r),i}return y(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(wu);function Eu(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Fo.fromName(e.referenceValue)}))}var Su=function(e){b(n,e);var t=E(n);function n(e,r){return p(this,n),t.call(this,e,"array-contains",r)}return y(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return $o(t)&&zo(t.arrayValue,this.value)}}]),n}(wu),Tu=function(e){b(n,e);var t=E(n);function n(e,r){return p(this,n),t.call(this,e,"in",r)}return y(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&zo(this.value.arrayValue,t)}}]),n}(wu),Cu=function(e){b(n,e);var t=E(n);function n(e,r){return p(this,n),t.call(this,e,"not-in",r)}return y(n,[{key:"matches",value:function(e){if(zo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!zo(this.value.arrayValue,t)}}]),n}(wu),Nu=function(e){b(n,e);var t=E(n);function n(e,r){return p(this,n),t.call(this,e,"array-contains-any",r)}return y(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!$o(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return zo(t.value.arrayValue,e)}))}}]),n}(wu),Au=y((function e(t,n){p(this,e),this.position=t,this.inclusive=n})),Du=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";p(this,e),this.field=t,this.dir=n}));function Pu(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Ru(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Fo.comparator(Fo.fromName(o.referenceValue),n.key):Bo(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Ou(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!qo(e.position[n],t.position[n]))return!1;return!0}var Lu=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;p(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.D=null,this.C=null,this.startAt,this.endAt}));function Mu(e,t,n,r,i,a,o,u){return new Lu(e,t,n,r,i,a,o,u)}function Fu(e){return new Lu(e)}function Vu(e){return!Oo(e.limit)&&"F"===e.limitType}function Uu(e){return!Oo(e.limit)&&"L"===e.limitType}function ju(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function qu(e){var t,n=m(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function zu(e){return null!==e.collectionGroup}function Bu(e){var t=$a(e);if(null===t.D){t.D=[];var n=qu(t),r=ju(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new Du(n)),t.D.push(new Du(xo.keyField(),"asc"));else{var i,a=!1,o=m(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.D.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new Du(xo.keyField(),s))}}}return t.D}function Gu(e){var t=$a(e);if(!t.C)if("F"===t.limitType)t.C=yu(t.path,t.collectionGroup,Bu(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=m(Bu(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Du(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Au(t.endAt.position,!t.endAt.inclusive):null,s=t.startAt?new Au(t.startAt.position,!t.startAt.inclusive):null;t.C=yu(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.C}function Ku(e,t,n){return new Lu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Wu(e,t){return gu(Gu(e),Gu(t))&&e.limitType===t.limitType}function Hu(e){return"".concat(mu(Gu(e)),"|lt:").concat(e.limitType)}function Qu(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(Ko(t.value));var t})).join(", "),"]")),Oo(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Ko(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Ko(e)})).join(",")),"Target(".concat(t,")")}(Gu(e)),"; limitType=").concat(e.limitType,")")}function $u(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Fo.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=m(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=m(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Ru(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Bu(e),t))&&!(e.endAt&&!function(e,t,n){var r=Ru(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Bu(e),t))}(e,t)}function Yu(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Ju(e){return function(t,n){var r,i=!1,a=m(Bu(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Xu(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Xu(e,t,n){var r=e.field.isKeyField()?Fo.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Bo(r,i):Ha()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ha()}}function Zu(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lo(t)?"-0":t}}function es(e){return{integerValue:""+e}}function ts(e,t){return Mo(t)?es(t):Zu(e,t)}var ns=y((function e(){p(this,e),this._=void 0}));function rs(e,t,n){return e instanceof os?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof us?ss(e,t):e instanceof cs?ls(e,t):function(e,t){var n=as(e,t),r=hs(n)+hs(e.k);return Qo(n)&&Qo(e.k)?es(r):Zu(e.M,r)}(e,t)}function is(e,t,n){return e instanceof us?ss(e,t):e instanceof cs?ls(e,t):n}function as(e,t){return e instanceof fs?Qo(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var os=function(e){b(n,e);var t=E(n);function n(){return p(this,n),t.apply(this,arguments)}return y(n)}(ns),us=function(e){b(n,e);var t=E(n);function n(e){var r;return p(this,n),(r=t.call(this)).elements=e,r}return y(n)}(ns);function ss(e,t){var n,r=ds(t),i=m(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return qo(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var cs=function(e){b(n,e);var t=E(n);function n(e){var r;return p(this,n),(r=t.call(this)).elements=e,r}return y(n)}(ns);function ls(e,t){var n,r=ds(t),i=m(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!qo(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var fs=function(e){b(n,e);var t=E(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).M=e,i.k=r,i}return y(n)}(ns);function hs(e){return To(e.integerValue||e.doubleValue)}function ds(e){return $o(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var ps=y((function e(t,n){p(this,e),this.field=t,this.transform=n}));var vs=y((function e(t,n){p(this,e),this.version=t,this.transformResults=n})),ys=function(){function e(t,n){p(this,e),this.updateTime=t,this.exists=n}return y(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function ms(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var gs=y((function e(){p(this,e)}));function ks(e,t,n){e instanceof Is?function(e,t,n){var r=e.value.clone(),i=Ts(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Es?function(e,t,n){if(ms(e.precondition,t)){var r=Ts(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Ss(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function bs(e,t,n){e instanceof Is?function(e,t,n){if(ms(e.precondition,t)){var r=e.value.clone(),i=Cs(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(_s(t),r).setHasLocalMutations()}}(e,t,n):e instanceof Es?function(e,t,n){if(ms(e.precondition,t)){var r=Cs(e.fieldTransforms,n,t),i=t.data;i.setAll(Ss(e)),i.setAll(r),t.convertToFoundDocument(_s(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){ms(e.precondition,t)&&t.convertToNoDocument(vo.min())}(e,t)}function ws(e,t){var n,r=null,i=m(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=as(a.transform,o||null);null!=u&&(null==r&&(r=ru.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function xs(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&fo(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof us&&t instanceof us||e instanceof cs&&t instanceof cs?fo(e.elements,t.elements,qo):e instanceof fs&&t instanceof fs?qo(e.k,t.k):e instanceof os&&t instanceof os}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function _s(e){return e.isFoundDocument()?e.version:vo.min()}var Is=function(e){b(n,e);var t=E(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return p(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return y(n)}(gs),Es=function(e){b(n,e);var t=E(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return p(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return y(n)}(gs);function Ss(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Ts(e,t,n){var r=new Map;Qa(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,is(o,u,n[i]))}return r}function Cs(e,t,n){var r,i=new Map,a=m(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,rs(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Ns,As,Ds=function(e){b(n,e);var t=E(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return y(n)}(gs),Ps=function(e){b(n,e);var t=E(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return y(n)}(gs),Rs=y((function e(t){p(this,e),this.count=t}));function Os(e){switch(e){default:return Ha();case Ya.CANCELLED:case Ya.UNKNOWN:case Ya.DEADLINE_EXCEEDED:case Ya.RESOURCE_EXHAUSTED:case Ya.INTERNAL:case Ya.UNAVAILABLE:case Ya.UNAUTHENTICATED:return!1;case Ya.INVALID_ARGUMENT:case Ya.NOT_FOUND:case Ya.ALREADY_EXISTS:case Ya.PERMISSION_DENIED:case Ya.FAILED_PRECONDITION:case Ya.ABORTED:case Ya.OUT_OF_RANGE:case Ya.UNIMPLEMENTED:case Ya.DATA_LOSS:return!0}}function Ls(e){if(void 0===e)return Ga("GRPC error has no .code"),Ya.UNKNOWN;switch(e){case Ns.OK:return Ya.OK;case Ns.CANCELLED:return Ya.CANCELLED;case Ns.UNKNOWN:return Ya.UNKNOWN;case Ns.DEADLINE_EXCEEDED:return Ya.DEADLINE_EXCEEDED;case Ns.RESOURCE_EXHAUSTED:return Ya.RESOURCE_EXHAUSTED;case Ns.INTERNAL:return Ya.INTERNAL;case Ns.UNAVAILABLE:return Ya.UNAVAILABLE;case Ns.UNAUTHENTICATED:return Ya.UNAUTHENTICATED;case Ns.INVALID_ARGUMENT:return Ya.INVALID_ARGUMENT;case Ns.NOT_FOUND:return Ya.NOT_FOUND;case Ns.ALREADY_EXISTS:return Ya.ALREADY_EXISTS;case Ns.PERMISSION_DENIED:return Ya.PERMISSION_DENIED;case Ns.FAILED_PRECONDITION:return Ya.FAILED_PRECONDITION;case Ns.ABORTED:return Ya.ABORTED;case Ns.OUT_OF_RANGE:return Ya.OUT_OF_RANGE;case Ns.UNIMPLEMENTED:return Ya.UNIMPLEMENTED;case Ns.DATA_LOSS:return Ya.DATA_LOSS;default:return Ha()}}(As=Ns||(Ns={}))[As.OK=0]="OK",As[As.CANCELLED=1]="CANCELLED",As[As.UNKNOWN=2]="UNKNOWN",As[As.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",As[As.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",As[As.NOT_FOUND=5]="NOT_FOUND",As[As.ALREADY_EXISTS=6]="ALREADY_EXISTS",As[As.PERMISSION_DENIED=7]="PERMISSION_DENIED",As[As.UNAUTHENTICATED=16]="UNAUTHENTICATED",As[As.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",As[As.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",As[As.ABORTED=10]="ABORTED",As[As.OUT_OF_RANGE=11]="OUT_OF_RANGE",As[As.UNIMPLEMENTED=12]="UNIMPLEMENTED",As[As.INTERNAL=13]="INTERNAL",As[As.UNAVAILABLE=14]="UNAVAILABLE",As[As.DATA_LOSS=15]="DATA_LOSS";var Ms=function(){function e(t,n){p(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return y(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=m(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){mo(this.inner,(function(t,n){var r,i=m(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return go(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Fs=function(){function e(t,n){p(this,e),this.comparator=t,this.root=n||Us.EMPTY}return y(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Us.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Us.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Vs(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Vs(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Vs(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Vs(this.root,e,this.comparator,!0)}}]),e}(),Vs=function(){function e(t,n,r,i){p(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return y(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Us=function(){function e(t,n,r,i,a){p(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return y(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Ha();if(this.right.isRed())throw Ha();var e=this.left.check();if(e!==this.right.check())throw Ha();return e+(this.isRed()?0:1)}}]),e}();Us.EMPTY=null,Us.RED=!0,Us.BLACK=!1,Us.EMPTY=new(function(){function e(){p(this,e),this.size=0}return y(e,[{key:"key",get:function(){throw Ha()}},{key:"value",get:function(){throw Ha()}},{key:"color",get:function(){throw Ha()}},{key:"left",get:function(){throw Ha()}},{key:"right",get:function(){throw Ha()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Us(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var js=function(){function e(t){p(this,e),this.comparator=t,this.data=new Fs(this.comparator)}return y(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new qs(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new qs(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),qs=function(){function e(t){p(this,e),this.iter=t}return y(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function zs(e){return e.hasNext()?e.getNext():void 0}var Bs=new Fs(Fo.comparator);function Gs(){return Bs}var Ks=new Fs(Fo.comparator);function Ws(){return Ks}function Hs(){return new Ms((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Qs=new Fs(Fo.comparator),$s=new js(Fo.comparator);function Ys(){for(var e=$s,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Js=new js(lo);function Xs(){return Js}var Zs=function(){function e(t,n,r,i,a){p(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return y(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,ec.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(vo.min(),r,Xs(),Gs(),Ys())}}]),e}(),ec=function(){function e(t,n,r,i,a){p(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return y(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Io.EMPTY_BYTE_STRING,n,Ys(),Ys(),Ys())}}]),e}(),tc=y((function e(t,n,r,i){p(this,e),this.O=t,this.removedTargetIds=n,this.key=r,this.F=i})),nc=y((function e(t,n){p(this,e),this.targetId=t,this.$=n})),rc=y((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Io.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;p(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),ic=function(){function e(){p(this,e),this.B=0,this.L=uc(),this.U=Io.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}return y(e,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"K",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.G}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}},{key:"H",value:function(){var e=Ys(),t=Ys(),n=Ys();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ha()}})),new ec(this.U,this.q,e,t,n)}},{key:"J",value:function(){this.G=!1,this.L=uc()}},{key:"Y",value:function(e,t){this.G=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.G=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.G=!0,this.q=!0}}]),e}(),ac=function(){function e(t){p(this,e),this.nt=t,this.st=new Map,this.it=Gs(),this.rt=oc(),this.ot=new js(lo)}return y(e,[{key:"ut",value:function(e){var t,n=m(e.O);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(u){n.e(u)}finally{n.f()}var i,a=m(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.F)}}catch(u){a.e(u)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.K||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.K||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:Ha()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((function(e,r){n.ft(r)&&t(r)}))}},{key:"_t",value:function(e){var t=e.targetId,n=e.$.count,r=this.wt(t);if(r){var i=r.target;if(ku(i))if(0===n){var a=new Fo(i.path);this.ct(t,a,au.newNoDocument(a,vo.min()))}else Qa(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&ku(a.target)){var o=new Fo(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.ct(i,o,au.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}}));var r=Ys();this.rt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.it.forEach((function(t,n){return n.setReadTime(e)}));var i=new Zs(e,n,this.ot,this.it,r);return this.it=Gs(),this.rt=oc(),this.ot=new js(lo),i}},{key:"at",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new ic,this.st.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.rt.get(e);return t||(t=new js(lo),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||Ba("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new ic),this.nt.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function oc(){return new Fs(Fo.comparator)}function uc(){return new Fs(Fo.comparator)}var sc={asc:"ASCENDING",desc:"DESCENDING"},cc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lc=y((function e(t,n){p(this,e),this.databaseId=t,this.N=n}));function fc(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function hc(e,t){return e.N?t.toBase64():t.toUint8Array()}function dc(e,t){return fc(e,t.toTimestamp())}function pc(e){return Qa(!!e),vo.fromTimestamp(function(e){var t=So(e);return new po(t.seconds,t.nanos)}(e))}function vc(e,t){return function(e){return new bo(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function yc(e){var t=bo.fromString(e);return Qa(Uc(t)),t}function mc(e,t){return vc(e.databaseId,t.path)}function gc(e,t){var n=yc(t);if(n.get(1)!==e.databaseId.projectId)throw new Ja(Ya.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Ja(Ya.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Fo(xc(n))}function kc(e,t){return vc(e.databaseId,t)}function bc(e){var t=yc(e);return 4===t.length?bo.emptyPath():xc(t)}function wc(e){return new bo(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function xc(e){return Qa(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function _c(e,t,n){return{name:mc(e,t),fields:n.value.mapValue.fields}}function Ic(e,t,n){var r=gc(e,t.name),i=pc(t.updateTime),a=new ru({mapValue:{fields:t.fields}}),o=au.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Ec(e,t){return"found"in t?function(e,t){Qa(!!t.found),t.found.name,t.found.updateTime;var n=gc(e,t.found.name),r=pc(t.found.updateTime),i=new ru({mapValue:{fields:t.found.fields}});return au.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){Qa(!!t.missing),Qa(!!t.readTime);var n=gc(e,t.missing),r=pc(t.readTime);return au.newNoDocument(n,r)}(e,t):Ha()}function Sc(e,t){var n;if(t instanceof Is)n={update:_c(e,t.key,t.value)};else if(t instanceof Ds)n={delete:mc(e,t.key)};else if(t instanceof Es)n={update:_c(e,t.key,t.data),updateMask:Vc(t.fieldMask)};else{if(!(t instanceof Ps))return Ha();n={verify:mc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof os)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof us)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof cs)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof fs)return{fieldPath:t.field.canonicalString(),increment:n.k};throw Ha()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:dc(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ha()}(e,t.precondition)),n}function Tc(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?ys.updateTime(pc(e.updateTime)):void 0!==e.exists?ys.exists(e.exists):ys.none()}(t.currentDocument):ys.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Qa("REQUEST_TIME"===t.setToServerValue),n=new os;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new us(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new cs(i)}else"increment"in t?n=new fs(e,t.increment):Ha();var a=xo.fromServerFormat(t.fieldPath);return new ps(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=gc(e,t.update.name),a=new ru({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new _o(t.map((function(e){return xo.fromServerFormat(e)})))}(t.updateMask);return new Es(i,a,o,n,r)}return new Is(i,a,n,r)}if(t.delete){var u=gc(e,t.delete);return new Ds(u,n)}if(t.verify){var s=gc(e,t.verify);return new Ps(s,n)}return Ha()}function Cc(e,t){return{documents:[kc(e,t.path)]}}function Nc(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=kc(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=kc(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(Jo(e.value))return{unaryFilter:{field:Oc(e.field),op:"IS_NAN"}};if(Yo(e.value))return{unaryFilter:{field:Oc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Jo(e.value))return{unaryFilter:{field:Oc(e.field),op:"IS_NOT_NAN"}};if(Yo(e.value))return{unaryFilter:{field:Oc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oc(e.field),op:Rc(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Oc(e.field),direction:Pc(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.N||Oo(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Ac(e){var t=bc(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Qa(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Dc(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new Du(Lc(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Oo(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Au(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Au(n,t)}(n.endAt)),Mu(t,i,u,o,s,"F",c,l)}function Dc(e){return e?void 0!==e.unaryFilter?[Fc(e)]:void 0!==e.fieldFilter?[Mc(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Dc(e)})).reduce((function(e,t){return e.concat(t)})):Ha():[]}function Pc(e){return sc[e]}function Rc(e){return cc[e]}function Oc(e){return{fieldPath:e.canonicalString()}}function Lc(e){return xo.fromServerFormat(e.fieldPath)}function Mc(e){return wu.create(Lc(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ha()}}(e.fieldFilter.op),e.fieldFilter.value)}function Fc(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Lc(e.unaryFilter.field);return wu.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Lc(e.unaryFilter.field);return wu.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Lc(e.unaryFilter.field);return wu.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Lc(e.unaryFilter.field);return wu.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ha()}}function Vc(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Uc(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function jc(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=zc(t)),t=qc(e.get(n),t);return zc(t)}function qc(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function zc(e){return e+"\x01\x01"}function Bc(e){var t=e.length;if(Qa(t>=2),2===t)return Qa("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),bo.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Ha(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Ha()}a=o+2}return new bo(r)}var Gc=["userId","batchId"];function Kc(e,t){return[e,jc(t)]}function Wc(e,t,n){return[e,jc(t),n]}var Hc={},Qc=["prefixPath","collectionGroup","readTime","documentId"],$c=["prefixPath","collectionGroup","documentId"],Yc=["collectionGroup","readTime","prefixPath","documentId"],Jc=["canonicalId","targetId"],Xc=["targetId","path"],Zc=["path","targetId"],el=["collectionId","parent"],tl=["indexId","uid"],nl=["uid","sequenceNumber"],rl=["indexId","uid","arrayValue","directionalValue","documentKey"],il=["indexId","uid","documentKey"],al=["userId","collectionPath","documentId"],ol=["userId","collectionPath","largestBatchId"],ul=["userId","collectionGroup","largestBatchId"],sl=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),cl=[].concat(de(sl),["documentOverlays"]),ll=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],fl=[].concat(ll,["indexConfiguration","indexState","indexEntries"]),hl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",dl=function(){function e(){p(this,e),this.onCommittedListeners=[]}return y(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),pl=function(){function e(t){var n=this;p(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return y(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Ha(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=m(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),vl=function(){function e(t,n){var r=this;p(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new Xa,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new gl(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=_l(e.target.error);r.At.reject(new gl(t,n))}}return y(e,[{key:"Rt",get:function(){return this.At.promise}},{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(Ba("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"bt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new bl(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new gl(n,t)}}}]),e}(),yl=function(){function e(t,n,r){p(this,e),this.name=t,this.version=n,this.Pt=r,12.2===e.Vt(L())&&Ga("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return y(e,[{key:"Nt",value:function(){var e=a(h().mark((function e(t){var n=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Ba("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new gl(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Ja(Ya.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Ja(Ya.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new gl(t,n))},i.onupgradeneeded=function(e){Ba("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.Pt.kt(t,i.transaction,e.oldVersion,n.version).next((function(){Ba("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.Mt&&(this.db.onversionchange=function(e){return n.Mt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ot",value:function(e){this.Mt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=a(h().mark((function e(t,n,r,i){var a,o,u,s,c=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(h().mark((function e(){var n,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Nt(t);case 2:return c.db=e.sent,n=vl.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.bt(),e})).catch((function(e){return n.abort(e),pl.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.Rt;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s="FirebaseError"!==e.t1.name&&o<3,Ba("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",s),this.close(),s){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Ba("SimpleDb","Removing database:",e),wl(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"vt",value:function(){if(!q())return!1;if(e.St())return!0;var t=L(),n=e.Vt(t),r=0<n&&n<10,i=e.Dt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"St",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.Ct)}},{key:"xt",value:function(e,t){return e.store(t)}},{key:"Vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),ml=function(){function e(t){p(this,e),this.Ft=t,this.$t=!1,this.Bt=null}return y(e,[{key:"isDone",get:function(){return this.$t}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.Ft=e}},{key:"done",value:function(){this.$t=!0}},{key:"Ut",value:function(e){this.Bt=e}},{key:"delete",value:function(){return wl(this.Ft.delete())}}]),e}(),gl=function(e){b(n,e);var t=E(n);function n(e,r){var i;return p(this,n),(i=t.call(this,Ya.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return y(n)}(Ja);function kl(e){return"IndexedDbTransactionError"===e.name}var bl=function(){function e(t){p(this,e),this.store=t}return y(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Ba("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Ba("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),wl(n)}},{key:"add",value:function(e){return Ba("SimpleDb","ADD",this.store.name,e,e),wl(this.store.add(e))}},{key:"get",value:function(e){var t=this;return wl(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Ba("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Ba("SimpleDb","DELETE",this.store.name,e),wl(this.store.delete(e))}},{key:"count",value:function(){return Ba("SimpleDb","COUNT",this.store.name),wl(this.store.count())}},{key:"qt",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.Gt(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new pl((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"Kt",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new pl((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Qt",value:function(e,t){Ba("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Gt(r,(function(e,t,n){return n.delete()}))}},{key:"Wt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Gt(r,t)}},{key:"zt",value:function(e){var t=this.cursor({});return new pl((function(n,r){t.onerror=function(e){var t=_l(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Gt",value:function(e,t){var n=[];return new pl((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new ml(i),o=t(i.primaryKey,i.value,a);if(o instanceof pl){var u=o.catch((function(e){return a.done(),pl.reject(e)}));n.push(u)}a.isDone?r():null===a.Lt?i.continue():i.continue(a.Lt)}else r()}})).next((function(){return pl.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function wl(e){return new pl((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=_l(e.target.error);n(t)}}))}var xl=!1;function _l(e){var t=yl.Vt(L());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Ja("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return xl||(xl=!0,setTimeout((function(){throw r}),0)),r}}return e}var Il=function(e){b(n,e);var t=E(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).Ht=e,i.currentSequenceNumber=r,i}return y(n)}(dl);function El(e,t){var n=$a(e);return yl.xt(n.Ht,t)}var Sl=function(){function e(t,n,r,i){p(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return y(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&ks(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=m(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&bs(r,e,this.localWriteTime)}}catch(u){n.e(u)}finally{n.f()}var i,a=m(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&bs(o,e,this.localWriteTime)}}catch(u){a.e(u)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(vo.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Ys())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&fo(this.mutations,e.mutations,(function(e,t){return xs(e,t)}))&&fo(this.baseMutations,e.baseMutations,(function(e,t){return xs(e,t)}))}}]),e}(),Tl=function(){function e(t,n,r,i){p(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return y(e,null,[{key:"from",value:function(t,n,r){Qa(t.mutations.length===r.length);for(var i=Qs,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Cl=function(){function e(t,n){p(this,e),this.largestBatchId=t,this.mutation=n}return y(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Nl=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:vo.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:vo.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Io.EMPTY_BYTE_STRING;p(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return y(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Al=y((function e(t){p(this,e),this.Jt=t}));function Dl(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Pl(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:mc(e,t.key),fields:t.data.value.mapValue.fields,updateTime:fc(e,t.version.toTimestamp())}}(e.Jt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Rl(t.version)};else{if(!t.isUnknownDocument())return Ha();r.unknownDocument={path:n.path.toArray(),version:Rl(t.version)}}return r}function Pl(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Rl(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Ol(e){var t=new po(e.seconds,e.nanoseconds);return vo.fromTimestamp(t)}function Ll(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Tc(e.Jt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Tc(e.Jt,t)})),u=po.fromMillis(t.localWriteTimeMs);return new Sl(t.batchId,u,n,o)}function Ml(e){var t,n,r=Ol(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Ol(e.lastLimboFreeSnapshotVersion):vo.min();return void 0!==e.query.documents?(Qa(1===(n=e.query).documents.length),t=Gu(Fu(bc(n.documents[0])))):t=function(e){return Gu(Ac(e))}(e.query),new Nl(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Io.fromBase64String(e.resumeToken))}function Fl(e,t){var n,r=Rl(t.snapshotVersion),i=Rl(t.lastLimboFreeSnapshotVersion);n=ku(t.target)?Cc(e.Jt,t.target):Nc(e.Jt,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:mu(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Vl(e){var t=Ac({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Ku(t,t.limit,"L"):t}function Ul(e,t){return new Cl(t.largestBatchId,Tc(e.Jt,t.overlayMutation))}function jl(e,t){var n=t.path.lastSegment();return[e,jc(t.path.popLast()),n]}var ql=function(){function e(){p(this,e)}return y(e,[{key:"getBundleMetadata",value:function(e,t){return zl(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Ol(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return zl(e).put({bundleId:(n=t).id,createTime:Rl(pc(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Bl(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Vl(t.bundledQuery),readTime:Ol(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return Bl(e).put(function(e){return{name:e.name,readTime:Rl(pc(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function zl(e){return El(e,"bundles")}function Bl(e){return El(e,"namedQueries")}var Gl=function(){function e(t,n){p(this,e),this.M=t,this.userId=n}return y(e,[{key:"getOverlay",value:function(e,t){var n=this;return Kl(e).get(jl(this.userId,t)).next((function(e){return e?Ul(n.M,e):null}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Cl(t,a);i.push(r.Xt(e,o))})),pl.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(jc(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Kl(e).Qt("collectionPathOverlayIndex",i))})),pl.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Hs(),a=jc(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Kl(e).qt("collectionPathOverlayIndex",o).next((function(e){var t,n=m(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Ul(r.M,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Hs(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Kl(e).Wt({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=Ul(a.M,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"Xt",value:function(e,t){return Kl(e).put(function(e,t,n){var r=l(jl(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Sc(e.Jt,n.mutation)}}(this.M,this.userId,t))}}],[{key:"Yt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Kl(e){return El(e,"documentOverlays")}var Wl=function(){function e(){p(this,e)}return y(e,[{key:"Zt",value:function(e,t){this.te(e,t),t.ee()}},{key:"te",value:function(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(To(e.integerValue));else if("doubleValue"in e){var n=To(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),Lo(n)?t.se(0):t.se(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie("".concat(r.seconds||"")),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Co(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ne(t,45),t.se(i.latitude||0),t.se(i.longitude||0)}else"mapValue"in e?eu(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):Ha()}},{key:"re",value:function(e,t){this.ne(t,25),this.le(e,t)}},{key:"le",value:function(e,t){t.ie(e)}},{key:"ce",value:function(e,t){var n=e.fields||{};this.ne(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.re(a,t),this.te(n[a],t)}}},{key:"he",value:function(e,t){var n=e.values||[];this.ne(t,50);var r,i=m(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.te(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ae",value:function(e,t){var n=this;this.ne(t,37),Fo.fromName(e).path.forEach((function(e){n.ne(t,60),n.le(e,t)}))}},{key:"ne",value:function(e,t){e.se(t)}},{key:"oe",value:function(e){e.se(2)}}]),e}();function Hl(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Ql(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Hl(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Wl.fe=new Wl;var $l=function(){function e(){p(this,e),this.buffer=new Uint8Array(1024),this.position=0}return y(e,[{key:"de",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this._e(n.value),n=t.next();this.we()}},{key:"me",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.ge(n.value),n=t.next();this.ye()}},{key:"pe",value:function(e){var t,n=m(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(r<"\ud800"||"\udbff"<r)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{var a=r.codePointAt(0);this._e(240|a>>>18),this._e(128|63&a>>>12),this._e(128|63&a>>>6),this._e(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.we()}},{key:"Ie",value:function(e){var t,n=m(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{var a=r.codePointAt(0);this.ge(240|a>>>18),this.ge(128|63&a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ye()}},{key:"Te",value:function(e){var t=this.Ee(e),n=Ql(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Re",value:function(e){var t=this.Ee(e),n=Ql(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"be",value:function(){this.Pe(255),this.Pe(255)}},{key:"Ve",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Se",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"_e",value:function(e){var t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}},{key:"ge",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"we",value:function(){this.Pe(0),this.Pe(1)}},{key:"ye",value:function(){this.ve(0),this.ve(1)}},{key:"Pe",value:function(e){this.Ae(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Ae(1),this.buffer[this.position++]=~e}},{key:"Ae",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Yl=function(){function e(t){p(this,e),this.De=t}return y(e,[{key:"ue",value:function(e){this.De.de(e)}},{key:"ie",value:function(e){this.De.pe(e)}},{key:"se",value:function(e){this.De.Te(e)}},{key:"ee",value:function(){this.De.be()}}]),e}(),Jl=function(){function e(t){p(this,e),this.De=t}return y(e,[{key:"ue",value:function(e){this.De.me(e)}},{key:"ie",value:function(e){this.De.Ie(e)}},{key:"se",value:function(e){this.De.Re(e)}},{key:"ee",value:function(){this.De.Ve()}}]),e}(),Xl=function(){function e(){p(this,e),this.De=new $l,this.Ce=new Yl(this.De),this.xe=new Jl(this.De)}return y(e,[{key:"seed",value:function(e){this.De.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.Ce:this.xe}},{key:"Se",value:function(){return this.De.Se()}},{key:"reset",value:function(){this.De.reset()}}]),e}(),Zl=function(){function e(t,n,r,i){p(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return y(e,[{key:"ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function ef(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=tf(e.arrayValue,t.arrayValue))?n:0!==(n=tf(e.directionalValue,t.directionalValue))?n:Fo.comparator(e.documentKey,t.documentKey)}function tf(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var nf=function(){function e(t){p(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];var n,r=m(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.S()?this.Fe=i:this.Oe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return y(e,[{key:"$e",value:function(e){var t=uu(e);if(void 0!==t&&!this.Be(t))return!1;for(var n=su(e),r=0,i=0;r<n.length&&this.Be(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Fe){var a=n[r];if(!this.Le(this.Fe,a)||!this.Ue(this.Me[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Me.length||!this.Ue(this.Me[i++],o))return!1}return!0}},{key:"Be",value:function(e){var t,n=m(this.Oe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Le(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"Le",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Ue",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),rf=function(){function e(){p(this,e),this.qe=new af}return y(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.qe.add(t),pl.resolve()}},{key:"getCollectionParents",value:function(e,t){return pl.resolve(this.qe.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return pl.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return pl.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return pl.resolve(null)}},{key:"getFieldIndex",value:function(e,t){return pl.resolve(null)}},{key:"getFieldIndexes",value:function(e,t){return pl.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return pl.resolve(null)}},{key:"updateCollectionGroup",value:function(e,t,n){return pl.resolve()}},{key:"updateIndexEntries",value:function(e,t){return pl.resolve()}}]),e}(),af=function(){function e(){p(this,e),this.index={}}return y(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new js(bo.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new js(bo.comparator)).toArray()}}]),e}(),of=new Uint8Array(0),uf=function(){function e(t){p(this,e),this.user=t,this.Ge=new af,this.Ke=new Ms((function(e){return mu(e)}),(function(e,t){return gu(e,t)})),this.uid=t.uid||""}return y(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ge.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ge.add(t)}));var a={collectionId:r,parent:jc(i)};return sf(e).put(a)}return pl.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[ho(t),""],!1,!0);return sf(e).qt(r).next((function(e){var r,i=m(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Bc(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=lf(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=lf(e),r=ff(e),i=cf(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=cf(e),i=!0,a=new Map;return pl.forEach(this.Qe(t),(function(t){return n.getFieldIndex(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Ys();return pl.forEach(a,(function(i,a){var o;Ba("IndexedDbIndexManager","Using index ".concat((o=i,"id=".concat(o.indexId,"|cg=").concat(o.collectionGroup,"|f=").concat(o.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(mu(t)));var u=function(e,t){var n=uu(t);if(void 0===n)return null;var r,i=m(bu(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),s=function(e,t){var n,r=new Map,i=m(su(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=m(bu(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r,i=[],a=!0,o=m(su(t));try{for(o.s();!(n=o.n()).done;){var u,s=n.value,c=void 0,l=!0,f=m(bu(e,s.fieldPath));try{for(f.s();!(u=f.n()).done;){var h=u.value,d=void 0,p=!0;switch(h.op){case"<":case"<=":d="nullValue"in(r=h.value)?Uo:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?Ho(Ro.empty(),Fo.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?{mapValue:{}}:Ha();break;case"==":case"in":case">=":d=h.value;break;case">":d=h.value,p=!1;break;case"!=":case"not-in":d=Uo}tu(c,d)===d&&(c=d,l=p)}}catch(g){f.e(g)}finally{f.f()}if(null!==e.startAt)for(var v=0;v<e.orderBy.length;++v)if(e.orderBy[v].field.isEqual(s.fieldPath)){var y=e.startAt.position[v];tu(c,y)===y&&(c=y,l=e.startAt.inclusive);break}if(void 0===c)return null;i.push(c),a&&(a=l)}}catch(g){o.e(g)}finally{o.f()}return new Au(i,a)}(a,i),l=function(e,t){var n,r,i=[],a=!0,o=m(su(t));try{for(o.s();!(n=o.n()).done;){var u,s=n.value,c=void 0,l=!0,f=m(bu(e,s.fieldPath));try{for(f.s();!(u=f.n()).done;){var h=u.value,d=void 0,p=!0;switch(h.op){case">=":case">":d="nullValue"in(r=h.value)?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?Ho(Ro.empty(),Fo.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?{mapValue:{}}:"mapValue"in r?Vo:Ha(),p=!1;break;case"==":case"in":case"<=":d=h.value;break;case"<":d=h.value,p=!1;break;case"!=":case"not-in":d=Vo}nu(c,d)===d&&(c=d,l=p)}}catch(g){f.e(g)}finally{f.f()}if(null!==e.endAt)for(var v=0;v<e.orderBy.length;++v)if(e.orderBy[v].field.isEqual(s.fieldPath)){var y=e.endAt.position[v];nu(c,y)===y&&(c=y,l=e.endAt.inclusive);break}if(void 0===c)return null;i.push(c),a&&(a=l)}}catch(g){o.e(g)}finally{o.f()}return new Au(i,a)}(a,i),f=n.je(i,a,c),h=n.je(i,a,l),d=n.We(i,a,s),p=n.ze(i.indexId,u,f,!!c&&c.inclusive,h,!!l&&l.inclusive,d);return pl.forEach(p,(function(n){return r.Kt(n,t.limit).next((function(t){t.forEach((function(t){e=e.add(new Fo(Bc(t.documentKey)))}))}))}))})).next((function(){return e}))}return pl.resolve(null)}))}},{key:"Qe",value:function(e){var t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}},{key:"ze",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(null!=n?n.length:1,null!=i?i.length:1),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.He(t[s/c]):of,h=n?u.Je(e,f,n[s%c],r):u.Ye(e),d=i?u.Xe(e,f,i[s%c],a):u.Ye(e+1);l.push.apply(l,de(u.createRange(h,d,o.map((function(t){return u.Je(e,f,t,!0)})))))},h=0;h<s;++h)f(h);return l}},{key:"Je",value:function(e,t,n,r){var i=new Zl(e,Fo.empty(),t,n);return r?i:i.ke()}},{key:"Xe",value:function(e,t,n,r){var i=new Zl(e,Fo.empty(),t,n);return r?i.ke():i}},{key:"Ye",value:function(e){return new Zl(e,Fo.empty(),of,of)}},{key:"getFieldIndex",value:function(e,t){var n=new nf(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t=e.filter((function(e){return n.$e(e)}));return t.sort((function(e,t){return t.fields.length-e.fields.length})),t.length>0?t[0]:null}))}},{key:"Ze",value:function(e,t){var n,r=new Xl,i=m(su(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Ne(a.kind);Wl.fe.Zt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Se()}},{key:"He",value:function(e){var t=new Xl;return Wl.fe.Zt(e,t.Ne(0)),t.Se()}},{key:"We",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Xl);var i,a=0,o=m(su(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=m(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.tn(t,s.fieldPath)&&$o(c))r=this.en(r,s,c);else{var h=f.Ne(s.kind);Wl.fe.Zt(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.nn(r)}},{key:"je",value:function(e,t,n){return null==n?null:this.We(e,t,n.position)}},{key:"nn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Se();return t}},{key:"en",value:function(e,t,n){var r,i=de(e),a=[],o=m(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=m(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new Xl;f.seed(l.Se()),Wl.fe.Zt(s,f.Ne(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"tn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof wu&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=lf(e),i=ff(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next((function(e){var t=[];return pl.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new lu(t.sequenceNumber,new du(Ol(t.readTime),new Fo(Bc(t.documentKey)),t.largestBatchId)):lu.empty(),r=e.fields.map((function(e){var t=l(e,2),n=t[0],r=t[1];return new cu(xo.fromServerFormat(n),r)}));return new ou(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:lo(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=lf(e),a=ff(e);return this.sn(e).next((function(e){return i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return pl.forEach(t,(function(t){return a.put(function(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Rl(r.readTime),documentKey:jc(r.documentKey.path),largestBatchId:r.largestBatchId}}(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return pl.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?pl.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),pl.forEach(a,(function(r){return n.rn(e,t,r).next((function(t){var a=n.on(i,r);return t.isEqual(a)?pl.resolve():n.un(e,i,t,a)}))}))}))}))}},{key:"an",value:function(e,t,n){return cf(e).put({indexId:n.indexId,uid:this.uid,arrayValue:n.arrayValue,directionalValue:n.directionalValue,documentKey:jc(t.key.path)})}},{key:"cn",value:function(e,t,n){return cf(e).delete([n.indexId,this.uid,n.arrayValue,n.directionalValue,jc(t.key.path)])}},{key:"rn",value:function(e,t,n){var r=cf(e),i=new js(ef);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,jc(t.path)])},(function(e,r){i=i.add(new Zl(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"on",value:function(e,t){var n=new js(ef),r=this.Ze(t,e);if(null==r)return n;var i=uu(t);if(null!=i){var a=e.data.field(i.fieldPath);if($o(a)){var o,u=m(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new Zl(t.indexId,e.key,this.He(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new Zl(t.indexId,e.key,of,r));return n}},{key:"un",value:function(e,t,n,r){var i=this;Ba("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var a=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=zs(a),s=zs(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=zs(o)):l?(i(u),u=zs(a)):(u=zs(a),s=zs(o))}}(n,r,ef,(function(n){a.push(i.an(e,t,n))}),(function(n){a.push(i.cn(e,t,n))})),pl.waitFor(a)}},{key:"sn",value:function(e){var t=1;return ff(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return ef(e,t)})).filter((function(e,t,n){return!t||0!==ef(e,n[t-1])}));var r=[];r.push(e);var i,a=m(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=ef(o,e),s=ef(o,t);if(0===u)r[0]=e.ke();else if(u>0&&s<0)r.push(o),r.push(o.ke());else if(s>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,""],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,""]));return c}}]),e}();function sf(e){return El(e,"collectionParents")}function cf(e){return El(e,"indexEntries")}function lf(e){return El(e,"indexConfiguration")}function ff(e){return El(e,"indexState")}var hf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},df=function(){function e(t,n,r){p(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return y(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function pf(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Wt({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Qa(1===u)})));var c,l=[],f=m(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Wc(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return pl.waitFor(a).next((function(){return l}))}function vf(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Ha();t=e.noDocument}return JSON.stringify(t).length}df.DEFAULT_COLLECTION_PERCENTILE=10,df.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,df.DEFAULT=new df(41943040,df.DEFAULT_COLLECTION_PERCENTILE,df.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),df.DISABLED=new df(-1,0,0);var yf=function(){function e(t,n,r,i){p(this,e),this.userId=t,this.M=n,this.indexManager=r,this.referenceDelegate=i,this.hn={}}return y(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return gf(e).Wt({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=kf(e),o=gf(e);return o.add({}).next((function(u){Qa("number"==typeof u);var s,c=new Sl(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Sc(e.Jt,t)})),i=n.mutations.map((function(t){return Sc(e.Jt,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.M,i.userId,c),f=[],h=new js((function(e,t){return lo(e.canonicalString(),t.canonicalString())})),d=m(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=Wc(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,Hc))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.hn[u]=c.keys()})),pl.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return gf(e).get(t).next((function(e){return e?(Qa(e.userId===n.userId),Ll(n.M,e)):null}))}},{key:"ln",value:function(e,t){var n=this;return this.hn[t]?pl.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.hn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return gf(e).Wt({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Qa(t.batchId>=r),a=Ll(n.M,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return gf(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return gf(e).qt("userMutationsIndex",n).next((function(e){return e.map((function(e){return Ll(t.M,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Kc(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return kf(e).Wt({range:i},(function(r,i,o){var u=l(r,3),s=u[0],c=u[1],f=u[2],h=Bc(c);if(s===n.userId&&t.path.isEqual(h))return gf(e).get(f).next((function(e){if(!e)throw Ha();Qa(e.userId===n.userId),a.push(Ll(n.M,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new js(lo),i=[];return t.forEach((function(t){var a=Kc(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=kf(e).Wt({range:o},(function(e,i,a){var o=l(e,3),u=o[0],s=o[1],c=o[2],f=Bc(s);u===n.userId&&t.path.isEqual(f)?r=r.add(c):a.done()}));i.push(u)})),pl.waitFor(i).next((function(){return n.fn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Kc(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new js(lo);return kf(e).Wt({range:o},(function(e,t,a){var o=l(e,3),s=o[0],c=o[1],f=o[2],h=Bc(c);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.fn(e,u)}))}},{key:"fn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(gf(e).get(t).next((function(e){if(null===e)throw Ha();Qa(e.userId===n.userId),r.push(Ll(n.M,e))})))})),pl.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return pf(e.Ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.dn(t.batchId)})),pl.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"dn",value:function(e){delete this.hn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return pl.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return kf(e).Wt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Bc(e[1]);i.push(a)}else r.done()})).next((function(){Qa(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return mf(e,this.userId,t)}},{key:"_n",value:function(e){var t=this;return bf(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"Yt",value:function(t,n,r,i){return Qa(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function mf(e,t,n){var r=Kc(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return kf(e).Wt({range:a,jt:!0},(function(e,n,r){var a=l(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function gf(e){return El(e,"mutations")}function kf(e){return El(e,"documentMutations")}function bf(e){return El(e,"mutationQueues")}var wf=function(){function e(t){p(this,e),this.wn=t}return y(e,[{key:"next",value:function(){return this.wn+=2,this.wn}}],[{key:"mn",value:function(){return new e(0)}},{key:"gn",value:function(){return new e(-1)}}]),e}(),xf=function(){function e(t,n){p(this,e),this.referenceDelegate=t,this.M=n}return y(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.yn(e).next((function(n){var r=new wf(n.highestTargetId);return n.highestTargetId=r.next(),t.pn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.yn(e).next((function(e){return vo.fromTimestamp(new po(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.yn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.yn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.pn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.In(e,t).next((function(){return n.yn(e).next((function(r){return r.targetCount+=1,n.Tn(t,r),n.pn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.In(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return _f(e).delete(t.targetId)})).next((function(){return n.yn(e)})).next((function(t){return Qa(t.targetCount>0),t.targetCount-=1,n.pn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return _f(e).Wt((function(o,u){var s=Ml(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return pl.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return _f(e).Wt((function(e,n){var r=Ml(n);t(r)}))}},{key:"yn",value:function(e){return If(e).get("targetGlobalKey").next((function(e){return Qa(null!==e),e}))}},{key:"pn",value:function(e,t){return If(e).put("targetGlobalKey",t)}},{key:"In",value:function(e,t){return _f(e).put(Fl(this.M,t))}},{key:"Tn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.yn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=mu(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return _f(e).Wt({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Ml(n);gu(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Ef(e);return t.forEach((function(t){var o=jc(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),pl.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Ef(e);return pl.forEach(t,(function(t){var a=jc(t.path);return pl.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Ef(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Ef(e),i=Ys();return r.Wt({range:n,jt:!0},(function(e,t,n){var r=Bc(e[1]),a=new Fo(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=jc(t.path),r=IDBKeyRange.bound([n],[ho(n)],!1,!0),i=0;return Ef(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},(function(e,t,n){var r=l(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return _f(e).get(t).next((function(e){return e?Ml(e):null}))}}]),e}();function _f(e){return El(e,"targets")}function If(e){return El(e,"targetGlobal")}function Ef(e){return El(e,"targetDocuments")}function Sf(e){return Tf.apply(this,arguments)}function Tf(){return Tf=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Ya.FAILED_PRECONDITION&&t.message===hl){e.next=2;break}throw t;case 2:Ba("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Tf.apply(this,arguments)}function Cf(e,t){var n=l(e,2),r=n[0],i=n[1],a=l(t,2),o=a[0],u=a[1],s=lo(r,o);return 0===s?lo(i,u):s}var Nf=function(){function e(t){p(this,e),this.En=t,this.buffer=new js(Cf),this.An=0}return y(e,[{key:"Rn",value:function(){return++this.An}},{key:"bn",value:function(e){var t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Cf(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Af=function(){function e(t,n){p(this,e),this.garbageCollector=t,this.asyncQueue=n,this.Pn=!1,this.Vn=null}return y(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}},{key:"stop",value:function(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}},{key:"started",get:function(){return null!==this.Vn}},{key:"vn",value:function(e){var t=this,n=this.Pn?3e5:6e4;Ba("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,a(h().mark((function n(){return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.Vn=null,t.Pn=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!kl(n.t0)){n.next=12;break}Ba("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,Sf(n.t0);case 14:return n.next=16,t.vn(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),Df=function(){function e(t,n){p(this,e),this.Sn=t,this.params=n}return y(e,[{key:"calculateTargetCount",value:function(e,t){return this.Sn.Dn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return pl.resolve(uo.A);var r=new Nf(t);return this.Sn.forEachTarget(e,(function(e){return r.bn(e.sequenceNumber)})).next((function(){return n.Sn.Cn(e,(function(e){return r.bn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Sn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Sn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Ba("LruGarbageCollector","Garbage collection skipped; disabled"),pl.resolve(hf)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Ba("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),hf):n.xn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Sn.getCacheSize(e)}},{key:"xn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Ba("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),za()<=ge.DEBUG&&Ba("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),pl.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),Pf=function(){function e(t,n){p(this,e),this.db=t,this.garbageCollector=function(e,t){return new Df(e,t)}(this,n)}return y(e,[{key:"Dn",value:function(e){var t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Nn",value:function(e){var t=0;return this.Cn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Cn",value:function(e,t){return this.kn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Rf(e,n)}},{key:"removeReference",value:function(e,t,n){return Rf(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Rf(e,t)}},{key:"Mn",value:function(e,t){return function(e,t){var n=!1;return bf(e).zt((function(r){return mf(e,r,t).next((function(e){return e&&(n=!0),pl.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.kn(e,(function(o,u){if(u<=t){var s=n.Mn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,vo.min()),Ef(e).delete([0,jc(o.path)])}))}));i.push(s)}})).next((function(){return pl.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Rf(e,t)}},{key:"kn",value:function(e,t){var n,r=Ef(e),i=uo.A;return r.Wt({index:"documentTargetsIndex"},(function(e,r){var a=l(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==uo.A&&t(new Fo(Bc(n)),i),i=s,n=u):i=uo.A})).next((function(){i!==uo.A&&t(new Fo(Bc(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Rf(e,t){return Ef(e).put(function(e,t){return{targetId:0,path:jc(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Of=function(){function e(){p(this,e),this.changes=new Ms((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return y(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,au.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?pl.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Lf=function(){function e(t){p(this,e),this.M=t}return y(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Vf(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Vf(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Pl(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.On(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=au.newInvalidDocument(t);return Vf(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Uf(t))},(function(e,i){r=n.Fn(t,i)})).next((function(){return r}))}},{key:"$n",value:function(e,t){var n=this,r={size:0,document:au.newInvalidDocument(t)};return Vf(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Uf(t))},(function(e,i){r={document:n.Fn(t,i),size:vf(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Gs();return this.Bn(e,t,(function(e,t){var i=n.Fn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Ln",value:function(e,t){var n=this,r=Gs(),i=new Fs(Fo.comparator);return this.Bn(e,t,(function(e,t){var a=n.Fn(e,t);r=r.insert(e,a),i=i.insert(e,vf(t))})).next((function(){return{documents:r,Un:i}}))}},{key:"Bn",value:function(e,t,n){if(t.isEmpty())return pl.resolve();var r=new js(qf);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Uf(r.first()),Uf(r.last())),a=r.getIterator(),o=a.getNext();return Vf(e).Wt({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Fo.fromSegments([].concat(de(t.prefixPath),[t.collectionGroup,t.documentId]));o&&qf(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.Ut(Uf(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),Pl(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Vf(e).qt(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=Gs(),i=m(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.Fn(Fo.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Gs(),o=jf(t,n),u=jf(t,du.max());return Vf(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.Fn(Fo.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Mf(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Ff(e).get("remoteDocumentGlobalKey").next((function(e){return Qa(!!e),e}))}},{key:"On",value:function(e,t){return Ff(e).put("remoteDocumentGlobalKey",t)}},{key:"Fn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Ic(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Fo.fromSegments(t.noDocument.path),i=Ol(t.noDocument.readTime);n=au.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Ha();var a=Fo.fromSegments(t.unknownDocument.path),o=Ol(t.unknownDocument.version);n=au.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new po(e[0],e[1]);return vo.fromTimestamp(t)}(t.readTime)),n}(this.M,t);if(!n.isNoDocument()||!n.version.isEqual(vo.min()))return n}return au.newInvalidDocument(e)}}]),e}(),Mf=function(e){b(n,e);var t=E(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).qn=e,i.trackRemovals=r,i.Gn=new Ms((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return y(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new js((function(e,t){return lo(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Gn.get(a);if(n.push(t.qn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=Dl(t.qn.M,o);i=i.add(a.path.popLast());var c=vf(s);r+=c-u.size,n.push(t.qn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=Dl(t.qn.M,o.convertToNoDocument(vo.min()));n.push(t.qn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.qn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.qn.updateMetadata(e,r)),pl.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.qn.$n(e,t).next((function(e){return n.Gn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.qn.Ln(e,t).next((function(e){var t=e.documents;return e.Un.forEach((function(e,r){n.Gn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Of);function Ff(e){return El(e,"remoteDocumentGlobal")}function Vf(e){return El(e,"remoteDocumentsV14")}function Uf(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function jf(e,t){var n=t.documentKey.path.toArray();return[e,Pl(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function qf(e,t){var n=e.path.length-t.path.length;return 0!==n?n:Fo.comparator(e,t)}var zf=function(){function e(t){p(this,e),this.M=t}return y(e,[{key:"kt",value:function(e,t,n,r){var i=this,a=new vl("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Gc,{unique:!0}),e.createObjectStore("documentMutations")}(e),Bf(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=pl.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Bf(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:vo.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").qt().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Gc,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return pl.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Kn(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Qn(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.jn(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Wn(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.zn(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:al});t.createIndex("collectionPathOverlayIndex",ol,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",ul,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Qc});t.createIndex("documentKeyIndex",$c),t.createIndex("collectionGroupIndex",Yc)}(e)})).next((function(){return i.Hn(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:tl}).createIndex("sequenceNumberIndex",nl,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:rl}).createIndex("documentKeyIndex",il,{unique:!1})}(e)}))),o}},{key:"Qn",value:function(e){var t=0;return e.store("remoteDocuments").Wt((function(e,n){t+=vf(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Kn",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.qt().next((function(n){return pl.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",i).next((function(r){return pl.forEach(r,(function(r){Qa(r.userId===n.userId);var i=Ll(t.M,r);return pf(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"jn",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Wt((function(n,i){var a=new bo(n),o=function(e){return[0,jc(e)]}(a);r.push(t.get(o).next((function(n){return n?pl.resolve():function(n){return t.put({targetId:0,path:jc(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return pl.waitFor(r)}))}))}},{key:"Wn",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:el});var n=t.store("collectionParents"),r=new af,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:jc(i)})}};return t.store("remoteDocuments").Wt({jt:!0},(function(e,t){var n=new bo(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Wt({jt:!0},(function(e,t){var n=l(e,3),r=(n[0],n[1]),a=(n[2],Bc(r));return i(a.popLast())}))}))}},{key:"zn",value:function(e){var t=this,n=e.store("targets");return n.Wt((function(e,r){var i=Ml(r),a=Fl(t.M,i);return n.put(a)}))}},{key:"Hn",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Wt((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Fo(bo.fromString(i.document.name).popFirst(5)):i.noDocument?Fo.fromSegments(i.noDocument.path):i.unknownDocument?Fo.fromSegments(i.unknownDocument.path):Ha()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return pl.waitFor(r)}))}}]),e}();function Bf(e){e.createObjectStore("targetDocuments",{keyPath:Xc}).createIndex("documentTargetsIndex",Zc,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Jc,{unique:!0}),e.createObjectStore("targetGlobal")}var Gf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Kf=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:13;if(p(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Jn=a,this.window=o,this.document=u,this.Yn=c,this.Xn=l,this.Zn=f,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=function(e){return Promise.resolve()},!e.vt())throw new Ja(Ya.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Pf(this,i),this.cs=n+"main",this.M=new Al(s),this.hs=new yl(this.cs,this.Zn,new zf(this.M)),this.ls=new xf(this.referenceDelegate,this.M),this.fs=function(e){return new Lf(e)}(this.M),this.ds=new ql,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===l&&Ga("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return y(e,[{key:"start",value:function(){var e=this;return this.ws().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Ja(Ya.FAILED_PRECONDITION,Gf);return e.gs(),e.ys(),e.ps(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.ls.getHighestSequenceNumber(t)}))})).then((function(t){e.ts=new uo(t,e.Yn)})).then((function(){e.es=!0})).catch((function(t){return e.hs&&e.hs.close(),Promise.reject(t)}))}},{key:"Is",value:function(e){var t=this;return this.us=function(){var n=a(h().mark((function n(r){return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.hs.Ot(function(){var t=a(h().mark((function t(n){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget(a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ws();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ws",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Hf(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Ts(t).next((function(t){t||(e.isPrimary=!1,e.Jn.enqueueRetryable((function(){return e.us(!1)})))}))})).next((function(){return e.Es(t)})).next((function(n){return e.isPrimary&&!n?e.As(t).next((function(){return!1})):!!n&&e.Rs(t).next((function(){return!0}))}))})).catch((function(t){if(kl(t))return Ba("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Ba("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Jn.enqueueRetryable((function(){return e.us(t)})),e.isPrimary=t}))}},{key:"Ts",value:function(e){var t=this;return Wf(e).get("owner").next((function(e){return pl.resolve(t.bs(e))}))}},{key:"Ps",value:function(e){return Hf(e).delete(this.clientId)}},{key:"Vs",value:function(){var e=a(h().mark((function e(){var t,n,r,i,a=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.vs(this.os,18e5)){e.next=6;break}return this.os=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=El(e,"clientMetadata");return t.qt().next((function(e){var n=a.Ss(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return pl.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this._s){n=m(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this._s.removeItem(this.Ds(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ps",value:function(){var e=this;this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ws().then((function(){return e.Vs()})).then((function(){return e.ps()}))}))}},{key:"bs",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Es",value:function(e){var t=this;return this.Xn?pl.resolve(!0):Wf(e).get("owner").next((function(n){if(null!==n&&t.vs(n.leaseTimestampMs,5e3)&&!t.Cs(n.ownerId)){if(t.bs(n)&&t.networkEnabled)return!0;if(!t.bs(n)){if(!n.allowTabSynchronization)throw new Ja(Ya.FAILED_PRECONDITION,Gf);return!1}}return!(!t.networkEnabled||!t.inForeground)||Hf(e).qt().next((function(e){return void 0===t.Ss(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Ba("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=a(h().mark((function e(){var t=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.es=!1,this.xs(),this.rs&&(this.rs.cancel(),this.rs=null),this.Ns(),this.ks(),e.next=7,this.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Il(e,uo.A);return t.As(n).next((function(){return t.Ps(n)}))}));case 7:this.hs.close(),this.Ms();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ss",value:function(e,t){var n=this;return e.filter((function(e){return n.vs(e.updateTimeMs,t)&&!n.Cs(e.clientId)}))}},{key:"Os",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Hf(t).qt().next((function(t){return e.Ss(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.es}},{key:"getMutationQueue",value:function(e,t){return yf.Yt(e,this.M,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.ls}},{key:"getRemoteDocumentCache",value:function(){return this.fs}},{key:"getIndexManager",value:function(e){return new uf(e)}},{key:"getDocumentOverlayCache",value:function(e){return Gl.Yt(this.M,e)}},{key:"getBundleCache",value:function(){return this.ds}},{key:"runTransaction",value:function(e,t,n){var r=this;Ba("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=14===(i=this.Zn)?fl:13===i?ll:12===i?cl:11===i?sl:void Ha();return this.hs.runTransaction(e,o,u,(function(i){return a=new Il(i,r.ts?r.ts.next():uo.A),"readwrite-primary"===t?r.Ts(a).next((function(e){return!!e||r.Es(a)})).next((function(t){if(!t)throw Ga("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Jn.enqueueRetryable((function(){return r.us(!1)})),new Ja(Ya.FAILED_PRECONDITION,hl);return n(a)})).next((function(e){return r.Rs(a).next((function(){return e}))})):r.Fs(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Fs",value:function(e){var t=this;return Wf(e).get("owner").next((function(e){if(null!==e&&t.vs(e.leaseTimestampMs,5e3)&&!t.Cs(e.ownerId)&&!t.bs(e)&&!(t.Xn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Ja(Ya.FAILED_PRECONDITION,Gf)}))}},{key:"Rs",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Wf(e).put("owner",t)}},{key:"As",value:function(e){var t=this,n=Wf(e);return n.get("owner").next((function(e){return t.bs(e)?(Ba("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):pl.resolve()}))}},{key:"vs",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Ga("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"gs",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=function(){e.Jn.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ws()}))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ns",value:function(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}},{key:"ys",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=function(){t.xs(),!F()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Jn.enterRestrictedMode(!0),t.Jn.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ns))}},{key:"ks",value:function(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}},{key:"Cs",value:function(e){var t;try{var n=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return Ba("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Ga("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"xs",value:function(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(Vt){Ga("Failed to set zombie client id.",Vt)}}},{key:"Ms",value:function(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(Vt){}}},{key:"Ds",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"vt",value:function(){return yl.vt()}}]),e}();function Wf(e){return El(e,"owner")}function Hf(e){return El(e,"clientMetadata")}function Qf(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var $f=function(){function e(t,n,r){p(this,e),this.fs=t,this.$s=n,this.indexManager=r}return y(e,[{key:"Bs",value:function(e,t){var n=this;return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Ls(e,t,r)}))}},{key:"Ls",value:function(e,t,n){return this.fs.getEntry(e,t).next((function(e){var t,r=m(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"Us",value:function(e,t){e.forEach((function(e,n){var r,i=m(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"qs",value:function(e,t){var n=this;return this.fs.getEntries(e,t).next((function(t){return n.Gs(e,t).next((function(){return t}))}))}},{key:"Gs",value:function(e,t){var n=this;return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.Us(t,e)}))}},{key:"Ks",value:function(e,t,n){return function(e){return Fo.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Qs(e,t.path):zu(t)?this.js(e,t,n):this.Ws(e,t,n)}},{key:"Qs",value:function(e,t){return this.Bs(e,new Fo(t)).next((function(e){var t=Ws();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"js",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Ws();return this.indexManager.getCollectionParents(e,i).next((function(o){return pl.forEach(o,(function(o){var u=function(e,t){return new Lu(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.Ws(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"Ws",value:function(e,t,n){var r,i=this;return this.fs.getAllFromCollection(e,t.path,n).next((function(n){return r=n,i.$s.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){var t,n=m(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=m(a.mutations);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=u.key,c=r.get(s);null==c&&(c=au.newInvalidDocument(s),r=r.insert(s,c)),bs(u,c,a.localWriteTime),c.isFoundDocument()||(r=r.remove(s))}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}})).next((function(){return r.forEach((function(e,n){$u(t,n)||(r=r.remove(e))})),r}))}}]),e}(),Yf=function(){function e(t,n,r,i){p(this,e),this.targetId=t,this.fromCache=n,this.zs=r,this.Hs=i}return y(e,null,[{key:"Js",value:function(t,n){var r,i=Ys(),a=Ys(),o=m(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Jf=function(){function e(){p(this,e)}return y(e,[{key:"Ys",value:function(e){this.Xs=e}},{key:"Ks",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(vo.min())?this.Zs(e,t):this.Xs.qs(e,r).next((function(a){var o=i.ti(t,a);return(Vu(t)||Uu(t))&&i.ei(t.limitType,o,r,n)?i.Zs(e,t):(za()<=ge.DEBUG&&Ba("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Qu(t)),i.Xs.Ks(e,t,fu(n,-1)).next((function(e){return o.forEach((function(t){e=e.insert(t.key,t)})),e})))}))}},{key:"ti",value:function(e,t){var n=new js(Ju(e));return t.forEach((function(t,r){$u(e,r)&&(n=n.add(r))})),n}},{key:"ei",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Zs",value:function(e,t){return za()<=ge.DEBUG&&Ba("QueryEngine","Using full collection scan to execute query:",Qu(t)),this.Xs.Ks(e,t,du.min())}}]),e}(),Xf=function(){function e(t,n,r,i){p(this,e),this.persistence=t,this.ni=n,this.M=i,this.si=new Fs(lo),this.ii=new Ms((function(e){return mu(e)}),gu),this.ri=new Map,this.oi=t.getRemoteDocumentCache(),this.ls=t.getTargetCache(),this.ds=t.getBundleCache(),this.ui(r)}return y(e,[{key:"ui",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new $f(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.si)}))}}]),e}();function Zf(e,t,n,r){return new Xf(e,t,n,r)}function eh(e,t){return th.apply(this,arguments)}function th(){return th=a(h().mark((function e(t,n){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$a(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.$s.getAllMutationBatches(e).next((function(i){return t=i,r.ui(n),r.$s.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Ys(),s=m(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=m(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(b){f.e(b)}finally{f.f()}}}catch(b){s.e(b)}finally{s.f()}var d,p=m(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,g=m(v.mutations);try{for(g.s();!(y=g.n()).done;){var k=y.value;u=u.add(k.key)}}catch(b){g.e(b)}finally{g.f()}}}catch(b){p.e(b)}finally{p.f()}return r.ai.qs(e,u).next((function(e){return{ci:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),th.apply(this,arguments)}function nh(e,t){var n=$a(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.oi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=pl.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Qa(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.$s.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.$s.performConsistencyCheck(e)})).next((function(){return n.ai.qs(e,r)}))}))}function rh(e){var t=$a(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.ls.getLastRemoteSnapshotVersion(e)}))}function ih(e,t){var n=$a(e),r=t.snapshotVersion,i=n.si;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.oi.newChangeBuffer({trackRemovals:!0});i=n.si;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.ls.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.ls.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(Io.EMPTY_BYTE_STRING,vo.min()).withLastLimboFreeSnapshotVersion(vo.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.ls.updateTargetData(e,c))}}));var u=Gs();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(ah(e,a,t.documentUpdates).next((function(e){u=e}))),!r.isEqual(vo.min())){var s=n.ls.getLastRemoteSnapshotVersion(e).next((function(t){return n.ls.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(s)}return pl.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.ai.Gs(e,u)})).next((function(){return u}))})).then((function(e){return n.si=i,e}))}function ah(e,t,n){var r=Ys();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Gs();return n.forEach((function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual(vo.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):Ba("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),r}))}function oh(e,t){var n=$a(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.$s.getNextMutationBatchAfterBatchId(e,t)}))}function uh(e,t){var n=$a(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.ls.getTargetData(e,t).next((function(i){return i?(r=i,pl.resolve(r)):n.ls.allocateTargetId(e).next((function(i){return r=new Nl(t,i,0,e.currentSequenceNumber),n.ls.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.si.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.si=n.si.insert(e.targetId,e),n.ii.set(t,e.targetId)),e}))}function sh(e,t,n){return ch.apply(this,arguments)}function ch(){return ch=a(h().mark((function e(t,n,r){var i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=$a(t),a=i.si.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),kl(e.t1)){e.next=12;break}throw e.t1;case 12:Ba("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.si=i.si.remove(n),i.ii.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),ch.apply(this,arguments)}function lh(e,t,n){var r=$a(e),i=vo.min(),a=Ys();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=$a(e),i=r.ii.get(n);return void 0!==i?pl.resolve(r.si.get(i)):r.ls.getTargetData(t,n)}(r,e,Gu(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.ls.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.ni.Ks(e,t,n?i:vo.min(),n?a:Ys())})).next((function(e){return dh(r,Yu(t),e),{documents:e,hi:a}}))}))}function fh(e,t){var n=$a(e),r=$a(n.ls),i=n.si.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function hh(e,t){var n=$a(e),r=n.ri.get(t)||vo.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.oi.getAllFromCollectionGroup(e,t,fu(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return dh(n,t,e),e}))}function dh(e,t,n){var r=vo.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ri.set(t,r)}function ph(e,t,n,r){return vh.apply(this,arguments)}function vh(){return vh=a(h().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,d,p,v;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=$a(t),o=Ys(),u=Gs(),s=m(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.li(l.metadata.name),l.document&&(o=o.add(f)),(d=n.fi(l)).setReadTime(n.di(l.metadata.readTime)),u=u.insert(f,d)}catch(h){s.e(h)}finally{s.f()}return p=a.oi.newChangeBuffer({trackRemovals:!0}),e.next=7,uh(a,function(e){return Gu(Fu(bo.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return v=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return ah(e,p,u).next((function(t){return p.apply(e),t})).next((function(t){return a.ls.removeMatchingKeysForTargetId(e,v.targetId).next((function(){return a.ls.addMatchingKeys(e,o,v.targetId)})).next((function(){return a.ai.Gs(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),vh.apply(this,arguments)}function yh(e,t){return mh.apply(this,arguments)}function mh(){return mh=a(h().mark((function e(t,n){var r,i,a,o=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Ys(),e.next=3,uh(t,Gu(Vl(n.bundledQuery)));case 3:return i=e.sent,a=$a(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=pc(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.ds.saveNamedQuery(e,n);var o=i.withResumeToken(Io.EMPTY_BYTE_STRING,t);return a.si=a.si.insert(o.targetId,o),a.ls.updateTargetData(e,o).next((function(){return a.ls.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.ls.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.ds.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),mh.apply(this,arguments)}var gh=function(){function e(t){p(this,e),this.M=t,this._i=new Map,this.wi=new Map}return y(e,[{key:"getBundleMetadata",value:function(e,t){return pl.resolve(this._i.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this._i.set(t.id,{id:(n=t).id,version:n.version,createTime:pc(n.createTime)}),pl.resolve()}},{key:"getNamedQuery",value:function(e,t){return pl.resolve(this.wi.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.wi.set(t.name,function(e){return{name:e.name,query:Vl(e.bundledQuery),readTime:pc(e.readTime)}}(t)),pl.resolve()}}]),e}(),kh=function(){function e(){p(this,e),this.overlays=new Fs(Fo.comparator),this.mi=new Map}return y(e,[{key:"getOverlay",value:function(e,t){return pl.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.Xt(e,t,i)})),pl.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.mi.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.mi.delete(n)),pl.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Hs(),i=t.length+1,a=new Fo(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return pl.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Fs((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=Hs(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=Hs(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return pl.resolve(s)}},{key:"Xt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);if(null!==r){var i=this.mi.get(r.largestBatchId).delete(n.key);this.mi.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Cl(t,n));var a=this.mi.get(t);void 0===a&&(a=Ys(),this.mi.set(t,a)),this.mi.set(t,a.add(n.key))}}}]),e}(),bh=function(){function e(){p(this,e),this.gi=new js(wh.yi),this.pi=new js(wh.Ii)}return y(e,[{key:"isEmpty",value:function(){return this.gi.isEmpty()}},{key:"addReference",value:function(e,t){var n=new wh(e,t);this.gi=this.gi.add(n),this.pi=this.pi.add(n)}},{key:"Ti",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Ei(new wh(e,t))}},{key:"Ai",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Ri",value:function(e){var t=this,n=new Fo(new bo([])),r=new wh(n,e),i=new wh(n,e+1),a=[];return this.pi.forEachInRange([r,i],(function(e){t.Ei(e),a.push(e.key)})),a}},{key:"bi",value:function(){var e=this;this.gi.forEach((function(t){return e.Ei(t)}))}},{key:"Ei",value:function(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}},{key:"Pi",value:function(e){var t=new Fo(new bo([])),n=new wh(t,e),r=new wh(t,e+1),i=Ys();return this.pi.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new wh(e,0),n=this.gi.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),wh=function(){function e(t,n){p(this,e),this.key=t,this.Vi=n}return y(e,null,[{key:"yi",value:function(e,t){return Fo.comparator(e.key,t.key)||lo(e.Vi,t.Vi)}},{key:"Ii",value:function(e,t){return lo(e.Vi,t.Vi)||Fo.comparator(e.key,t.key)}}]),e}(),xh=function(){function e(t,n){p(this,e),this.indexManager=t,this.referenceDelegate=n,this.$s=[],this.vi=1,this.Si=new js(wh.yi)}return y(e,[{key:"checkEmpty",value:function(e){return pl.resolve(0===this.$s.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.vi;this.vi++,this.$s.length>0&&this.$s[this.$s.length-1];var a=new Sl(i,t,n,r);this.$s.push(a);var o,u=m(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Si=this.Si.add(new wh(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return pl.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return pl.resolve(this.Di(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Ci(n),i=r<0?0:r;return pl.resolve(this.$s.length>i?this.$s[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return pl.resolve(0===this.$s.length?-1:this.vi-1)}},{key:"getAllMutationBatches",value:function(e){return pl.resolve(this.$s.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new wh(t,0),i=new wh(t,Number.POSITIVE_INFINITY),a=[];return this.Si.forEachInRange([r,i],(function(e){var t=n.Di(e.Vi);a.push(t)})),pl.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new js(lo);return t.forEach((function(e){var t=new wh(e,0),i=new wh(e,Number.POSITIVE_INFINITY);n.Si.forEachInRange([t,i],(function(e){r=r.add(e.Vi)}))})),pl.resolve(this.xi(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Fo.isDocumentKey(i)||(i=i.child(""));var a=new wh(new Fo(i),0),o=new js(lo);return this.Si.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Vi)),!0)}),a),pl.resolve(this.xi(o))}},{key:"xi",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Di(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Qa(0===this.Ni(t.batchId,"removed")),this.$s.shift();var r=this.Si;return pl.forEach(t.mutations,(function(i){var a=new wh(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Si=r}))}},{key:"dn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new wh(t,0),r=this.Si.firstAfterOrEqual(n);return pl.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.$s.length,pl.resolve()}},{key:"Ni",value:function(e,t){return this.Ci(e)}},{key:"Ci",value:function(e){return 0===this.$s.length?0:e-this.$s[0].batchId}},{key:"Di",value:function(e){var t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}]),e}(),_h=function(){function e(t){p(this,e),this.ki=t,this.docs=new Fs(Fo.comparator),this.size=0}return y(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ki(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return pl.resolve(n?n.document.mutableCopy():au.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Gs();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():au.newInvalidDocument(e))})),pl.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=Gs(),i=new Fo(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||pu(hu(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return pl.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Ha()}},{key:"Mi",value:function(e,t){return pl.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Ih(this)}},{key:"getSize",value:function(e){return pl.resolve(this.size)}}]),e}(),Ih=function(e){b(n,e);var t=E(n);function n(e){var r;return p(this,n),(r=t.call(this)).qn=e,r}return y(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.qn.addEntry(e,i)):t.qn.removeEntry(r)})),pl.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.qn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.qn.getEntries(e,t)}}]),n}(Of),Eh=function(){function e(t){p(this,e),this.persistence=t,this.Oi=new Ms((function(e){return mu(e)}),gu),this.lastRemoteSnapshotVersion=vo.min(),this.highestTargetId=0,this.Fi=0,this.$i=new bh,this.targetCount=0,this.Bi=wf.mn()}return y(e,[{key:"forEachTarget",value:function(e,t){return this.Oi.forEach((function(e,n){return t(n)})),pl.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return pl.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return pl.resolve(this.Fi)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Bi.next(),pl.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Fi&&(this.Fi=t),pl.resolve()}},{key:"In",value:function(e){this.Oi.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Bi=new wf(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.In(t),this.targetCount+=1,pl.resolve()}},{key:"updateTargetData",value:function(e,t){return this.In(t),pl.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,pl.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Oi.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Oi.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),pl.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return pl.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Oi.get(t)||null;return pl.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.$i.Ti(t,n),pl.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.$i.Ai(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),pl.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.$i.Ri(t),pl.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.$i.Pi(t);return pl.resolve(n)}},{key:"containsKey",value:function(e,t){return pl.resolve(this.$i.containsKey(t))}}]),e}(),Sh=function(){function e(t,n){var r=this;p(this,e),this.Li={},this.overlays={},this.ts=new uo(0),this.es=!1,this.es=!0,this.referenceDelegate=t(this),this.ls=new Eh(this),this.indexManager=new rf,this.fs=new _h((function(e){return r.referenceDelegate.Ui(e)})),this.M=new Al(n),this.ds=new gh(this.M)}return y(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.es=!1,Promise.resolve()}},{key:"started",get:function(){return this.es}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new kh,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Li[e.toKey()];return n||(n=new xh(t,this.referenceDelegate),this.Li[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.ls}},{key:"getRemoteDocumentCache",value:function(){return this.fs}},{key:"getBundleCache",value:function(){return this.ds}},{key:"runTransaction",value:function(e,t,n){var r=this;Ba("MemoryPersistence","Starting transaction:",e);var i=new Th(this.ts.next());return this.referenceDelegate.qi(),n(i).next((function(e){return r.referenceDelegate.Gi(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ki",value:function(e,t){return pl.or(Object.values(this.Li).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Th=function(e){b(n,e);var t=E(n);function n(e){var r;return p(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return y(n)}(dl),Ch=function(){function e(t){p(this,e),this.persistence=t,this.Qi=new bh,this.ji=null}return y(e,[{key:"zi",get:function(){if(this.ji)return this.ji;throw Ha()}},{key:"addReference",value:function(e,t,n){return this.Qi.addReference(n,t),this.zi.delete(n.toString()),pl.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Qi.removeReference(n,t),this.zi.add(n.toString()),pl.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.zi.add(t.toString()),pl.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Qi.Ri(t.targetId).forEach((function(e){return n.zi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.zi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"qi",value:function(){this.ji=new Set}},{key:"Gi",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pl.forEach(this.zi,(function(r){var i=Fo.fromPath(r);return t.Hi(e,i).next((function(e){e||n.removeEntry(i,vo.min())}))})).next((function(){return t.ji=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Hi(e,t).next((function(e){e?n.zi.delete(t.toString()):n.zi.add(t.toString())}))}},{key:"Ui",value:function(e){return 0}},{key:"Hi",value:function(e,t){var n=this;return pl.or([function(){return pl.resolve(n.Qi.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ki(e,t)}])}}],[{key:"Wi",value:function(t){return new e(t)}}]),e}();function Nh(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Ah(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Dh(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Ph=function(){function e(t,n,r,i){p(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return y(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Ja(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Ga("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Rh=function(){function e(t,n,r){p(this,e),this.targetId=t,this.state=n,this.error=r}return y(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Ja(i.error.code,i.error.message))),a?new e(t,i.state,r):(Ga("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Oh=function(){function e(t,n){p(this,e),this.clientId=t,this.activeTargetIds=n}return y(e,null,[{key:"Ji",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Xs(),o=0;i&&o<r.activeTargetIds.length;++o)i=Mo(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Ga("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Lh=function(){function e(t,n){p(this,e),this.clientId=t,this.onlineState=n}return y(e,null,[{key:"Ji",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Ga("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Mh=function(){function e(){p(this,e),this.activeTargetIds=Xs()}return y(e,[{key:"Xi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Yi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Fh=function(){function e(t,n,r,i,a){p(this,e),this.window=t,this.Jn=n,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Fs(lo),this.started=!1,this.ir=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=Nh(this.persistenceKey,this.tr),this.ur=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.sr=this.sr.insert(this.tr,new Mh),this.ar=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.cr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.hr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.lr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.dr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.er)}return y(e,[{key:"start",value:function(){var e=a(h().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,d=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Os();case 2:t=e.sent,n=m(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.tr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Nh(this.persistenceKey,i)))&&(o=Oh.Ji(i,a))&&(this.sr=this.sr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this._r(),(u=this.storage.getItem(this.lr))&&(s=this.wr(u))&&this.mr(s),c=m(this.ir);try{for(c.s();!(l=c.n()).done;)f=l.value,this.nr(f)}catch(h){c.e(h)}finally{c.f()}this.ir=[],this.window.addEventListener("pagehide",(function(){return d.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ur,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.gr(this.sr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.sr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.yr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.yr(e,t,n),this.pr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Dh(this.persistenceKey,e));if(n){var r=Rh.Ji(e,n);r&&(t=r.state)}}return this.Ir.Xi(e),this._r(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ir.Zi(e),this._r()}},{key:"isLocalQueryTarget",value:function(e){return this.Ir.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Dh(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Tr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.pr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Er(e)}},{key:"notifyBundleLoaded",value:function(e){this.Ar(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Ba("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Ba("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Ba("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"nr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Ba("SharedClientState","EVENT",n.key,n.newValue),n.key===this.rr)return void Ga("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable(a(h().mark((function e(){var r,i,a,o,u,s,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.ar.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Rr(n.key),e.abrupt("return",t.br(r,null));case 6:if(!(i=t.Pr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.br(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.cr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Vr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.vr(a));case 16:e.next=41;break;case 18:if(!t.hr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Sr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Dr(o));case 23:e.next=41;break;case 25:if(n.key!==t.lr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.wr(n.newValue))){e.next=30;break}return e.abrupt("return",t.mr(u));case 30:e.next=41;break;case 32:if(n.key!==t.ur){e.next=37;break}s=function(e){var t=uo.A;if(null!=e)try{var n=JSON.parse(e);Qa("number"==typeof n),t=n}catch(e){Ga("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==uo.A&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.dr){e.next=41;break}return c=t.Cr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Nr(e)})));case 41:e.next=44;break;case 43:t.ir.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ir",get:function(){return this.sr.get(this.tr)}},{key:"_r",value:function(){this.setItem(this.rr,this.Ir.Yi())}},{key:"yr",value:function(e,t,n){var r=new Ph(this.currentUser,e,t,n),i=Ah(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Yi())}},{key:"pr",value:function(e){var t=Ah(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Er",value:function(e){var t={clientId:this.tr,onlineState:e};this.storage.setItem(this.lr,JSON.stringify(t))}},{key:"Tr",value:function(e,t,n){var r=Dh(this.persistenceKey,e),i=new Rh(e,t,n);this.setItem(r,i.Yi())}},{key:"Ar",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}},{key:"Rr",value:function(e){var t=this.ar.exec(e);return t?t[1]:null}},{key:"Pr",value:function(e,t){var n=this.Rr(e);return Oh.Ji(n,t)}},{key:"Vr",value:function(e,t){var n=this.cr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Ph.Ji(new Ua(i),r,t)}},{key:"Sr",value:function(e,t){var n=this.hr.exec(e),r=Number(n[1]);return Rh.Ji(r,t)}},{key:"wr",value:function(e){return Lh.Ji(e)}},{key:"Cr",value:function(e){return JSON.parse(e)}},{key:"vr",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.kr(t.batchId,t.state,t.error));case 2:Ba("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dr",value:function(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}},{key:"br",value:function(e,t){var n=this,r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Or(o,u).then((function(){n.sr=r}))}},{key:"mr",value:function(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"gr",value:function(e){var t=Xs();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Vh=function(){function e(){p(this,e),this.Fr=new Mh,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return y(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.$r[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Fr.Zi(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.$r[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Fr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Fr=new Mh,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Uh=function(){function e(){p(this,e)}return y(e,[{key:"Br",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),jh=function(){function e(){var t=this;p(this,e),this.Lr=function(){return t.Ur()},this.qr=function(){return t.Gr()},this.Kr=[],this.Qr()}return y(e,[{key:"Br",value:function(e){this.Kr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}},{key:"Qr",value:function(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}},{key:"Ur",value:function(){Ba("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=m(this.Kr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Gr",value:function(){Ba("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=m(this.Kr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),qh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},zh=function(){function e(t){p(this,e),this.jr=t.jr,this.Wr=t.Wr}return y(e,[{key:"zr",value:function(e){this.Hr=e}},{key:"Jr",value:function(e){this.Yr=e}},{key:"onMessage",value:function(e){this.Xr=e}},{key:"close",value:function(){this.Wr()}},{key:"send",value:function(e){this.jr(e)}},{key:"Zr",value:function(){this.Hr()}},{key:"eo",value:function(e){this.Yr(e)}},{key:"no",value:function(e){this.Xr(e)}}]),e}(),Bh=function(e){b(n,e);var t=E(n);function n(e){var r;return p(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return y(n,[{key:"ao",value:function(e,t,n,r){return new Promise((function(i,a){var o=new Fa;o.listenOnce(Pa.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case Da.NO_ERROR:var t=o.getResponseJson();Ba("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Da.TIMEOUT:Ba("Connection",'RPC "'+e+'" timed out'),a(new Ja(Ya.DEADLINE_EXCEEDED,"Request time out"));break;case Da.HTTP_ERROR:var n=o.getStatus();if(Ba("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ya).indexOf(t)>=0?t:Ya.UNKNOWN}(r.status);a(new Ja(u,r.message))}else a(new Ja(Ya.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Ja(Ya.UNAVAILABLE,"Connection failed."));break;default:Ha()}}finally{Ba("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"ho",value:function(e,t,n){var r=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Na(),a=Aa(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new La({})),this.uo(o.initMessageHeaders,t,n),M()||U()||L().indexOf("Electron/")>=0||j()||L().indexOf("MSAppHost/")>=0||V()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");Ba("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new zh({jr:function(e){l?Ba("Connection","Not sending because WebChannel is closed:",e):(c||(Ba("Connection","Opening WebChannel transport."),s.open(),c=!0),Ba("Connection","WebChannel sending:",e),s.send(e))},Wr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,Ma.EventType.OPEN,(function(){l||Ba("Connection","WebChannel transport opened.")})),h(s,Ma.EventType.CLOSE,(function(){l||(l=!0,Ba("Connection","WebChannel transport closed"),f.eo())})),h(s,Ma.EventType.ERROR,(function(e){l||(l=!0,Ka("Connection","WebChannel transport errored:",e),f.eo(new Ja(Ya.UNAVAILABLE,"The operation could not be completed")))})),h(s,Ma.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];Qa(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Ba("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Ns[e];if(void 0!==t)return Ls(t)}(a),u=i.message;void 0===o&&(o=Ya.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.eo(new Ja(o,u)),s.close()}else Ba("Connection","WebChannel received:",n),f.no(n)}})),h(a,Ra.STAT_EVENT,(function(e){e.stat===Oa.PROXY?Ba("Connection","Detected buffering proxy"):e.stat===Oa.NOPROXY&&Ba("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Zr()}),0),f}}]),n}(function(){function e(t){p(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.so=n+"://"+t.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return y(e,[{key:"ro",value:function(e,t,n,r,i){var a=this.oo(e,t);Ba("RestConnection","Sending: ",a,n);var o={};return this.uo(o,r,i),this.ao(e,a,o,n).then((function(e){return Ba("RestConnection","Received: ",e),e}),(function(t){throw Ka("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"co",value:function(e,t,n,r,i){return this.ro(e,t,n,r,i)}},{key:"uo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ja,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"oo",value:function(e,t){var n=qh[e];return"".concat(this.so,"/v1/").concat(t,":").concat(n)}}]),e}());function Gh(){return"undefined"!=typeof window?window:null}function Kh(){return"undefined"!=typeof document?document:null}function Wh(e){return new lc(e,!0)}var Hh=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;p(this,e),this.Jn=t,this.timerId=n,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}return y(e,[{key:"reset",value:function(){this.wo=0}},{key:"po",value:function(){this.wo=this._o}},{key:"Io",value:function(e){var t=this;this.cancel();var n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,n-r);i>0&&Ba("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.wo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.mo=this.Jn.enqueueAfterDelay(this.timerId,i,(function(){return t.yo=Date.now(),e()})),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}},{key:"Eo",value:function(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}},{key:"cancel",value:function(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}},{key:"To",value:function(){return(Math.random()-.5)*this.wo}}]),e}(),Qh=function(){function e(t,n,r,i,a,o,u,s){p(this,e),this.Jn=t,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new Hh(t,n)}return y(e,[{key:"Do",value:function(){return 1===this.state||5===this.state||this.Co()}},{key:"Co",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.xo()}},{key:"stop",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Do(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"No",value:function(){this.state=0,this.So.reset()}},{key:"ko",value:function(){var e=this;this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,(function(){return e.Mo()})))}},{key:"Oo",value:function(e){this.Fo(),this.stream.send(e)}},{key:"Mo",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Co()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}},{key:"$o",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"close",value:function(){var e=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fo(),this.$o(),this.So.cancel(),this.Po++,4!==t?this.So.reset():n&&n.code===Ya.RESOURCE_EXHAUSTED?(Ga(n.toString()),Ga("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):n&&n.code===Ya.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Bo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Jr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=l(t,2),i=r[0],a=r[1];e.Po===n&&e.Uo(i,a)}),(function(n){t((function(){var t=new Ja(Ya.UNKNOWN,"Fetching auth token failed: "+n.message);return e.qo(t)}))}))}},{key:"Uo",value:function(e,t){var n=this,r=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr((function(){r((function(){return n.state=2,n.vo=n.Jn.enqueueAfterDelay(n.Ro,1e4,(function(){return n.Co()&&(n.state=3),Promise.resolve()})),n.listener.zr()}))})),this.stream.Jr((function(e){r((function(){return n.qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"xo",value:function(){var e=this;this.state=5,this.So.Io(a(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"qo",value:function(e){return Ba("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Lo",value:function(e){var t=this;return function(n){t.Jn.enqueueAndForget((function(){return t.Po===e?n():(Ba("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),$h=function(e){b(n,e);var t=E(n);function n(e,r,i,a,o,u){var s;return p(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).M=o,s}return y(n,[{key:"Go",value:function(e,t){return this.bo.ho("Listen",e,t)}},{key:"onMessage",value:function(e){this.So.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ha()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?(Qa(void 0===t||"string"==typeof t),Io.fromBase64String(t||"")):(Qa(void 0===t||t instanceof Uint8Array),Io.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Ya.UNKNOWN:Ls(e.code);return new Ja(t,e.message||"")}(o);n=new rc(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=gc(e,s.document.name),l=pc(s.document.updateTime),f=new ru({mapValue:{fields:s.document.fields}}),h=au.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new tc(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=gc(e,v.document),m=v.readTime?pc(v.readTime):vo.min(),g=au.newNoDocument(y,m),k=v.removedTargetIds||[];n=new tc([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var w=gc(e,b.document),x=b.removedTargetIds||[];n=new tc([],x,w,null)}else{if(!("filter"in t))return Ha();t.filter;var _=t.filter;_.targetId;var I=_.count||0,E=new Rs(I),S=_.targetId;n=new nc(S,E)}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return vo.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?vo.min():t.readTime?pc(t.readTime):vo.min()}(e);return this.listener.Ko(t,n)}},{key:"Qo",value:function(e){var t={};t.database=wc(this.M),t.addTarget=function(e,t){var n,r=t.target;return(n=ku(r)?{documents:Cc(e,r)}:{query:Nc(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=hc(e,t.resumeToken):t.snapshotVersion.compareTo(vo.min())>0&&(n.readTime=fc(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ha()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.M,e);n&&(t.labels=n),this.Oo(t)}},{key:"jo",value:function(e){var t={};t.database=wc(this.M),t.removeTarget=e,this.Oo(t)}}]),n}(Qh),Yh=function(e){b(n,e);var t=E(n);function n(e,r,i,a,o,u){var s;return p(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).M=o,s.Wo=!1,s}return y(n,[{key:"zo",get:function(){return this.Wo}},{key:"start",value:function(){this.Wo=!1,this.lastStreamToken=void 0,_t(w(n.prototype),"start",this).call(this)}},{key:"Bo",value:function(){this.Wo&&this.Ho([])}},{key:"Go",value:function(e,t){return this.bo.ho("Write",e,t)}},{key:"onMessage",value:function(e){if(Qa(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();var t=function(e,t){return e&&e.length>0?(Qa(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?pc(e.updateTime):pc(t);return n.isEqual(vo.min())&&(n=pc(t)),new vs(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=pc(e.commitTime);return this.listener.Jo(n,t)}return Qa(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}},{key:"Xo",value:function(){var e={};e.database=wc(this.M),this.Oo(e)}},{key:"Ho",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Sc(t.M,e)}))};this.Oo(n)}}]),n}(Qh),Jh=function(e){b(n,e);var t=E(n);function n(e,r,i,a){var o;return p(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.bo=i,o.M=a,o.Zo=!1,o}return y(n,[{key:"tu",value:function(){if(this.Zo)throw new Ja(Ya.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ro",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=l(i,2),o=a[0],u=a[1];return r.bo.ro(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Ya.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Ja(Ya.UNKNOWN,e.toString())}))}},{key:"co",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=l(i,2),o=a[0],u=a[1];return r.bo.co(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Ya.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Ja(Ya.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Zo=!0}}]),n}(function(){return y((function e(){p(this,e)}))}()),Xh=function(){function e(t,n){p(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}return y(e,[{key:"iu",value:function(){var e=this;0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.nu=null,e.ou("Backend didn't respond within 10 seconds."),e.ru("Offline"),Promise.resolve()})))}},{key:"uu",value:function(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ru("Offline")))}},{key:"set",value:function(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}},{key:"ru",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"ou",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.su?(Ga(t),this.su=!1):Ba("OnlineStateTracker",t)}},{key:"au",value:function(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}]),e}(),Zh=y((function e(t,n,r,i,o){var u=this;p(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=o,this.du.Br((function(e){r.enqueueAndForget(a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=ld(u),!e.t0){e.next=5;break}return Ba("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=$a(t)).lu.add(4),e.next=4,nd(n);case 4:return n._u.set("Unknown"),n.lu.delete(4),e.next=8,ed(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(u);case 5:case"end":return e.stop()}}),e)}))))})),this._u=new Xh(r,i)}));function ed(e){return td.apply(this,arguments)}function td(){return td=a(h().mark((function e(t){var n,r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ld(t)){e.next=18;break}n=m(t.fu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),td.apply(this,arguments)}function nd(e){return rd.apply(this,arguments)}function rd(){return rd=a(h().mark((function e(t){var n,r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=m(t.fu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),rd.apply(this,arguments)}function id(e,t){var n=$a(e);n.hu.has(t.targetId)||(n.hu.set(t.targetId,t),cd(n)?sd(n):Ud(n).Co()&&od(n,t))}function ad(e,t){var n=$a(e),r=Ud(n);n.hu.delete(t),r.Co()&&ud(n,t),0===n.hu.size&&(r.Co()?r.ko():ld(n)&&n._u.set("Unknown"))}function od(e,t){e.wu.Z(t.targetId),Ud(e).Qo(t)}function ud(e,t){e.wu.Z(t),Ud(e).jo(t)}function sd(e){e.wu=new ac({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e.hu.get(t)||null}}),Ud(e).start(),e._u.iu()}function cd(e){return ld(e)&&!Ud(e).Do()&&e.hu.size>0}function ld(e){return 0===$a(e).lu.size}function fd(e){e.wu=void 0}function hd(e){return dd.apply(this,arguments)}function dd(){return dd=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.hu.forEach((function(e,n){od(t,e)}));case 1:case"end":return e.stop()}}),e)}))),dd.apply(this,arguments)}function pd(e,t){return vd.apply(this,arguments)}function vd(){return vd=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fd(t),cd(t)?(t._u.uu(n),sd(t)):t._u.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),vd.apply(this,arguments)}function yd(e,t,n){return md.apply(this,arguments)}function md(){return md=a(h().mark((function e(t,n,r){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._u.set("Online"),!(n instanceof rc&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=a(h().mark((function e(t,n){var r,i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=m(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.hu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.hu.delete(o),t.wu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Ba("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,gd(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof tc?t.wu.ut(n):n instanceof nc?t.wu._t(n):t.wu.ht(n),r.isEqual(vo.min())){e.next=29;break}return e.prev=14,e.next=17,rh(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.wu.yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.hu.get(r);i&&e.hu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.hu.get(t);if(n){e.hu.set(t,n.withResumeToken(Io.EMPTY_BYTE_STRING,n.snapshotVersion)),ud(e,t);var r=new Nl(n.target,t,1,n.sequenceNumber);od(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Ba("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,gd(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),md.apply(this,arguments)}function gd(e,t,n){return kd.apply(this,arguments)}function kd(){return kd=a(h().mark((function e(t,n,r){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(kl(n)){e.next=2;break}throw n;case 2:return t.lu.add(1),e.next=5,nd(t);case 5:t._u.set("Offline"),r||(r=function(){return rh(t.localStore)}),t.asyncQueue.enqueueRetryable(a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ba("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.lu.delete(1),e.next=6,ed(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),kd.apply(this,arguments)}function bd(e,t){return t().catch((function(n){return gd(e,n,t)}))}function wd(e){return xd.apply(this,arguments)}function xd(){return xd=a(h().mark((function e(t){var n,r,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=$a(t),r=jd(n),i=n.cu.length>0?n.cu[n.cu.length-1].batchId:-1;case 2:if(!_d(n)){e.next=19;break}return e.prev=3,e.next=6,oh(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.cu.length&&r.ko(),e.abrupt("break",19);case 10:i=a.batchId,Id(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,gd(n,e.t0);case 17:e.next=2;break;case 19:Ed(n)&&Sd(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),xd.apply(this,arguments)}function _d(e){return ld(e)&&e.cu.length<10}function Id(e,t){e.cu.push(t);var n=jd(e);n.Co()&&n.zo&&n.Ho(t.mutations)}function Ed(e){return ld(e)&&!jd(e).Do()&&e.cu.length>0}function Sd(e){jd(e).start()}function Td(e){return Cd.apply(this,arguments)}function Cd(){return Cd=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:jd(t).Xo();case 1:case"end":return e.stop()}}),e)}))),Cd.apply(this,arguments)}function Nd(e){return Ad.apply(this,arguments)}function Ad(){return Ad=a(h().mark((function e(t){var n,r,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=jd(t),r=m(t.cu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Ho(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Ad.apply(this,arguments)}function Dd(e,t,n){return Pd.apply(this,arguments)}function Pd(){return Pd=a(h().mark((function e(t,n,r){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.cu.shift(),a=Tl.from(i,n,r),e.next=3,bd(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,wd(t);case 5:case"end":return e.stop()}}),e)}))),Pd.apply(this,arguments)}function Rd(e,t){return Od.apply(this,arguments)}function Od(){return Od=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&jd(t).zo,!e.t0){e.next=4;break}return e.next=4,function(){var e=a(h().mark((function e(t,n){var r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Os(i=n.code)||i===Ya.ABORTED){e.next=7;break}return r=t.cu.shift(),jd(t).No(),e.next=5,bd(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,wd(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Ed(t)&&Sd(t);case 5:case"end":return e.stop()}}),e)}))),Od.apply(this,arguments)}function Ld(e,t){return Md.apply(this,arguments)}function Md(){return Md=a(h().mark((function e(t,n){var r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=$a(t)).asyncQueue.verifyOperationInProgress(),Ba("RemoteStore","RemoteStore received new credentials"),i=ld(r),r.lu.add(3),e.next=6,nd(r);case 6:return i&&r._u.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.lu.delete(3),e.next=12,ed(r);case 12:case"end":return e.stop()}}),e)}))),Md.apply(this,arguments)}function Fd(e,t){return Vd.apply(this,arguments)}function Vd(){return Vd=a(h().mark((function e(t,n){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=$a(t),!n){e.next=7;break}return r.lu.delete(2),e.next=5,ed(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.lu.add(2),e.next=12,nd(r);case 12:r._u.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),Vd.apply(this,arguments)}function Ud(e){return e.mu||(e.mu=function(e,t,n){var r=$a(e);return r.tu(),new $h(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{zr:hd.bind(null,e),Jr:pd.bind(null,e),Ko:yd.bind(null,e)}),e.fu.push(function(){var t=a(h().mark((function t(n){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.mu.No(),cd(e)?sd(e):e._u.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.mu.stop();case 6:fd(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.mu}function jd(e){return e.gu||(e.gu=function(e,t,n){var r=$a(e);return r.tu(),new Yh(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{zr:Td.bind(null,e),Jr:Rd.bind(null,e),Yo:Nd.bind(null,e),Jo:Dd.bind(null,e)}),e.fu.push(function(){var t=a(h().mark((function t(n){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.gu.No(),t.next=4,wd(e);case 4:t.next=9;break;case 6:return t.next=8,e.gu.stop();case 8:e.cu.length>0&&(Ba("RemoteStore","Stopping write stream with ".concat(e.cu.length," pending writes")),e.cu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.gu}var qd=function(){function e(t,n,r,i,a){p(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Xa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return y(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ja(Ya.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function zd(e,t){if(Ga("AsyncQueue","".concat(t,": ").concat(e)),kl(e))return new Ja(Ya.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Bd=function(){function e(t){p(this,e),this.comparator=t?function(e,n){return t(e,n)||Fo.comparator(e.key,n.key)}:function(e,t){return Fo.comparator(e.key,t.key)},this.keyedMap=Ws(),this.sortedSet=new Fs(this.comparator)}return y(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Gd=function(){function e(){p(this,e),this.yu=new Fs(Fo.comparator)}return y(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.yu.get(t);n?0!==e.type&&3===n.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==n.type?this.yu=this.yu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.yu=this.yu.remove(t):1===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):Ha():this.yu=this.yu.insert(t,e)}},{key:"pu",value:function(){var e=[];return this.yu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Kd=function(){function e(t,n,r,i,a,o,u,s){p(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return y(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,Bd.emptySet(n),a,r,i,!0,!1)}}]),e}(),Wd=y((function e(){p(this,e),this.Iu=void 0,this.listeners=[]})),Hd=y((function e(){p(this,e),this.queries=new Ms((function(e){return Hu(e)}),Wu),this.onlineState="Unknown",this.Tu=new Set}));function Qd(e,t){return $d.apply(this,arguments)}function $d(){return $d=a(h().mark((function e(t,n){var r,i,a,o,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=$a(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new Wd),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Iu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=zd(e.t0,"Initialization of query '".concat(Qu(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Eu(r.onlineState),o.Iu&&n.Au(o.Iu)&&ep(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),$d.apply(this,arguments)}function Yd(e,t){return Jd.apply(this,arguments)}function Jd(){return Jd=a(h().mark((function e(t,n){var r,i,a,o,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=$a(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Jd.apply(this,arguments)}function Xd(e,t){var n,r=$a(e),i=!1,a=m(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=m(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Au(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Iu=o}}}catch(f){a.e(f)}finally{a.f()}i&&ep(r)}function Zd(e,t,n){var r=$a(e),i=r.queries.get(t);if(i){var a,o=m(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function ep(e){e.Tu.forEach((function(e){e.next()}))}var tp=function(){function e(t,n,r){p(this,e),this.query=t,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}return y(e,[{key:"Au",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=m(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new Kd(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),a=!0):this.vu(e,this.onlineState)&&(this.Su(e),a=!0),this.Pu=e,a}},{key:"onError",value:function(e){this.Ru.error(e)}},{key:"Eu",value:function(e){this.onlineState=e;var t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}},{key:"vu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Du||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"Vu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Su",value:function(e){e=Kd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}]),e}(),np=function(){function e(t,n){p(this,e),this.payload=t,this.byteLength=n}return y(e,[{key:"Cu",value:function(){return"metadata"in this.payload}}]),e}(),rp=function(){function e(t){p(this,e),this.M=t}return y(e,[{key:"li",value:function(e){return gc(this.M,e)}},{key:"fi",value:function(e){return e.metadata.exists?Ic(this.M,e.document,!1):au.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}},{key:"di",value:function(e){return pc(e)}}]),e}(),ip=function(){function e(t,n,r){p(this,e),this.xu=t,this.localStore=n,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=ap(t)}return y(e,[{key:"Nu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=bo.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"ku",value:function(e){var t,n=new Map,r=new rp(this.M),i=m(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.li(a.metadata.name),s=m(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Ys()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=a(h().mark((function e(){var t,n,r,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ph(this.localStore,new rp(this.M),this.documents,this.xu.id);case 2:t=e.sent,n=this.ku(this.documents),r=m(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,yh(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Mu:this.collectionGroups,Ou:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function ap(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var op=y((function e(t){p(this,e),this.key=t})),up=y((function e(t){p(this,e),this.key=t})),sp=function(){function e(t,n){p(this,e),this.query=t,this.Fu=n,this.$u=null,this.current=!1,this.Bu=Ys(),this.mutatedKeys=Ys(),this.Lu=Ju(t),this.Uu=new Bd(this.Lu)}return y(e,[{key:"qu",get:function(){return this.Fu}},{key:"Gu",value:function(e,t){var n=this,r=t?t.Ku:new Gd,i=t?t.Uu:this.Uu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s=Vu(this.query)&&i.size===this.query.limit?i.last():null,c=Uu(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=$u(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Qu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Lu(f,s)>0||c&&n.Lu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),Vu(this.query)||Uu(this.query))for(;o.size>this.query.limit;){var l=Vu(this.query)?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Uu:o,Ku:r,ei:u,mutatedKeys:a}}},{key:"Qu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;var a=e.Ku.pu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ha()}};return n(e)-n(t)}(e.type,t.type)||r.Lu(e.doc,t.doc)})),this.ju(n);var o=t?this.Wu():[],u=0===this.Bu.size&&this.current?1:0,s=u!==this.$u;return this.$u=u,0!==a.length||s?{snapshot:new Kd(this.query,e.Uu,i,a,e.mutatedKeys,0===u,s,!1),zu:o}:{zu:o}}},{key:"Eu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new Gd,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}},{key:"Hu",value:function(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}},{key:"ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Fu=t.Fu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Fu=t.Fu.delete(e)})),this.current=e.current)}},{key:"Wu",value:function(){var e=this;if(!this.current)return[];var t=this.Bu;this.Bu=Ys(),this.Uu.forEach((function(t){e.Hu(t.key)&&(e.Bu=e.Bu.add(t.key))}));var n=[];return t.forEach((function(t){e.Bu.has(t)||n.push(new up(t))})),this.Bu.forEach((function(e){t.has(e)||n.push(new op(e))})),n}},{key:"Ju",value:function(e){this.Fu=e.hi,this.Bu=Ys();var t=this.Gu(e.documents);return this.applyChanges(t,!0)}},{key:"Yu",value:function(){return Kd.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}]),e}(),cp=y((function e(t,n,r){p(this,e),this.query=t,this.targetId=n,this.view=r})),lp=y((function e(t){p(this,e),this.key=t,this.Xu=!1})),fp=function(){function e(t,n,r,i,a,o){p(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Zu={},this.ta=new Ms((function(e){return Hu(e)}),Wu),this.ea=new Map,this.na=new Set,this.sa=new Fs(Fo.comparator),this.ia=new Map,this.ra=new bh,this.oa={},this.ua=new Map,this.aa=wf.gn(),this.onlineState="Unknown",this.ca=void 0}return y(e,[{key:"isPrimaryClient",get:function(){return!0===this.ca}}]),e}();function hp(e,t){return dp.apply(this,arguments)}function dp(){return dp=a(h().mark((function e(t,n){var r,i,a,o,u,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=av(t),!(o=r.ta.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Yu(),e.next=15;break;case 6:return e.next=8,uh(r.localStore,Gu(n));case 8:return u=e.sent,r.isPrimaryClient&&id(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,pp(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),dp.apply(this,arguments)}function pp(e,t,n,r){return vp.apply(this,arguments)}function vp(){return vp=a(h().mark((function e(t,n,r,i){var o,u,s,c,l,f;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.ha=function(e,n,r){return function(){var e=a(h().mark((function e(t,n,r,i){var a,o,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Gu(r),e.t0=a.ei,!e.t0){e.next=6;break}return e.next=5,lh(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Gu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Lp(t,n.targetId,u.zu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,lh(t.localStore,n,!0);case 3:return o=e.sent,u=new sp(n,o.hi),s=u.Gu(o.documents),c=ec.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),l=u.applyChanges(s,t.isPrimaryClient,c),Lp(t,r,l.zu),f=new cp(n,r,u),e.abrupt("return",(t.ta.set(n,f),t.ea.has(r)?t.ea.get(r).push(n):t.ea.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),vp.apply(this,arguments)}function yp(e,t){return mp.apply(this,arguments)}function mp(){return mp=a(h().mark((function e(t,n){var r,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=$a(t),i=r.ta.get(n),!((a=r.ea.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ea.set(i.targetId,a.filter((function(e){return!Wu(e,n)}))),void r.ta.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,sh(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),ad(r.remoteStore,i.targetId),Rp(r,i.targetId)})).catch(Sf);case 9:e.next=14;break;case 11:return Rp(r,i.targetId),e.next=14,sh(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),mp.apply(this,arguments)}function gp(e,t,n){return kp.apply(this,arguments)}function kp(){return kp=a(h().mark((function e(t,n,r){var i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ov(t),e.prev=1,e.next=4,function(e,t){var n,r=$a(e),i=po.now(),a=t.reduce((function(e,t){return e.add(t.key)}),Ys());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.ai.qs(e,a).next((function(a){n=a;var o,u=[],s=m(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=ws(c,n.get(c.key));null!=l&&u.push(new Es(c.key,l,iu(l.value.mapValue),ys.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return r.$s.addMutationBatch(e,i,u,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.oa[e.currentUser.toKey()];r||(r=new Fs(lo)),r=r.insert(t,n),e.oa[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,Vp(i,a.changes);case 9:return e.next=11,wd(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=zd(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),kp.apply(this,arguments)}function bp(e,t){return wp.apply(this,arguments)}function wp(){return wp=a(h().mark((function e(t,n){var r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$a(t),e.prev=1,e.next=4,ih(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ia.get(t);n&&(Qa(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Xu=!0:e.modifiedDocuments.size>0?Qa(n.Xu):e.removedDocuments.size>0&&(Qa(n.Xu),n.Xu=!1))})),e.next=8,Vp(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Sf(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),wp.apply(this,arguments)}function xp(e,t,n){var r=$a(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ta.forEach((function(e,n){var r=n.view.Eu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=$a(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=m(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Eu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&ep(n)}(r.eventManager,t),i.length&&r.Zu.Ko(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function _p(e,t,n){return Ip.apply(this,arguments)}function Ip(){return Ip=a(h().mark((function e(t,n,r){var i,a,o,u,s,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=$a(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.ia.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Fs(Fo.comparator)).insert(o,au.newNoDocument(o,vo.min())),s=Ys().add(o),c=new Zs(vo.min(),new Map,new js(lo),u,s),e.next=9,bp(i,c);case 9:i.sa=i.sa.remove(o),i.ia.delete(n),Fp(i),e.next=16;break;case 14:return e.next=16,sh(i.localStore,n,!1).then((function(){return Rp(i,n,r)})).catch(Sf);case 16:case"end":return e.stop()}}),e)}))),Ip.apply(this,arguments)}function Ep(e,t){return Sp.apply(this,arguments)}function Sp(){return Sp=a(h().mark((function e(t,n){var r,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$a(t),i=n.batch.batchId,e.prev=1,e.next=4,nh(r.localStore,n);case 4:return a=e.sent,Pp(r,i,null),Dp(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Vp(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Sf(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Sp.apply(this,arguments)}function Tp(e,t,n){return Cp.apply(this,arguments)}function Cp(){return Cp=a(h().mark((function e(t,n,r){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=$a(t),e.prev=1,e.next=4,function(e,t){var n=$a(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.$s.lookupMutationBatch(e,t).next((function(t){return Qa(null!==t),r=t.keys(),n.$s.removeMutationBatch(e,t)})).next((function(){return n.$s.performConsistencyCheck(e)})).next((function(){return n.ai.qs(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Pp(i,n,r),Dp(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Vp(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Sf(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Cp.apply(this,arguments)}function Np(e,t){return Ap.apply(this,arguments)}function Ap(){return Ap=a(h().mark((function e(t,n){var r,i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ld((r=$a(t)).remoteStore)||Ba("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=$a(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.$s.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.ua.get(i)||[]).push(n),r.ua.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=zd(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),Ap.apply(this,arguments)}function Dp(e,t){(e.ua.get(t)||[]).forEach((function(e){e.resolve()})),e.ua.delete(t)}function Pp(e,t,n){var r=$a(e),i=r.oa[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.oa[r.currentUser.toKey()]=i}}function Rp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=m(e.ea.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ta.delete(a),n&&e.Zu.la(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ea.delete(t),e.isPrimaryClient&&e.ra.Ri(t).forEach((function(t){e.ra.containsKey(t)||Op(e,t)}))}function Op(e,t){e.na.delete(t.path.canonicalString());var n=e.sa.get(t);null!==n&&(ad(e.remoteStore,n),e.sa=e.sa.remove(t),e.ia.delete(n),Fp(e))}function Lp(e,t,n){var r,i=m(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof op?(e.ra.addReference(a.key,t),Mp(e,a)):a instanceof up?(Ba("SyncEngine","Document no longer in limbo: "+a.key),e.ra.removeReference(a.key,t),e.ra.containsKey(a.key)||Op(e,a.key)):Ha()}}catch(o){i.e(o)}finally{i.f()}}function Mp(e,t){var n=t.key,r=n.path.canonicalString();e.sa.get(n)||e.na.has(r)||(Ba("SyncEngine","New document in limbo: "+n),e.na.add(r),Fp(e))}function Fp(e){for(;e.na.size>0&&e.sa.size<e.maxConcurrentLimboResolutions;){var t=e.na.values().next().value;e.na.delete(t);var n=new Fo(bo.fromString(t)),r=e.aa.next();e.ia.set(r,new lp(n)),e.sa=e.sa.insert(n,r),id(e.remoteStore,new Nl(Gu(Fu(n.path)),r,2,uo.A))}}function Vp(e,t,n){return Up.apply(this,arguments)}function Up(){return Up=a(h().mark((function e(t,n,r){var i,o,u,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=$a(t),o=[],u=[],s=[],e.t0=i.ta.isEmpty(),e.t0){e.next=9;break}return i.ta.forEach((function(e,t){s.push(i.ha(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),o.push(e);var n=Yf.Js(t.targetId,e);u.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.Zu.Ko(o),e.next=9,function(){var e=a(h().mark((function e(t,n){var r,i,a,o,u,s,c,l;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$a(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return pl.forEach(n,(function(t){return pl.forEach(t.zs,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return pl.forEach(t.Hs,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),kl(e.t0)){e.next=10;break}throw e.t0;case 10:Ba("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=m(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.si.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.si=r.si.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,u);case 9:case"end":return e.stop()}}),e)}))),Up.apply(this,arguments)}function jp(e,t){return qp.apply(this,arguments)}function qp(){return qp=a(h().mark((function e(t,n){var r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=$a(t)).currentUser.isEqual(n)){e.next=11;break}return Ba("SyncEngine","User change. New user:",n.toKey()),e.next=5,eh(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.ua.forEach((function(e){e.forEach((function(e){e.reject(new Ja(Ya.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.ua.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Vp(r,i.ci);case 11:case"end":return e.stop()}}),e)}))),qp.apply(this,arguments)}function zp(e,t){var n=$a(e),r=n.ia.get(t);if(r&&r.Xu)return Ys().add(r.key);var i=Ys(),a=n.ea.get(t);if(!a)return i;var o,u=m(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ta.get(s);i=i.unionWith(c.view.qu)}}catch(l){u.e(l)}finally{u.f()}return i}function Bp(e,t){return Gp.apply(this,arguments)}function Gp(){return Gp=a(h().mark((function e(t,n){var r,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$a(t),e.next=3,lh(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Ju(i),e.abrupt("return",(r.isPrimaryClient&&Lp(r,n.targetId,a.zu),a));case 6:case"end":return e.stop()}}),e)}))),Gp.apply(this,arguments)}function Kp(e,t){return Wp.apply(this,arguments)}function Wp(){return Wp=a(h().mark((function e(t,n){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$a(t),e.abrupt("return",hh(r.localStore,n).then((function(e){return Vp(r,e)})));case 2:case"end":return e.stop()}}),e)}))),Wp.apply(this,arguments)}function Hp(e,t,n,r){return Qp.apply(this,arguments)}function Qp(){return Qp=a(h().mark((function e(t,n,r,i){var a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=$a(t),e.next=3,function(e,t){var n=$a(e),r=$a(n.$s);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.ln(e,t).next((function(t){return t?n.ai.qs(e,t):pl.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,wd(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Pp(a,n,i||null),Dp(a,n),function(e,t){$a($a(e).$s).dn(t)}(a.localStore,n)):Ha();case 11:return e.next=13,Vp(a,o);case 13:e.next=16;break;case 15:Ba("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),Qp.apply(this,arguments)}function $p(e,t){return Yp.apply(this,arguments)}function Yp(){return Yp=a(h().mark((function e(t,n){var r,i,a,o,u,s,c,l;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(av(r=$a(t)),ov(r),!0!==n||!0===r.ca){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,Jp(r,i.toArray());case 5:return a=e.sent,r.ca=!0,e.next=9,Fd(r.remoteStore,!0);case 9:o=m(a);try{for(o.s();!(u=o.n()).done;)s=u.value,id(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.ca){e.next=25;break}return c=[],l=Promise.resolve(),r.ea.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return Rp(r,t),sh(r.localStore,t,!0)})),ad(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,Jp(r,c);case 21:return function(e){var t=$a(e);t.ia.forEach((function(e,n){ad(t.remoteStore,n)})),t.ra.bi(),t.ia=new Map,t.sa=new Fs(Fo.comparator)}(r),r.ca=!1,e.next=25,Fd(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),Yp.apply(this,arguments)}function Jp(e,t,n){return Xp.apply(this,arguments)}function Xp(){return Xp=a(h().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,d,p,v,y,g,k;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=$a(t),a=[],o=[],u=m(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.ea.get(c))||0===f.length){e.next=34;break}return e.next=11,uh(i.localStore,Gu(f[0]));case 11:l=e.sent,d=m(f),e.prev=13,d.s();case 15:if((p=d.n()).done){e.next=24;break}return v=p.value,y=i.ta.get(v),e.next=20,Bp(i,y);case 20:(g=e.sent).snapshot&&o.push(g.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),d.e(e.t0);case 29:return e.prev=29,d.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,fh(i.localStore,c);case 36:return k=e.sent,e.next=39,uh(i.localStore,k);case 39:return l=e.sent,e.next=42,pp(i,Zp(k),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.Zu.Ko(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),Xp.apply(this,arguments)}function Zp(e){return Mu(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function ev(e){var t=$a(e);return $a($a(t.localStore).persistence).Os()}function tv(e,t,n,r){return nv.apply(this,arguments)}function nv(){return nv=a(h().mark((function e(t,n,r,i){var a,o,u,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=$a(t)).ca){e.next=3;break}return e.abrupt("return",void Ba("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ea.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,hh(a.localStore,Yu(o[0]));case 10:return u=e.sent,s=Zs.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,Vp(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,sh(a.localStore,n,!0);case 17:return Rp(a,n,i),e.abrupt("break",20);case 19:Ha();case 20:case"end":return e.stop()}}),e)}))),nv.apply(this,arguments)}function rv(e,t,n){return iv.apply(this,arguments)}function iv(){return iv=a(h().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=av(t)).ca){e.next=45;break}a=m(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.ea.has(u)){e.next=10;break}return Ba("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,fh(i.localStore,u);case 12:return s=e.sent,e.next=15,uh(i.localStore,s);case 15:return c=e.sent,e.next=18,pp(i,Zp(s),c.targetId,!1);case 18:id(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=m(r),e.prev=30,d=h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.ea.has(t),!e.t0){e.next=5;break}return e.next=5,sh(i.localStore,t,!1).then((function(){ad(i.remoteStore,t),Rp(i,t)})).catch(Sf);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(d(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),iv.apply(this,arguments)}function av(e){var t=$a(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=bp.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=zp.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=_p.bind(null,t),t.Zu.Ko=Xd.bind(null,t.eventManager),t.Zu.la=Zd.bind(null,t.eventManager),t}function ov(e){var t=$a(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Ep.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Tp.bind(null,t),t}function uv(e,t,n){var r=$a(e);(function(){var e=a(h().mark((function e(t,n,r){var i,a,o,u,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=$a(e),r=pc(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.ds.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(ap(i)),a=new ip(i,t.localStore,n.M),e.next=15,n.fa();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Nu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.fa();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,Vp(t,s.Ou,void 0);case 31:return e.next=33,function(e,t){var n=$a(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.ds.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Mu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Ka("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var sv=function(){function e(){p(this,e),this.synchronizeTabs=!1}return y(e,[{key:"initialize",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.M=Wh(t.databaseInfo.databaseId),this.sharedClientState=this.da(t),this.persistence=this._a(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.wa(t),this.localStore=this.ma(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"wa",value:function(e){return null}},{key:"ma",value:function(e){return Zf(this.persistence,new Jf,e.initialUser,this.M)}},{key:"_a",value:function(e){return new Sh(Ch.Wi,this.M)}},{key:"da",value:function(e){return new Vh}},{key:"terminate",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),cv=function(e){b(n,e);var t=E(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this)).ga=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return y(n,[{key:"initialize",value:function(){var e=a(h().mark((function e(t){var r=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_t(w(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.ga.initialize(this,t);case 4:return e.next=6,ov(this.ga.syncEngine);case 6:return e.next=8,wd(this.ga.remoteStore);case 8:return e.next=10,this.persistence.Is((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ma",value:function(e){return Zf(this.persistence,new Jf,e.initialUser,this.M)}},{key:"wa",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new Af(t,e.asyncQueue)}},{key:"_a",value:function(e){var t=Qf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?df.withCacheSize(this.cacheSizeBytes):df.DEFAULT;return new Kf(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Gh(),Kh(),this.M,this.sharedClientState,!!this.forceOwnership)}},{key:"da",value:function(e){return new Vh}}]),n}(sv),lv=function(e){b(n,e);var t=E(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,r,!1)).ga=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return y(n,[{key:"initialize",value:function(){var e=a(h().mark((function e(t){var r,i=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_t(w(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.ga.syncEngine,e.t0=this.sharedClientState instanceof Fh,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={kr:Hp.bind(null,r),Mr:tv.bind(null,r),Or:rv.bind(null,r),Os:ev.bind(null,r),Nr:Kp.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Is(function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$p(i.ga.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"da",value:function(e){var t=Gh();if(!Fh.vt(t))throw new Ja(Ya.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Qf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Fh(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(cv),fv=function(){function e(){p(this,e)}return y(e,[{key:"initialize",value:function(){var e=a(h().mark((function e(t,n){var r=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return xp(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=jp.bind(null,this.syncEngine),e.next=12,Fd(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Hd}},{key:"createDatastore",value:function(e){var t,n=Wh(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Bh(t));return function(e,t,n,r){return new Jh(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return xp(o.syncEngine,e,0)},a=jh.vt()?new jh:new Uh,new Zh(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new fp(e,t,n,r,i,a);return o&&(u.ca=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=$a(t),Ba("RemoteStore","RemoteStore shutting down."),n.lu.add(5),e.next=5,nd(n);case 5:n.du.shutdown(),n._u.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function hv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return a(h().mark((function r(){var i;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var dv=function(){function e(t){p(this,e),this.observer=t,this.muted=!1}return y(e,[{key:"next",value:function(e){this.observer.next&&this.ya(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"pa",value:function(){this.muted=!0}},{key:"ya",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),pv=function(){function e(t,n){var r=this;p(this,e),this.Ia=t,this.M=n,this.metadata=new Xa,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then((function(e){e&&e.Cu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return y(e,[{key:"close",value:function(){return this.Ia.cancel()}},{key:"getMetadata",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fa",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Ea());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ea",value:function(){var e=a(h().mark((function e(){var t,n,r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Aa();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Ta.decode(t),r=Number(n),isNaN(r)&&this.Ra("length string (".concat(n,") is not valid number")),e.next=9,this.ba(r);case 9:return i=e.sent,e.abrupt("return",new np(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Pa",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Aa",value:function(){var e=a(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Pa()<0)){e.next=7;break}return e.next=3,this.Va();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Pa())<0&&this.Ra("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ba",value:function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Va();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Ra("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Ta.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ra",value:function(e){throw this.Ia.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Va",value:function(){var e=a(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ia.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),vv=function(){function e(t){p(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return y(e,[{key:"lookup",value:function(){var e=a(h().mark((function e(t){var n,r=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Ja(Ya.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=a(h().mark((function e(t,n){var r,i,a,o,u,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$a(t),i=wc(r.M)+"/documents",a={documents:n.map((function(e){return mc(r.M,e)}))},e.next=5,r.co("BatchGetDocuments",i,a);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=Ec(r.M,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());Qa(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Ds(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=a(h().mark((function e(){var t,n=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Fo.fromPath(t);n.mutations.push(new Ps(r,n.precondition(r)))})),e.next=7,function(){var e=a(h().mark((function e(t,n){var r,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$a(t),i=wc(r.M)+"/documents",a={writes:n.map((function(e){return Sc(r.M,e)}))},e.next=3,r.ro("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ha();t=vo.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Ja(Ya.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?ys.updateTime(t):ys.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(vo.min()))throw new Ja(Ya.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ys.updateTime(t)}return ys.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),yv=function(){function e(t,n,r,i){p(this,e),this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.va=5,this.So=new Hh(this.asyncQueue,"transaction_retry")}return y(e,[{key:"run",value:function(){this.va-=1,this.Sa()}},{key:"Sa",value:function(){var e=this;this.So.Io(a(h().mark((function t(){var n,r;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new vv(e.datastore),(r=e.Da(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Ca(t)}))}))})).catch((function(t){e.Ca(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Da",value:function(e){try{var t=this.updateFunction(e);return!Oo(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Ca",value:function(e){var t=this;this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget((function(){return t.Sa(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"xa",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Os(t)}return!1}}]),e}(),mv=function(){function e(t,n,r,i){var o=this;p(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ua.UNAUTHENTICATED,this.clientId=co.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ba("FirestoreClient","Received user=",t.uid),e.next=3,o.authCredentialListener(t);case 3:o.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Ba("FirestoreClient","Received new app check token=",e),o.appCheckCredentialListener(e,o.user)}))}return y(e,[{key:"getConfiguration",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Ja(Ya.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Xa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(a(h().mark((function n(){var r;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=zd(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function gv(e,t){return kv.apply(this,arguments)}function kv(){return kv=a(h().mark((function e(t,n){var r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Ba("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,eh(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),kv.apply(this,arguments)}function bv(e,t){return wv.apply(this,arguments)}function wv(){return wv=a(h().mark((function e(t,n){var r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,xv(t);case 3:return r=e.sent,Ba("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Ld(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Ld(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),wv.apply(this,arguments)}function xv(e){return _v.apply(this,arguments)}function _v(){return _v=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Ba("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,gv(t,new sv);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),_v.apply(this,arguments)}function Iv(e){return Ev.apply(this,arguments)}function Ev(){return Ev=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Ba("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,bv(t,new fv);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),Ev.apply(this,arguments)}function Sv(e){return xv(e).then((function(e){return e.persistence}))}function Tv(e){return xv(e).then((function(e){return e.localStore}))}function Cv(e){return Iv(e).then((function(e){return e.remoteStore}))}function Nv(e){return Iv(e).then((function(e){return e.syncEngine}))}function Av(e){return Dv.apply(this,arguments)}function Dv(){return Dv=a(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Iv(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=hp.bind(null,n.syncEngine),r.onUnlisten=yp.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),Dv.apply(this,arguments)}function Pv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Xa;return e.asyncQueue.enqueueAndForget(a(h().mark((function i(){return h().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new dv({next:function(a){t.enqueueAndForget((function(){return Yd(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Ja(Ya.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Ja(Ya.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new tp(Fu(n.path),a,{includeMetadataChanges:!0,Du:!0});return Qd(e,o)},i.next=3,Av(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Rv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Xa;return e.asyncQueue.enqueueAndForget(a(h().mark((function i(){return h().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new dv({next:function(n){t.enqueueAndForget((function(){return Yd(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Ja(Ya.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new tp(n,a,{includeMetadataChanges:!0,Du:!0});return Qd(e,o)},i.next=3,Av(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var Ov=new Map;function Lv(e,t,n){if(!n)throw new Ja(Ya.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Mv(e,t,n,r){if(!0===t&&!0===r)throw new Ja(Ya.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Fv(e){if(!Fo.isDocumentKey(e))throw new Ja(Ya.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Vv(e){if(Fo.isDocumentKey(e))throw new Ja(Ya.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Uv(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Ha()}function jv(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ja(Ya.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Uv(e);throw new Ja(Ya.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function qv(e,t){if(t<=0)throw new Ja(Ya.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var zv=function(){function e(t){var n;if(p(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Ja(Ya.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ja(Ya.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Mv("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return y(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),Bv=function(){function e(t,n,r){p(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zv({}),this._settingsFrozen=!1,t instanceof Ro?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Ja(Ya.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ro(e.options.projectId)}(t))}return y(e,[{key:"app",get:function(){if(!this._app)throw new Ja(Ya.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Ja(Ya.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zv(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new eo;switch(e.type){case"gapi":var t=e.client;return Qa(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new io(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Ja(Ya.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Ov.get(e);t&&(Ba("ComponentProvider","Removing Datastore"),Ov.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function Gv(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=jv(e,Bv))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Ka("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Ua.MOCK_USER;else{o=O(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Ja(Ya.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ua(s)}e._authCredentials=new to(new Za(o,u))}}var Kv=function(){function e(t,n,r){p(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return y(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new Hv(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),Wv=function(){function e(t,n,r){p(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return y(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),Hv=function(e){b(n,e);var t=E(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this,e,r,Fu(i)))._path=i,a.type="collection",a}return y(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Kv(this.firestore,null,new Fo(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(Wv);function Qv(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ae(e),Lv("collection","path",t),e instanceof Bv){var a=bo.fromString.apply(bo,[t].concat(r));return Vv(a),new Hv(e,null,a)}if(!(e instanceof Kv||e instanceof Hv))throw new Ja(Ya.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(bo.fromString.apply(bo,[t].concat(r)));return Vv(o),new Hv(e.firestore,null,o)}function $v(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ae(e),1===arguments.length&&(t=co.R()),Lv("doc","path",t),e instanceof Bv){var a=bo.fromString.apply(bo,[t].concat(r));return Fv(a),new Kv(e,null,new Fo(a))}if(!(e instanceof Kv||e instanceof Hv))throw new Ja(Ya.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(bo.fromString.apply(bo,[t].concat(r)));return Fv(o),new Kv(e.firestore,e instanceof Hv?e.converter:null,new Fo(o))}function Yv(e,t){return e=ae(e),t=ae(t),(e instanceof Kv||e instanceof Hv)&&(t instanceof Kv||t instanceof Hv)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Jv(e,t){return e=ae(e),t=ae(t),e instanceof Wv&&t instanceof Wv&&e.firestore===t.firestore&&Wu(e._query,t._query)&&e.converter===t.converter}var Xv=function(){function e(){var t=this;p(this,e),this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new Hh(this,"async_queue_retry"),this.Ua=function(){var e=Kh();e&&Ba("AsyncQueue","Visibility state changed to "+e.visibilityState),t.So.Eo()};var n=Kh();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Ua)}return y(e,[{key:"isShuttingDown",get:function(){return this.Ma}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.qa(),this.Ga(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;var t=Kh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}},{key:"enqueue",value:function(e){var t=this;if(this.qa(),this.Ma)return new Promise((function(){}));var n=new Xa;return this.Ga((function(){return t.Ma&&t.Ba?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.ka.push(e),t.Ka()}))}},{key:"Ka",value:function(){var e=a(h().mark((function e(){var t=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.ka.length){e.next=14;break}return e.prev=1,e.next=4,this.ka[0]();case 4:this.ka.shift(),this.So.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),kl(e.t0)){e.next=12;break}throw e.t0;case 12:Ba("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.ka.length>0&&this.So.Io((function(){return t.Ka()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Ga",value:function(e){var t=this,n=this.Na.then((function(){return t.$a=!0,e().catch((function(e){t.Fa=e,t.$a=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ga("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.$a=!1,e}))}));return this.Na=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.qa(),this.La.indexOf(e)>-1&&(t=0);var i=qd.createAndSchedule(this,e,t,n,(function(e){return r.Qa(e)}));return this.Oa.push(i),i}},{key:"qa",value:function(){this.Fa&&Ha()}},{key:"verifyOperationInProgress",value:function(){}},{key:"ja",value:function(){var e=a(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Na,e.next=3,t;case 3:if(t!==this.Na){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Wa",value:function(e){var t,n=m(this.Oa);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"za",value:function(e){var t=this;return this.ja().then((function(){t.Oa.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=m(t.Oa);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.ja()}))}},{key:"Ha",value:function(e){this.La.push(e)}},{key:"Qa",value:function(e){var t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}]),e}();function Zv(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=m(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var ey=function(){function e(){p(this,e),this._progressObserver={},this._taskCompletionResolver=new Xa,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return y(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),ty=function(e){b(n,e);var t=E(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new Xv,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return y(n,[{key:"_terminate",value:function(){return this._firestoreClient||ry(this),this._firestoreClient.terminate()}}]),n}(Bv);function ny(e){return e._firestoreClient||ry(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function ry(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Po(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new mv(e._authCredentials,e._appCheckCredentials,e._queue,r)}function iy(e,t,n){var r=new Xa;return e.asyncQueue.enqueue(a(h().mark((function i(){return h().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,gv(e,n);case 3:return i.next=5,bv(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===Ya.FAILED_PRECONDITION||e.code===Ya.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function ay(e){return function(e){return e.asyncQueue.enqueue(a(h().mark((function t(){var n,r;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Sv(e);case 2:return n=t.sent,t.next=5,Cv(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=$a(e);return t.lu.delete(0),ed(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(ny(e=jv(e,ty)))}function oy(e){return function(e){return e.asyncQueue.enqueue(a(h().mark((function t(){var n,r;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Sv(e);case 2:return n=t.sent,t.next=5,Cv(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=$a(t)).lu.add(0),e.next=4,nd(n);case 4:n._u.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(ny(e=jv(e,ty)))}function uy(e,t){var n=ny(e=jv(e,ty)),r=new ey;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new pv(e,t)}(function(e,t){if(e instanceof Uint8Array)return hv(e,t);if(e instanceof ArrayBuffer)return hv(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,Wh(t));e.asyncQueue.enqueueAndForget(a(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=uv,t.next=3,Nv(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function sy(e,t){return function(e,t){return e.asyncQueue.enqueue(a(h().mark((function n(){return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=$a(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.ds.getNamedQuery(e,t)}))},n.next=3,Tv(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(ny(e=jv(e,ty)),t).then((function(t){return t?new Wv(e,null,t.query):null}))}function cy(e){if(e._initialized||e._terminated)throw new Ja(Ya.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var ly=function(){function e(){p(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Ja(Ya.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xo(n)}return y(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var fy=function(){function e(t){p(this,e),this._byteString=t}return y(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Io.fromBase64String(t))}catch(t){throw new Ja(Ya.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Io.fromUint8Array(t))}}]),e}(),hy=y((function e(t){p(this,e),this._methodName=t})),dy=function(){function e(t,n){if(p(this,e),!isFinite(t)||t<-90||t>90)throw new Ja(Ya.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Ja(Ya.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return y(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return lo(this._lat,e._lat)||lo(this._long,e._long)}}]),e}(),py=/^__.*__$/,vy=function(){function e(t,n,r){p(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return y(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Es(e,this.data,this.fieldMask,t,this.fieldTransforms):new Is(e,this.data,t,this.fieldTransforms)}}]),e}(),yy=function(){function e(t,n,r){p(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return y(e,[{key:"toMutation",value:function(e,t){return new Es(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function my(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ha()}}var gy=function(){function e(t,n,r,i,a,o){p(this,e),this.settings=t,this.databaseId=n,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Ja(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return y(e,[{key:"path",get:function(){return this.settings.path}},{key:"Ya",get:function(){return this.settings.Ya}},{key:"Xa",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Za",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Xa({path:n,tc:!1});return r.ec(e),r}},{key:"nc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Xa({path:n,tc:!1});return r.Ja(),r}},{key:"sc",value:function(e){return this.Xa({path:void 0,tc:!0})}},{key:"ic",value:function(e){return Vy(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Ja",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ec(this.path.get(e))}},{key:"ec",value:function(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(my(this.Ya)&&py.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}]),e}(),ky=function(){function e(t,n,r){p(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.M=r||Wh(t)}return y(e,[{key:"uc",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new gy({Ya:e,methodName:t,oc:n,path:xo.emptyPath(),tc:!1,rc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}]),e}();function by(e){var t=e._freezeSettings(),n=Wh(e._databaseId);return new ky(e._databaseId,!!t.ignoreUndefinedProperties,n)}function wy(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.uc(a.merge||a.mergeFields?2:0,t,n,i);Oy("Data must be an object, but it was:",o,r);var u,s,c=Py(r,o);if(a.merge)u=new _o(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=m(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=Ly(t,d,n);if(!o.contains(p))throw new Ja(Ya.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));Uy(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new _o(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new vy(new ru(c),u,s)}var xy=function(e){b(n,e);var t=E(n);function n(){return p(this,n),t.apply(this,arguments)}return y(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Ya)throw 1===e.Ya?e.ic("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ic("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(hy);function _y(e,t,n){return new gy({Ya:3,oc:t.settings.oc,methodName:e._methodName,tc:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}var Iy=function(e){b(n,e);var t=E(n);function n(){return p(this,n),t.apply(this,arguments)}return y(n,[{key:"_toFieldTransform",value:function(e){return new ps(e.path,new os)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(hy),Ey=function(e){b(n,e);var t=E(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e)).ac=r,i}return y(n,[{key:"_toFieldTransform",value:function(e){var t=_y(this,e,!0),n=this.ac.map((function(e){return Dy(e,t)})),r=new us(n);return new ps(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(hy),Sy=function(e){b(n,e);var t=E(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e)).ac=r,i}return y(n,[{key:"_toFieldTransform",value:function(e){var t=_y(this,e,!0),n=this.ac.map((function(e){return Dy(e,t)})),r=new cs(n);return new ps(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(hy),Ty=function(e){b(n,e);var t=E(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e)).cc=r,i}return y(n,[{key:"_toFieldTransform",value:function(e){var t=new fs(e.M,ts(e.M,this.cc));return new ps(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(hy);function Cy(e,t,n,r){var i=e.uc(1,t,n);Oy("Data must be an object, but it was:",i,r);var a=[],o=ru.empty();mo(r,(function(e,r){var u=Fy(t,e,n);r=ae(r);var s=i.nc(u);if(r instanceof xy)a.push(u);else{var c=Dy(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new _o(a);return new yy(o,u,i.fieldTransforms)}function Ny(e,t,n,r,i,a){var o=e.uc(1,t,n),u=[Ly(t,r,n)],s=[i];if(a.length%2!=0)throw new Ja(Ya.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(Ly(t,a[c])),s.push(a[c+1]);for(var l=[],f=ru.empty(),h=u.length-1;h>=0;--h)if(!Uy(l,u[h])){var d=u[h],p=s[h];p=ae(p);var v=o.nc(d);if(p instanceof xy)l.push(d);else{var y=Dy(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new _o(l);return new yy(f,m,o.fieldTransforms)}function Ay(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Dy(n,e.uc(r?4:3,t))}function Dy(e,t){if(Ry(e=ae(e)))return Oy("Unsupported field value:",t,e),Py(e,t);if(e instanceof hy)return function(e,t){if(!my(t.Ya))throw t.ic("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ic("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.tc&&4!==t.Ya)throw t.ic("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=m(e);try{for(a.s();!(n=a.n()).done;){var o=Dy(n.value,t.sc(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=ae(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ts(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=po.fromDate(e);return{timestampValue:fc(t.M,n)}}if(e instanceof po){var r=new po(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:fc(t.M,r)}}if(e instanceof dy)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof fy)return{bytesValue:hc(t.M,e._byteString)};if(e instanceof Kv){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ic("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:vc(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ic("Unsupported field value: ".concat(Uv(e)))}(e,t)}function Py(e,t){var n={};return go(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):mo(e,(function(e,r){var i=Dy(r,t.Za(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Ry(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof po||e instanceof dy||e instanceof fy||e instanceof Kv||e instanceof hy)}function Oy(e,t,n){if(!Ry(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Uv(n);throw"an object"===r?t.ic(e+" a custom object"):t.ic(e+" "+r)}}function Ly(e,t,n){if((t=ae(t))instanceof ly)return t._internalPath;if("string"==typeof t)return Fy(e,t);throw Vy("Field path arguments must be of type string or ",e,!1,void 0,n)}var My=new RegExp("[~\\*/\\[\\]]");function Fy(e,t,n){if(t.search(My)>=0)throw Vy("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return S(ly,de(t.split(".")))._internalPath}catch(r){throw Vy("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Vy(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Ja(Ya.INVALID_ARGUMENT,u+e+s)}function Uy(e,t){return e.some((function(e){return e.isEqual(t)}))}var jy=function(){function e(t,n,r,i,a){p(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return y(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Kv(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new qy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(zy("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),qy=function(e){b(n,e);var t=E(n);function n(){return p(this,n),t.apply(this,arguments)}return y(n,[{key:"data",value:function(){return _t(w(n.prototype),"data",this).call(this)}}]),n}(jy);function zy(e,t){return"string"==typeof t?Fy(e,t):t instanceof ly?t._internalPath:t._delegate._internalPath}var By=function(){function e(t,n){p(this,e),this.hasPendingWrites=t,this.fromCache=n}return y(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),Gy=function(e){b(n,e);var t=E(n);function n(e,r,i,a,o,u){var s;return p(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return y(n,[{key:"exists",value:function(){return _t(w(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new Ky(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(zy("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(jy),Ky=function(e){b(n,e);var t=E(n);function n(){return p(this,n),t.apply(this,arguments)}return y(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _t(w(n.prototype),"data",this).call(this,e)}}]),n}(Gy),Wy=function(){function e(t,n,r,i){p(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new By(i.hasPendingWrites,i.fromCache),this.query=r}return y(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new Ky(n._firestore,n._userDataWriter,r.key,r,new By(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ja(Ya.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new Ky(e._firestore,e._userDataWriter,t.doc.key,t.doc,new By(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new Ky(e._firestore,e._userDataWriter,t.doc.key,t.doc,new By(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:Hy(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function Hy(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ha()}}function Qy(e,t){return e instanceof Gy&&t instanceof Gy?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Wy&&t instanceof Wy&&e._firestore===t._firestore&&Jv(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function $y(e){if(Uu(e)&&0===e.explicitOrderBy.length)throw new Ja(Ya.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Yy=y((function e(){p(this,e)}));function Jy(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var Xy=function(e){b(n,e);var t=E(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this)).hc=e,a.lc=r,a.fc=i,a.type="where",a}return y(n,[{key:"_apply",value:function(e){var t=by(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Ja(Ya.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){cm(o,a);var s,c=[],l=m(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(sm(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=sm(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||cm(o,a),u=Ay(n,"where",o,"in"===a||"not-in"===a);var h=wu.create(i,a,u);return function(e,t){if(t.S()){var n=qu(e);if(null!==n&&!n.isEqual(t.field))throw new Ja(Ya.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=ju(e);null!==r&&lm(e,t.field,r)}var i=function(e,t){var n,r=m(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new Ja(Ya.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Ja(Ya.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new Wv(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new Lu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(Yy);var Zy=function(e){b(n,e);var t=E(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).hc=e,i.dc=r,i.type="orderBy",i}return y(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Ja(Ya.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Ja(Ya.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Du(t,n);return function(e,t){if(null===ju(e)){var n=qu(e);null!==n&&lm(e,n,t.field)}}(e,r),r}(e._query,this.hc,this.dc);return new Wv(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Lu(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(Yy);var em=function(e){b(n,e);var t=E(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this)).type=e,a._c=r,a.wc=i,a}return y(n,[{key:"_apply",value:function(e){return new Wv(e.firestore,e.converter,Ku(e._query,this._c,this.wc))}}]),n}(Yy);var tm=function(e){b(n,e);var t=E(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this)).type=e,a.mc=r,a.gc=i,a}return y(n,[{key:"_apply",value:function(e){var t=um(e,this.type,this.mc,this.gc);return new Wv(e.firestore,e.converter,function(e,t){return new Lu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(Yy);function nm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new tm("startAt",t,!0)}function rm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new tm("startAfter",t,!1)}var im=function(e){b(n,e);var t=E(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this)).type=e,a.mc=r,a.gc=i,a}return y(n,[{key:"_apply",value:function(e){var t=um(e,this.type,this.mc,this.gc);return new Wv(e.firestore,e.converter,function(e,t){return new Lu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(Yy);function am(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new im("endBefore",t,!1)}function om(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new im("endAt",t,!0)}function um(e,t,n,r){if(n[0]=ae(n[0]),n[0]instanceof jy)return function(e,t,n,r,i){if(!r)throw new Ja(Ya.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=m(Bu(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(Ho(t,r.key));else{var c=r.data.field(s.field);if(No(c))throw new Ja(Ya.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new Ja(Ya.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new Au(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=by(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Ja(Ya.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Ja(Ya.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!zu(e)&&-1!==c.indexOf("/"))throw new Ja(Ya.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(bo.fromString(c));if(!Fo.isDocumentKey(l))throw new Ja(Ya.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Fo(l);u.push(Ho(t,f))}else{var h=Ay(n,r,c);u.push(h)}}return new Au(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function sm(e,t,n){if("string"==typeof(n=ae(n))){if(""===n)throw new Ja(Ya.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zu(t)&&-1!==n.indexOf("/"))throw new Ja(Ya.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(bo.fromString(n));if(!Fo.isDocumentKey(r))throw new Ja(Ya.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Ho(e,new Fo(r))}if(n instanceof Kv)return Ho(e,n._key);throw new Ja(Ya.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Uv(n),"."))}function cm(e,t){if(!Array.isArray(e)||0===e.length)throw new Ja(Ya.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Ja(Ya.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function lm(e,t,n){if(!n.isEqual(t))throw new Ja(Ya.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var fm=function(){function e(){p(this,e)}return y(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(jo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return To(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Co(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ha()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return mo(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new dy(To(e.latitude),To(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Ao(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Do(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=So(e);return new po(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=bo.fromString(e);Qa(Uc(n));var r=new Ro(n.get(1),n.get(3)),i=new Fo(n.popFirst(5));return r.isEqual(t)||Ga("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function hm(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var dm=function(e){b(n,e);var t=E(n);function n(e){var r;return p(this,n),(r=t.call(this)).firestore=e,r}return y(n,[{key:"convertBytes",value:function(e){return new fy(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kv(this.firestore,null,t)}}]),n}(fm),pm=function(){function e(t,n){p(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=by(t)}return y(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=vm(e,this._firestore),i=hm(r.converter,t,n),a=wy(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,ys.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=vm(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=ae(t))||t instanceof ly?Ny(this._dataReader,"WriteBatch.update",i._key,t,n,o):Cy(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,ys.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=vm(e,this._firestore);return this._mutations=this._mutations.concat(new Ds(t._key,ys.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Ja(Ya.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function vm(e,t){if((e=ae(e)).firestore!==t)throw new Ja(Ya.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var ym=function(e){b(n,e);var t=E(n);function n(e){var r;return p(this,n),(r=t.call(this)).firestore=e,r}return y(n,[{key:"convertBytes",value:function(e){return new fy(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kv(this.firestore,null,t)}}]),n}(fm);function mm(e){e=jv(e,Kv);var t=jv(e.firestore,ty),n=ny(t),r=new ym(t);return function(e,t){var n=new Xa;return e.asyncQueue.enqueueAndForget(a(h().mark((function r(){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=a(h().mark((function e(t,n,r){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=$a(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.ai.Bs(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Ja(Ya.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=zd(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Tv(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new Gy(t,r,e._key,n,new By(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function gm(e){e=jv(e,Wv);var t=jv(e.firestore,ty),n=ny(t),r=new ym(t);return function(e,t){var n=new Xa;return e.asyncQueue.enqueueAndForget(a(h().mark((function r(){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=a(h().mark((function e(t,n,r){var i,a,o,u,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,lh(t,n,!0);case 3:i=e.sent,a=new sp(n,i.hi),o=a.Gu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=zd(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Tv(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new Wy(t,r,e,n)}))}function km(e,t,n){e=jv(e,Kv);var r=jv(e.firestore,ty),i=hm(e.converter,t,n);return _m(r,[wy(by(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,ys.none())])}function bm(e,t,n){e=jv(e,Kv);for(var r=jv(e.firestore,ty),i=by(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return _m(r,[("string"==typeof(t=ae(t))||t instanceof ly?Ny(i,"updateDoc",e._key,t,n,o):Cy(i,"updateDoc",e._key,t)).toMutation(e._key,ys.exists(!0))])}function wm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o,u;e=ae(e);var s={includeMetadataChanges:!1},c=0;"object"!=typeof n[c]||Zv(n[c])||(s=n[c],c++);var l,f,d,p={includeMetadataChanges:s.includeMetadataChanges};if(Zv(n[c])){var v=n[c];n[c]=null===(i=v.next)||void 0===i?void 0:i.bind(v),n[c+1]=null===(o=v.error)||void 0===o?void 0:o.bind(v),n[c+2]=null===(u=v.complete)||void 0===u?void 0:u.bind(v)}if(e instanceof Kv)f=jv(e.firestore,ty),d=Fu(e._key.path),l={next:function(t){n[c]&&n[c](Im(f,e,t))},error:n[c+1],complete:n[c+2]};else{var y=jv(e,Wv);f=jv(y.firestore,ty),d=y._query;var m=new ym(f);l={next:function(e){n[c]&&n[c](new Wy(f,m,y,e))},error:n[c+1],complete:n[c+2]},$y(e._query)}return function(e,t,n,r){var i=new dv(r),o=new tp(t,i,n);return e.asyncQueue.enqueueAndForget(a(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Qd,t.next=3,Av(e);case 3:return t.t1=t.sent,t.t2=o,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.pa(),e.asyncQueue.enqueueAndForget(a(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Yd,t.next=3,Av(e);case 3:return t.t1=t.sent,t.t2=o,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(ny(f),d,p,l)}function xm(e,t){return function(e,t){var n=new dv(t);return e.asyncQueue.enqueueAndForget(a(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){$a(e).Tu.add(t),t.next()},t.next=3,Av(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.pa(),e.asyncQueue.enqueueAndForget(a(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){$a(e).Tu.delete(t)},t.next=3,Av(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(ny(e=jv(e,ty)),Zv(t)?t:{next:t})}function _m(e,t){return function(e,t){var n=new Xa;return e.asyncQueue.enqueueAndForget(a(h().mark((function r(){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=gp,r.next=3,Nv(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(ny(e),t)}function Im(e,t,n){var r=n.docs.get(t._key),i=new ym(e);return new Gy(e,i,t._key,r,new By(n.hasPendingWrites,n.fromCache),t.converter)}var Em=function(e){b(n,e);var t=E(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,r))._firestore=e,i}return y(n,[{key:"get",value:function(e){var t=this,r=vm(e,this._firestore),i=new ym(this._firestore);return _t(w(n.prototype),"get",this).call(this,e).then((function(e){return new Gy(t._firestore,i,r._key,e._document,new By(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){p(this,e),this._firestore=t,this._transaction=n,this._dataReader=by(t)}return y(e,[{key:"get",value:function(e){var t=this,n=vm(e,this._firestore),r=new dm(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Ha();var i=e[0];if(i.isFoundDocument())return new jy(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new jy(t._firestore,r,n._key,null,n.converter);throw Ha()}))}},{key:"set",value:function(e,t,n){var r=vm(e,this._firestore),i=hm(r.converter,t,n),a=wy(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=vm(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=ae(t))||t instanceof ly?Ny(this._dataReader,"Transaction.update",i._key,t,n,o):Cy(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=vm(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function Sm(e,t){return function(e,t){var n=new Xa;return e.asyncQueue.enqueueAndForget(a(h().mark((function r(){var i;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e){return Iv(e).then((function(e){return e.datastore}))}(e);case 2:i=r.sent,new yv(e.asyncQueue,i,t,n).run();case 4:case"end":return r.stop()}}),r)})))),n.promise}(ny(e=jv(e,ty)),(function(n){return t(new Em(e,n))}))}function Tm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Ey("arrayUnion",t)}function Cm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Sy("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){ja=e}(Ke),Ve(new pe("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new ty(i,new no(e.getProvider("auth-internal")),new oo(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),Je(Va,"3.4.7",e),Je(Va,"3.4.7","esm2017")}();function Nm(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Ja("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function Am(){if("undefined"===typeof Uint8Array)throw new Ja("unimplemented","Uint8Arrays are not available in this environment.")}function Dm(){if("undefined"==typeof atob)throw new Ja("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Pm=function(){function e(t){p(this,e),this._delegate=t}return y(e,[{key:"toBase64",value:function(){return Dm(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return Am(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return Dm(),new e(fy.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return Am(),new e(fy.fromUint8Array(t))}}]),e}();function Rm(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=m(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var Om=function(){function e(){p(this,e)}return y(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){cy(e=jv(e,ty));var n=ny(e),r=e._freezeSettings(),i=new fv;return iy(n,i,new cv(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){cy(e=jv(e,ty));var t=ny(e),n=e._freezeSettings(),r=new fv;return iy(t,r,new lv(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Ja(Ya.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Xa;return e._queue.enqueueAndForgetEvenWhileRestricted(a(h().mark((function n(){return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(yl.vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,yl.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Qf(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),Lm=function(){function e(t,n,r){var i=this;p(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Ro||(this._appCompat=t)}return y(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Ka("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Gv(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return ay(this._delegate)}},{key:"disableNetwork",value:function(){return oy(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&Mv("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Xa;return e.asyncQueue.enqueueAndForget(a(h().mark((function n(){return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Np,n.next=3,Nv(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(ny(e=jv(e,ty)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return xm(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Ja("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new $m(this,Qv(this._delegate,e))}catch(t){throw qm(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new jm(this,$v(this._delegate,e))}catch(t){throw qm(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new Wm(this,function(e,t){if(e=jv(e,Bv),Lv("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Ja(Ya.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Wv(e,null,function(e){return new Lu(bo.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw qm(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return Sm(this._delegate,(function(n){return e(new Fm(t,n))}))}},{key:"batch",value:function(){var e=this;return ny(this._delegate),new Vm(new pm(this._delegate,(function(t){return _m(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return uy(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return sy(this._delegate,e).then((function(e){return e?new Wm(t,e):null}))}}]),e}(),Mm=function(e){b(n,e);var t=E(n);function n(e){var r;return p(this,n),(r=t.call(this)).firestore=e,r}return y(n,[{key:"convertBytes",value:function(e){return new Pm(new fy(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return jm.forKey(t,this.firestore,null)}}]),n}(fm);var Fm=function(){function e(t,n){p(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new Mm(t)}return y(e,[{key:"get",value:function(e){var t=this,n=Ym(e);return this._delegate.get(n).then((function(e){return new Gm(t._firestore,new Gy(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=Ym(e);return n?(Nm("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=Ym(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=Ym(e);return this._delegate.delete(t),this}}]),e}(),Vm=function(){function e(t){p(this,e),this._delegate=t}return y(e,[{key:"set",value:function(e,t,n){var r=Ym(e);return n?(Nm("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=Ym(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=Ym(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),Um=function(){function e(t,n,r){p(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return y(e,[{key:"fromFirestore",value:function(e,t){var n=new Ky(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Km(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new Mm(t),n),i.set(n,a)),a}}]),e}();Um.INSTANCES=new WeakMap;var jm=function(){function e(t,n){p(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Mm(t)}return y(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new $m(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new $m(this.firestore,Qv(this._delegate,e))}catch(t){throw qm(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=ae(e))instanceof Kv&&Yv(this._delegate,e)}},{key:"set",value:function(e,t){t=Nm("DocumentReference.set",t);try{return t?km(this._delegate,e,t):km(this._delegate,e)}catch(n){throw qm(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?bm(this._delegate,e):bm.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw qm(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return _m(jv(e.firestore,ty),[new Ds(e._key,ys.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=zm(n),a=Bm(n,(function(t){return new Gm(e.firestore,new Gy(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return wm(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?mm(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=jv(e,Kv);var t=jv(e.firestore,ty);return Pv(ny(t),e._key,{source:"server"}).then((function(n){return Im(t,e,n)}))}(this._delegate):function(e){e=jv(e,Kv);var t=jv(e.firestore,ty);return Pv(ny(t),e._key).then((function(n){return Im(t,e,n)}))}(this._delegate),t.then((function(e){return new Gm(n.firestore,new Gy(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Um.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Ja("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new Kv(n._delegate,r,new Fo(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new Kv(n._delegate,r,t))}}]),e}();function qm(e,t,n){return e.message=e.message.replace(t,n),e}function zm(e){var t,n=m(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!Rm(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function Bm(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=Rm(e[0])?e[0]:Rm(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Gm=function(){function e(t,n){p(this,e),this._firestore=t,this._delegate=n}return y(e,[{key:"ref",get:function(){return new jm(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return Qy(this._delegate,e._delegate)}}]),e}(),Km=function(e){b(n,e);var t=E(n);function n(){return p(this,n),t.apply(this,arguments)}return y(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||Ha()}(void 0!==t),t}}]),n}(Gm),Wm=function(){function e(t,n){p(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Mm(t)}return y(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,Jy(this._delegate,function(e,t,n){var r=t,i=zy("where",e);return new Xy(i,r,n)}(t,n,r)))}catch(i){throw qm(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,Jy(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=zy("orderBy",e);return new Zy(n,t)}(t,n)))}catch(r){throw qm(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,Jy(this._delegate,function(e){return qv("limit",e),new em("limit",e,"F")}(t)))}catch(n){throw qm(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,Jy(this._delegate,function(e){return qv("limitToLast",e),new em("limitToLast",e,"L")}(t)))}catch(n){throw qm(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,Jy(this._delegate,nm.apply(void 0,arguments)))}catch(t){throw qm(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,Jy(this._delegate,rm.apply(void 0,arguments)))}catch(t){throw qm(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,Jy(this._delegate,am.apply(void 0,arguments)))}catch(t){throw qm(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,Jy(this._delegate,om.apply(void 0,arguments)))}catch(t){throw qm(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return Jv(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?gm(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=jv(e,Wv);var t=jv(e.firestore,ty),n=ny(t),r=new ym(t);return Rv(n,e._query,{source:"server"}).then((function(n){return new Wy(t,r,e,n)}))}(this._delegate):function(e){e=jv(e,Wv);var t=jv(e.firestore,ty),n=ny(t),r=new ym(t);return $y(e._query),Rv(n,e._query).then((function(n){return new Wy(t,r,e,n)}))}(this._delegate),t.then((function(e){return new Qm(n.firestore,new Wy(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=zm(n),a=Bm(n,(function(t){return new Qm(e.firestore,new Wy(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return wm(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Um.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),Hm=function(){function e(t,n){p(this,e),this._firestore=t,this._delegate=n}return y(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new Km(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),Qm=function(){function e(t,n){p(this,e),this._firestore=t,this._delegate=n}return y(e,[{key:"query",get:function(){return new Wm(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new Km(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new Hm(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new Km(n._firestore,r))}))}},{key:"isEqual",value:function(e){return Qy(this._delegate,e._delegate)}}]),e}(),$m=function(e){b(n,e);var t=E(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return y(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new jm(this.firestore,e):null}},{key:"doc",value:function(e){try{return new jm(this.firestore,void 0===e?$v(this._delegate):$v(this._delegate,e))}catch(t){throw qm(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=jv(e.firestore,ty),r=$v(e),i=hm(e.converter,t);return _m(n,[wy(by(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,ys.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new jm(t.firestore,e)}))}},{key:"isEqual",value:function(e){return Yv(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(Um.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(Wm);function Ym(e){return jv(e,Kv)}var Jm,Xm=function(){function e(){p(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=S(ly,n)}return y(e,[{key:"isEqual",value:function(e){return(e=ae(e))instanceof ly&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(xo.keyField().canonicalString())}}]),e}(),Zm=function(){function e(t){p(this,e),this._delegate=t}return y(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new Iy("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new xy("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=Tm.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=Cm.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new Ty("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),eg={Firestore:Lm,GeoPoint:dy,Timestamp:po,Blob:Pm,Transaction:Fm,WriteBatch:Vm,DocumentReference:jm,DocumentSnapshot:Gm,Query:Wm,QueryDocumentSnapshot:Km,QuerySnapshot:Qm,CollectionReference:$m,FieldPath:Xm,FieldValue:Zm,setLogLevel:function(e){!function(e){qa.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new pe("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},eg)))})(Jm=wt,(function(e,t){return new Lm(e,t,new Om)})),Jm.registerVersion("@firebase/firestore-compat","0.1.16");function tg(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var ng;Object.create;var rg="facebook.com",ig="github.com",ag="google.com",og="password",ug="twitter.com",sg="EMAIL_SIGNIN",cg="PASSWORD_RESET",lg="RECOVER_EMAIL",fg="REVERT_SECOND_FACTOR_ADDITION",hg="VERIFY_AND_CHANGE_EMAIL",dg="VERIFY_EMAIL";function pg(){return d({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var vg=function(){var e;return d(e={},"admin-restricted-operation","This operation is restricted to administrators only."),d(e,"argument-error",""),d(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),d(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),d(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),d(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),d(e,"cordova-not-ready","Cordova framework is not ready."),d(e,"cors-unsupported","This browser is not supported."),d(e,"credential-already-in-use","This credential is already associated with a different user account."),d(e,"custom-token-mismatch","The custom token corresponds to a different audience."),d(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),d(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),d(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),d(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),d(e,"email-already-in-use","The email address is already in use by another account."),d(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),d(e,"expired-action-code","The action code has expired."),d(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),d(e,"internal-error","An internal AuthError has occurred."),d(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),d(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),d(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),d(e,"invalid-auth-event","An internal AuthError has occurred."),d(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),d(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),d(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),d(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),d(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),d(e,"invalid-email","The email address is badly formatted."),d(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),d(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),d(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),d(e,"invalid-credential","The supplied auth credential is malformed or has expired."),d(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),d(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),d(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),d(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),d(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),d(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),d(e,"wrong-password","The password is invalid or the user does not have a password."),d(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),d(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),d(e,"invalid-provider-id","The specified provider ID is invalid."),d(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),d(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),d(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),d(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),d(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),d(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),d(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),d(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),d(e,"missing-continue-uri","A continue URL must be provided in the request."),d(e,"missing-iframe-start","An internal AuthError has occurred."),d(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),d(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),d(e,"missing-multi-factor-info","No second factor identifier is provided."),d(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),d(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),d(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),d(e,"app-deleted","This instance of FirebaseApp has been deleted."),d(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),d(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),d(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),d(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),d(e,"no-auth-event","An internal AuthError has occurred."),d(e,"no-such-provider","User was not linked to an account with the given provider."),d(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),d(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),d(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),d(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),d(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),d(e,"provider-already-linked","User can only be linked to one identity for the given provider."),d(e,"quota-exceeded","The project's quota for this operation has been exceeded."),d(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),d(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),d(e,"rejected-credential","The request contains malformed or mismatching credentials."),d(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),d(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),d(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),d(e,"timeout","The operation has timed out."),d(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),d(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),d(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),d(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),d(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),d(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),d(e,"unverified-email","The operation requires a verified email."),d(e,"user-cancelled","The user did not grant your application the permissions it requested."),d(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),d(e,"user-disabled","The user account has been disabled by an administrator."),d(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),d(e,"user-signed-out",""),d(e,"weak-password","The password must be 6 characters long or more."),d(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),d(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},yg=pg,mg=new K("auth","Firebase",pg()),gg=new Te("@firebase/auth");function kg(e){if(gg.logLevel<=ge.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];gg.error.apply(gg,["Auth (".concat(Ke,"): ").concat(e)].concat(n))}}function bg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Ig.apply(void 0,[e].concat(n))}function wg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Ig.apply(void 0,[e].concat(n))}function xg(e,t,n){var r=Object.assign(Object.assign({},yg()),d({},t,n));return new K("auth","Firebase",r).create(t,{appName:e.name})}function _g(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&bg(e,"argument-error"),xg(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Ig(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=de(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(de(o)))}return mg.create.apply(mg,[e].concat(n))}function Eg(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Ig.apply(void 0,[t].concat(r))}}function Sg(e){var t="INTERNAL ASSERTION FAILED: "+e;throw kg(t),new Error(t)}function Tg(e,t){e||Sg(t)}var Cg=new Map;function Ng(e){Tg(e instanceof Function,"Expected a class definition");var t=Cg.get(e);return t?(Tg(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Cg.set(e,t),t)}function Ag(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Dg(){return"http:"===Pg()||"https:"===Pg()}function Pg(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Rg=function(){function e(t,n){p(this,e),this.shortDelay=t,this.longDelay=n,Tg(n>t,"Short delay should be less than long delay!"),this.isMobile=M()||U()}return y(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Dg()||V()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Og(e,t){Tg(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Lg=function(){function e(){p(this,e)}return y(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Sg("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Sg("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Sg("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Mg=(d(ng={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),d(ng,"MISSING_CUSTOM_TOKEN","internal-error"),d(ng,"INVALID_IDENTIFIER","invalid-email"),d(ng,"MISSING_CONTINUE_URI","internal-error"),d(ng,"INVALID_PASSWORD","wrong-password"),d(ng,"MISSING_PASSWORD","internal-error"),d(ng,"EMAIL_EXISTS","email-already-in-use"),d(ng,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),d(ng,"INVALID_IDP_RESPONSE","invalid-credential"),d(ng,"INVALID_PENDING_TOKEN","invalid-credential"),d(ng,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),d(ng,"MISSING_REQ_TYPE","internal-error"),d(ng,"EMAIL_NOT_FOUND","user-not-found"),d(ng,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),d(ng,"EXPIRED_OOB_CODE","expired-action-code"),d(ng,"INVALID_OOB_CODE","invalid-action-code"),d(ng,"MISSING_OOB_CODE","internal-error"),d(ng,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),d(ng,"INVALID_ID_TOKEN","invalid-user-token"),d(ng,"TOKEN_EXPIRED","user-token-expired"),d(ng,"USER_NOT_FOUND","user-token-expired"),d(ng,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),d(ng,"INVALID_CODE","invalid-verification-code"),d(ng,"INVALID_SESSION_INFO","invalid-verification-id"),d(ng,"INVALID_TEMPORARY_PROOF","invalid-credential"),d(ng,"MISSING_SESSION_INFO","missing-verification-id"),d(ng,"SESSION_EXPIRED","code-expired"),d(ng,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),d(ng,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),d(ng,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),d(ng,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),d(ng,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),d(ng,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),d(ng,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),d(ng,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),d(ng,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),d(ng,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),d(ng,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),ng),Fg=new Rg(3e4,6e4);function Vg(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Ug(e,t,n,r){return jg.apply(this,arguments)}function jg(){return jg=a(h().mark((function e(t,n,r,i){var o,u=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=u.length>4&&void 0!==u[4]?u[4]:{},e.abrupt("return",qg(t,o,a(h().mark((function e(){var a,o,u,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=J(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Lg.fetch()(Kg(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),jg.apply(this,arguments)}function qg(e,t,n){return zg.apply(this,arguments)}function zg(){return zg=a(h().mark((function e(t,n,r){var i,a,o,u,s,c,f,d,p,v;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Mg),n),e.prev=2,a=new Wg(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw Hg(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,c=s.split(" : "),f=l(c,2),d=f[0],p=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==d){e.next=23;break}throw Hg(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==d){e.next=25;break}throw Hg(t,"email-already-in-use",u);case 25:if(v=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-"),!p){e.next=30;break}throw xg(t,v,p);case 30:bg(t,v);case 31:e.next=38;break;case 33:if(e.prev=33,e.t0=e.catch(2),!(e.t0 instanceof G)){e.next=37;break}throw e.t0;case 37:bg(t,"network-request-failed");case 38:case"end":return e.stop()}}),e,null,[[2,33]])}))),zg.apply(this,arguments)}function Bg(e,t,n,r){return Gg.apply(this,arguments)}function Gg(){return Gg=a(h().mark((function e(t,n,r,i){var a,o,u=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,Ug(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&bg(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Gg.apply(this,arguments)}function Kg(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Og(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Wg=function(){function e(t){var n=this;p(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(wg(n.auth,"network-request-failed"))}),Fg.get())}))}return y(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Hg(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=wg(e,t,r);return i.customData._tokenResponse=n,i}function Qg(e,t){return $g.apply(this,arguments)}function $g(){return $g=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ug(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),$g.apply(this,arguments)}function Yg(e,t){return Jg.apply(this,arguments)}function Jg(){return Jg=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ug(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Jg.apply(this,arguments)}function Xg(e,t){return Zg.apply(this,arguments)}function Zg(){return Zg=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ug(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),Zg.apply(this,arguments)}function ek(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function tk(){return tk=a(h().mark((function e(t){var n,r,i,a,o,u,s=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=ae(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Eg((a=rk(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:ek(nk(a.auth_time)),issuedAtTime:ek(nk(a.iat)),expirationTime:ek(nk(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),tk.apply(this,arguments)}function nk(e){return 1e3*Number(e)}function rk(e){var t=l(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return kg("JWT malformed, contained fewer than 3 sections"),null;try{var a=D(r);return a?JSON.parse(a):(kg("Failed to decode base64 JWT payload"),null)}catch(o){return kg("Caught error parsing JWT payload as JSON",o),null}}function ik(e,t){return ak.apply(this,arguments)}function ak(){return ak=a(h().mark((function e(t,n){var r=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof G&&ok(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),ak.apply(this,arguments)}function ok(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var uk=function(){function e(t){p(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return y(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(a(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),sk=function(){function e(t,n){p(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return y(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=ek(this.lastLoginAt),this.creationTime=ek(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function ck(e){return lk.apply(this,arguments)}function lk(){return lk=a(h().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,ik(t,Xg(r,{idToken:i}));case 6:Eg(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?dk(o.providerUserInfo):[],s=hk(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new sk(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,d);case 17:case"end":return e.stop()}}),e)}))),lk.apply(this,arguments)}function fk(){return(fk=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ae(t),e.next=3,ck(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hk(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(de(n),de(t))}function dk(e){return e.map((function(e){var t=e.providerId,n=tg(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function pk(e,t){return vk.apply(this,arguments)}function vk(){return vk=a(h().mark((function e(t,n){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qg(t,{},a(h().mark((function e(){var r,i,a,o,u,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=J({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=Kg(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Lg.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),vk.apply(this,arguments)}var yk=function(){function e(){p(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return y(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Eg(e.idToken,"internal-error"),Eg("undefined"!==typeof e.idToken,"internal-error"),Eg("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=rk(e);return Eg(t,"internal-error"),Eg("undefined"!==typeof t.exp,"internal-error"),Eg("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=a(h().mark((function e(t){var n,r=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Eg(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=a(h().mark((function e(t,n){var r,i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pk(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Sg("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Eg("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Eg("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Eg("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function mk(e,t){Eg("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var gk=function(){function e(t){p(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=tg(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new uk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?de(a.providerData):[],this.metadata=new sk(a.createdAt||void 0,a.lastLoginAt||void 0)}return y(e,[{key:"getIdToken",value:function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ik(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Eg(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return tk.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return fk.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Eg(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Eg(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=a(h().mark((function e(t){var n,r,i=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,ck(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=a(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,ik(this,Qg(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,x=n.providerData,_=n.stsTokenManager;Eg(k&&_,t,"internal-error");var I=yk.fromJSON(this.name,_);Eg("string"===typeof k,t,"internal-error"),mk(f,t.name),mk(h,t.name),Eg("boolean"===typeof b,t,"internal-error"),Eg("boolean"===typeof w,t,"internal-error"),mk(d,t.name),mk(p,t.name),mk(v,t.name),mk(y,t.name),mk(m,t.name),mk(g,t.name);var E=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:m,lastLoginAt:g});return x&&Array.isArray(x)&&(E.providerData=x.map((function(e){return Object.assign({},e)}))),y&&(E._redirectEventId=y),E}},{key:"_fromIdTokenResponse",value:function(){var t=a(h().mark((function t(n,r){var i,a,o,u=arguments;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new yk).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,ck(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),kk=function(){function e(){p(this,e),this.type="NONE",this.storage={}}return y(e,[{key:"_isAvailable",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();kk.type="NONE";var bk=kk;function wk(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var xk=function(){function e(t,n,r){p(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=wk(this.userKey,a.apiKey,o),this.fullPersistenceKey=wk("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return y(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=a(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?gk._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=a(h().mark((function t(n,r){var i,o,u,s,c,l,f,d,p,v,y,g=arguments;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=g.length>2&&void 0!==g[2]?g[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Ng(bk),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:o=t.sent.filter((function(e){return e})),u=o[0]||Ng(bk),s=wk(i,n.config.apiKey,n.name),c=null,l=m(r),t.prev=10,l.s();case 12:if((f=l.n()).done){t.next=29;break}return d=f.value,t.prev=14,t.next=17,d._get(s);case 17:if(!(p=t.sent)){t.next=23;break}return v=gk._fromJSON(n,p),d!==u&&(c=v),u=d,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),l.e(t.t1);case 34:return t.prev=34,l.f(),t.finish(34);case 37:if(y=o.filter((function(e){return e._shouldAllowMigration})),u._shouldAllowMigration&&y.length){t.next=40;break}return t.abrupt("return",new e(u,n,i));case 40:if(u=y[0],!c){t.next=44;break}return t.next=44,u._set(s,c.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===u){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(u,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function _k(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Tk(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ik(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Nk(t))return"Blackberry";if(Ak(t))return"Webos";if(Ek(t))return"Safari";if((t.includes("chrome/")||Sk(t))&&!t.includes("edge/"))return"Chrome";if(Ck(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Ik(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return/firefox\//i.test(e)}function Ek(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Sk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return/crios\//i.test(e)}function Tk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return/iemobile/i.test(e)}function Ck(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return/android/i.test(e)}function Nk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return/blackberry/i.test(e)}function Ak(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return/webos/i.test(e)}function Dk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return/iphone|ipad|ipod/i.test(e)}function Pk(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return Dk(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function Rk(){return j()&&10===document.documentMode}function Ok(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return Dk(e)||Ck(e)||Ak(e)||Nk(e)||/windows phone/i.test(e)||Tk(e)}function Lk(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=_k(L());break;case"Worker":t="".concat(_k(L()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Ke,"/").concat(r)}var Mk=function(){function e(t,n,r){p(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Vk(this),this.idTokenSubscription=new Vk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mg,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return y(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Ng(t)),this._initializationPromise=this.queue(a(h().mark((function r(){var i,a;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,xk.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=a(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=a(h().mark((function e(t){var n,r,i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,!t||!this.config.authDomain){e.next=12;break}return e.next=6,this.getOrInitRedirectPersistenceManager();case 6:return i=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,a=null===r||void 0===r?void 0:r._redirectEventId,e.next=10,this.tryRedirectSignIn(t);case 10:o=e.sent,i&&i!==a||!(null===o||void 0===o?void 0:o.user)||(r=o.user);case 12:if(r){e.next=14;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 14:if(r._redirectEventId){e.next=16;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 16:return Eg(this._popupRedirectResolver,this,"argument-error"),e.next=19,this.getOrInitRedirectPersistenceManager();case 19:if(!this.redirectUser||this.redirectUser._redirectEventId!==r._redirectEventId){e.next=21;break}return e.abrupt("return",this.directlySetCurrentUser(r));case 21:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ck(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?ae(t):null)&&Eg(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=a(h().mark((function e(t){var n=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return t&&Eg(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e.abrupt("return",this.queue(a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.directlySetCurrentUser(t);case 2:n.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=3;break}return e.next=3,this._setRedirectUser(null);case 3:return e.abrupt("return",this._updateCurrentUser(null));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(a(h().mark((function n(){return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Ng(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new K("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=a(h().mark((function e(t,n){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Eg(n=t&&Ng(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,xk.create(this,[Ng(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=a(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=a(h().mark((function e(t){var n=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Eg(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Eg(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Lk(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=a(h().mark((function e(){var t,n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Fk(e){return ae(e)}var Vk=function(){function e(t){var n=this;p(this,e),this.auth=t,this.observer=null,this.addObserver=ee((function(e){return n.observer=e}))}return y(e,[{key:"next",get:function(){return Eg(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Uk(e,t,n){var r=Fk(e);Eg(r._canInitEmulator,r,"emulator-config-failed"),Eg(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=jk(t),o=function(e){var t=jk(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:qk(r.substr(a.length+1))}}var o=l(r.split(":"),2);return{host:o[0],port:qk(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function jk(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function qk(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var zk=function(){function e(t,n){p(this,e),this.providerId=t,this.signInMethod=n}return y(e,[{key:"toJSON",value:function(){return Sg("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Sg("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Sg("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Sg("not implemented")}}]),e}();function Bk(e,t){return Gk.apply(this,arguments)}function Gk(){return Gk=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ug(t,"POST","/v1/accounts:resetPassword",Vg(t,n)));case 1:case"end":return e.stop()}}),e)}))),Gk.apply(this,arguments)}function Kk(e,t){return Wk.apply(this,arguments)}function Wk(){return Wk=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ug(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Wk.apply(this,arguments)}function Hk(e,t){return Qk.apply(this,arguments)}function Qk(){return Qk=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ug(t,"POST","/v1/accounts:update",Vg(t,n)));case 1:case"end":return e.stop()}}),e)}))),Qk.apply(this,arguments)}function $k(e,t){return Yk.apply(this,arguments)}function Yk(){return Yk=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Bg(t,"POST","/v1/accounts:signInWithPassword",Vg(t,n)));case 1:case"end":return e.stop()}}),e)}))),Yk.apply(this,arguments)}function Jk(e,t){return Xk.apply(this,arguments)}function Xk(){return Xk=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ug(t,"POST","/v1/accounts:sendOobCode",Vg(t,n)));case 1:case"end":return e.stop()}}),e)}))),Xk.apply(this,arguments)}function Zk(e,t){return eb.apply(this,arguments)}function eb(){return eb=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jk(t,n));case 1:case"end":return e.stop()}}),e)}))),eb.apply(this,arguments)}function tb(e,t){return nb.apply(this,arguments)}function nb(){return nb=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jk(t,n));case 1:case"end":return e.stop()}}),e)}))),nb.apply(this,arguments)}function rb(e,t){return ib.apply(this,arguments)}function ib(){return ib=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jk(t,n));case 1:case"end":return e.stop()}}),e)}))),ib.apply(this,arguments)}function ab(e,t){return ob.apply(this,arguments)}function ob(){return ob=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jk(t,n));case 1:case"end":return e.stop()}}),e)}))),ob.apply(this,arguments)}function ub(e,t){return sb.apply(this,arguments)}function sb(){return sb=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Bg(t,"POST","/v1/accounts:signInWithEmailLink",Vg(t,n)));case 1:case"end":return e.stop()}}),e)}))),sb.apply(this,arguments)}function cb(e,t){return lb.apply(this,arguments)}function lb(){return lb=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Bg(t,"POST","/v1/accounts:signInWithEmailLink",Vg(t,n)));case 1:case"end":return e.stop()}}),e)}))),lb.apply(this,arguments)}var fb=function(e){b(n,e);var t=E(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return p(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return y(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",$k(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",ub(t,{email:this._email,oobCode:this._password}));case 5:bg(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Kk(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",cb(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:bg(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(zk);function hb(e,t){return db.apply(this,arguments)}function db(){return db=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Bg(t,"POST","/v1/accounts:signInWithIdp",Vg(t,n)));case 1:case"end":return e.stop()}}),e)}))),db.apply(this,arguments)}var pb=function(e){b(n,e);var t=E(n);function n(){var e;return p(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return y(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return hb(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,hb(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,hb(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=J(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):bg("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=tg(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(zk);function vb(e,t){return yb.apply(this,arguments)}function yb(){return yb=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ug(t,"POST","/v1/accounts:sendVerificationCode",Vg(t,n)));case 1:case"end":return e.stop()}}),e)}))),yb.apply(this,arguments)}function mb(){return mb=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Bg(t,"POST","/v1/accounts:signInWithPhoneNumber",Vg(t,n)));case 1:case"end":return e.stop()}}),e)}))),mb.apply(this,arguments)}function gb(){return gb=a(h().mark((function e(t,n){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bg(t,"POST","/v1/accounts:signInWithPhoneNumber",Vg(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Hg(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),gb.apply(this,arguments)}var kb=d({},"USER_NOT_FOUND","user-not-found");function bb(){return bb=a(h().mark((function e(t,n){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Bg(t,"POST","/v1/accounts:signInWithPhoneNumber",Vg(t,r),kb));case 2:case"end":return e.stop()}}),e)}))),bb.apply(this,arguments)}var wb=function(e){b(n,e);var t=E(n);function n(e){var r;return p(this,n),(r=t.call(this,"phone","phone")).params=e,r}return y(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return mb.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return gb.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return bb.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(zk);var xb=function(){function e(t){var n,r,i,a,o,u;p(this,e);var s=X(Z(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);Eg(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return y(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=X(Z(e)).link,n=t?X(Z(t)).deep_link_id:null,r=X(Z(e)).deep_link_id;return(r?X(Z(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(Bp){return null}}}]),e}();var _b=function(){function e(){p(this,e),this.providerId=e.PROVIDER_ID}return y(e,null,[{key:"credential",value:function(e,t){return fb._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=xb.parseLink(t);return Eg(n,"argument-error"),fb._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();_b.PROVIDER_ID="password",_b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_b.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Ib=function(){function e(t){p(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return y(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Eb=function(e){b(n,e);var t=E(n);function n(){var e;return p(this,n),(e=t.apply(this,arguments)).scopes=[],e}return y(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return de(this.scopes)}}]),n}(Ib),Sb=function(e){b(n,e);var t=E(n);function n(){return p(this,n),t.apply(this,arguments)}return y(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Eg(e.idToken||e.accessToken,"argument-error"),pb._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Eg("providerId"in t&&"signInMethod"in t,"argument-error"),pb._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(Eb),Tb=function(e){b(n,e);var t=E(n);function n(){return p(this,n),t.call(this,"facebook.com")}return y(n,null,[{key:"credential",value:function(e){return pb._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(Bp){return null}}}]),n}(Eb);Tb.FACEBOOK_SIGN_IN_METHOD="facebook.com",Tb.PROVIDER_ID="facebook.com";var Cb=function(e){b(n,e);var t=E(n);function n(){var e;return p(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return y(n,null,[{key:"credential",value:function(e,t){return pb._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(Bp){return null}}}]),n}(Eb);Cb.GOOGLE_SIGN_IN_METHOD="google.com",Cb.PROVIDER_ID="google.com";var Nb=function(e){b(n,e);var t=E(n);function n(){return p(this,n),t.call(this,"github.com")}return y(n,null,[{key:"credential",value:function(e){return pb._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(Bp){return null}}}]),n}(Eb);Nb.GITHUB_SIGN_IN_METHOD="github.com",Nb.PROVIDER_ID="github.com";var Ab=function(e){b(n,e);var t=E(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return y(n,[{key:"_getIdTokenResponse",value:function(e){return hb(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,hb(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,hb(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(zk),Db=function(e){b(n,e);var t=E(n);function n(e){return p(this,n),Eg(e.startsWith("saml."),"argument-error"),t.call(this,e)}return y(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Ab.fromJSON(e);return Eg(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Ab._create(r,n)}catch(i){return null}}}]),n}(Ib),Pb=function(e){b(n,e);var t=E(n);function n(){return p(this,n),t.call(this,"twitter.com")}return y(n,null,[{key:"credential",value:function(e,t){return pb._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(Bp){return null}}}]),n}(Eb);function Rb(e,t){return Ob.apply(this,arguments)}function Ob(){return Ob=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Bg(t,"POST","/v1/accounts:signUp",Vg(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ob.apply(this,arguments)}Pb.TWITTER_SIGN_IN_METHOD="twitter.com",Pb.PROVIDER_ID="twitter.com";var Lb=function(){function e(t){p(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return y(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=a(h().mark((function t(n,r,i){var a,o,u,s,c=arguments;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,gk._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=Mb(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=a(h().mark((function t(n,r,i){var a;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Mb(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Mb(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Fb(){return Fb=a(h().mark((function e(t){var n,r,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fk(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Lb({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Rb(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Lb._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),Fb.apply(this,arguments)}var Vb=function(e){b(n,e);var t=E(n);function n(e,r,i,a){var o,u;return p(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(g(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return y(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(G);function Ub(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Vb._fromErrorAndOperation(e,n,t,r);throw n}))}function jb(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function qb(e,t){return zb.apply(this,arguments)}function zb(){return zb=a(h().mark((function e(t,n){var r,i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ae(t),e.next=3,Kb(!0,r,n);case 3:return e.t0=Yg,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=jb(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),zb.apply(this,arguments)}function Bb(e,t){return Gb.apply(this,arguments)}function Gb(){return Gb=a(h().mark((function e(t,n){var r,i,a=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=ik,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Lb._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Gb.apply(this,arguments)}function Kb(e,t,n){return Wb.apply(this,arguments)}function Wb(){return(Wb=a(h().mark((function e(t,n,r){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ck(n);case 2:i=jb(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Eg(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hb(e,t){return Qb.apply(this,arguments)}function Qb(){return Qb=a(h().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,ik(t,Ub(i,a,n,t),r);case 6:return Eg((o=e.sent).idToken,i,"internal-error"),Eg(u=rk(o.idToken),i,"internal-error"),s=u.sub,Eg(t.uid===s,i,"user-mismatch"),e.abrupt("return",Lb._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&bg(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Qb.apply(this,arguments)}function $b(e,t){return Yb.apply(this,arguments)}function Yb(){return Yb=a(h().mark((function e(t,n){var r,i,a,o,u=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,Ub(t,i,n);case 4:return a=e.sent,e.next=7,Lb._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Yb.apply(this,arguments)}function Jb(e,t){return Xb.apply(this,arguments)}function Xb(){return Xb=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$b(Fk(t),n));case 1:case"end":return e.stop()}}),e)}))),Xb.apply(this,arguments)}function Zb(e,t){return ew.apply(this,arguments)}function ew(){return(ew=a(h().mark((function e(t,n){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ae(t),e.next=3,Kb(!1,r,n.providerId);case 3:return e.abrupt("return",Bb(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tw(e,t){return nw.apply(this,arguments)}function nw(){return(nw=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hb(ae(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rw(e,t){return iw.apply(this,arguments)}function iw(){return iw=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Bg(t,"POST","/v1/accounts:signInWithCustomToken",Vg(t,n)));case 1:case"end":return e.stop()}}),e)}))),iw.apply(this,arguments)}function aw(){return aw=a(h().mark((function e(t,n){var r,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fk(t),e.next=3,rw(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Lb._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),aw.apply(this,arguments)}var ow=function(){function e(t,n){p(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return y(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?uw._fromServerResponse(e,t):bg(e,"internal-error")}}]),e}(),uw=function(e){b(n,e);var t=E(n);function n(e){var r;return p(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return y(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(ow);function sw(e,t,n){var r;Eg((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Eg("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Eg(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Eg(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function cw(){return cw=a(h().mark((function e(t,n,r){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ae(t),a={requestType:"PASSWORD_RESET",email:n},r&&sw(i,a,r),e.next=5,tb(i,a);case 5:case"end":return e.stop()}}),e)}))),cw.apply(this,arguments)}function lw(){return lw=a(h().mark((function e(t,n,r){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bk(ae(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),lw.apply(this,arguments)}function fw(){return fw=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hk(ae(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),fw.apply(this,arguments)}function hw(e,t){return dw.apply(this,arguments)}function dw(){return dw=a(h().mark((function e(t,n){var r,i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ae(t),e.next=3,Bk(r,{oobCode:n});case 3:i=e.sent,Eg(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Eg(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Eg(i.mfaInfo,r,"internal-error");case 13:Eg(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=ow._fromServerResponse(Fk(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),dw.apply(this,arguments)}function pw(){return pw=a(h().mark((function e(t,n){var r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hw(ae(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),pw.apply(this,arguments)}function vw(e,t,n){return yw.apply(this,arguments)}function yw(){return yw=a(h().mark((function e(t,n,r){var i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Fk(t),e.next=3,Rb(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,Lb._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),yw.apply(this,arguments)}function mw(){return mw=a(h().mark((function e(t,n,r){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ae(t),a={requestType:"EMAIL_SIGNIN",email:n},Eg(r.handleCodeInApp,i,"argument-error"),r&&sw(i,a,r),e.next=6,rb(i,a);case 6:case"end":return e.stop()}}),e)}))),mw.apply(this,arguments)}function gw(){return gw=a(h().mark((function e(t,n,r){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ae(t),Eg((a=_b.credentialWithLink(n,r||Ag()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Jb(i,a));case 4:case"end":return e.stop()}}),e)}))),gw.apply(this,arguments)}function kw(e,t){return bw.apply(this,arguments)}function bw(){return bw=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ug(t,"POST","/v1/accounts:createAuthUri",Vg(t,n)));case 1:case"end":return e.stop()}}),e)}))),bw.apply(this,arguments)}function ww(){return ww=a(h().mark((function e(t,n){var r,i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Dg()?Ag():"http://localhost",i={identifier:n,continueUri:r},e.next=4,kw(ae(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),ww.apply(this,arguments)}function xw(){return(xw=a(h().mark((function e(t,n){var r,i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ae(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&sw(r.auth,a,n),e.next=8,Zk(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _w(){return(_w=a(h().mark((function e(t,n,r){var i,a,o,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ae(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&sw(i.auth,o,r),e.next=8,ab(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Iw(e,t){return Ew.apply(this,arguments)}function Ew(){return Ew=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ug(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Ew.apply(this,arguments)}function Sw(){return(Sw=a(h().mark((function e(t,n){var r,i,a,o,u,s,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=ae(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,ik(a,Iw(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tw(e,t,n){return Cw.apply(this,arguments)}function Cw(){return Cw=a(h().mark((function e(t,n,r){var i,a,o,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,ik(t,Kk(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)}))),Cw.apply(this,arguments)}var Nw=y((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};p(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Aw=function(e){b(n,e);var t=E(n);function n(e,r,i,a){var o;return p(this,n),(o=t.call(this,e,r,i)).username=a,o}return y(n)}(Nw),Dw=function(e){b(n,e);var t=E(n);function n(e,r){return p(this,n),t.call(this,e,"facebook.com",r)}return y(n)}(Nw),Pw=function(e){b(n,e);var t=E(n);function n(e,r){return p(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return y(n)}(Aw),Rw=function(e){b(n,e);var t=E(n);function n(e,r){return p(this,n),t.call(this,e,"google.com",r)}return y(n)}(Nw),Ow=function(e){b(n,e);var t=E(n);function n(e,r,i){return p(this,n),t.call(this,e,"twitter.com",r,i)}return y(n)}(Aw);function Lw(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=rk(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Nw(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Dw(a,i);case"github.com":return new Pw(a,i);case"google.com":return new Rw(a,i);case"twitter.com":return new Ow(a,i,e.screenName||null);case"custom":case"anonymous":return new Nw(a,null);default:return new Nw(a,r,i)}}(n)}var Mw=function(){function e(t,n){p(this,e),this.type=t,this.credential=n}return y(e,[{key:"toJSON",value:function(){return{multiFactorSession:d({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Fw=function(){function e(t,n,r){p(this,e),this.session=t,this.hints=n,this.signInResolver=r}return y(e,[{key:"resolveSignIn",value:function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=Fk(t),i=n.customData._serverResponse,o=(i.mfaInfo||[]).map((function(e){return ow._fromServerResponse(r,e)}));Eg(i.mfaPendingCredential,r,"internal-error");var u=Mw._fromMfaPendingCredential(i.mfaPendingCredential);return new e(u,o,function(){var e=a(h().mark((function e(t){var a,o,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,u);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,o=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Lb._fromIdTokenResponse(r,n.operationType,o);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return Eg(n.user,r,"internal-error"),e.abrupt("return",Lb._forOperation(n.user,n.operationType,o));case 17:bg(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function Vw(e,t){return Ug(e,"POST","/v2/accounts/mfaEnrollment:start",Vg(e,t))}function Uw(e,t){return Ug(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Vg(e,t))}var jw=function(){function e(t){var n=this;p(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return ow._fromServerResponse(t.auth,e)})))}))}return y(e,[{key:"getSession",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Mw,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=a(h().mark((function e(t,n){var r,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,ik(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=a(h().mark((function e(t){var n,r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,ik(this.user,Uw(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),qw=new WeakMap;var zw="__sak",Bw=function(){function e(t,n){p(this,e),this.storageRetriever=t,this.type=n}return y(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(zw,"1"),this.storage.removeItem(zw),Promise.resolve(!0)):Promise.resolve(!1)}catch(Bp){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Gw=function(e){b(n,e);var t=E(n);function n(){var e;return p(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=L();return Ek(e)||Dk(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Ok(),e._shouldAllowMigration=!0,e}return y(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Rk()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=a(h().mark((function e(t,r){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_t(w(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=a(h().mark((function e(t){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_t(w(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_t(w(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Bw);Gw.type="LOCAL";var Kw=Gw,Ww=function(e){b(n,e);var t=E(n);function n(){return p(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return y(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Bw);Ww.type="SESSION";var Hw=Ww;function Qw(e){return Promise.all(e.map(function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var $w=function(){function e(t){p(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return y(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=a(h().mark((function e(t){var n,r,i,o,u,s,c,l;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,o=r.eventType,u=r.data,null===(s=this.handlersMap[o])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:o}),c=Array.from(s).map(function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,u));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Qw(c);case 9:l=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Yw(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}$w.receivers=[];var Jw=function(){function e(t){p(this,e),this.target=t,this.handlers=new Set}return y(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=a(h().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=Yw("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Xw(){return window}function Zw(){return"undefined"!==typeof Xw().WorkerGlobalScope&&"function"===typeof Xw().importScripts}function ex(){return tx.apply(this,arguments)}function tx(){return(tx=a(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function nx(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var rx="firebaseLocalStorageDb",ix="firebaseLocalStorage",ax="fbase_key",ox=function(){function e(t){p(this,e),this.request=t}return y(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function ux(e,t){return e.transaction([ix],t?"readwrite":"readonly").objectStore(ix)}function sx(){var e=indexedDB.deleteDatabase(rx);return new ox(e).toPromise()}function cx(){var e=indexedDB.open(rx,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(ix,{keyPath:ax})}catch(r){n(r)}})),e.addEventListener("success",a(h().mark((function n(){var r;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(ix)){n.next=12;break}return r.close(),n.next=5,sx();case 5:return n.t0=t,n.next=8,cx();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function lx(e,t,n){return fx.apply(this,arguments)}function fx(){return fx=a(h().mark((function e(t,n,r){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ux(t,!0).put((d(i={},ax,n),d(i,"value",r),i)),e.abrupt("return",new ox(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),fx.apply(this,arguments)}function hx(e,t){return dx.apply(this,arguments)}function dx(){return dx=a(h().mark((function e(t,n){var r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ux(t,!1).get(n),e.next=3,new ox(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),dx.apply(this,arguments)}function px(e,t){var n=ux(e,!0).delete(t);return new ox(n).toPromise()}var vx=function(){function e(){p(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return y(e,[{key:"_openDb",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,cx();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=a(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zw()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=a(h().mark((function e(){var t=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=$w._getInstance(Zw()?self:null),this.receiver._subscribe("keyChanged",function(){var e=a(h().mark((function e(n,r){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=a(h().mark((function e(){var t,n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ex();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Jw(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&nx()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=a(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,cx();case 5:return t=e.sent,e.next=8,lx(t,zw,"1");case 8:return e.next=10,px(t,zw);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=a(h().mark((function e(t,n){var r=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return lx(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return hx(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=a(h().mark((function e(t){var n=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return px(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=a(h().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=ux(e,!1).getAll();return new ox(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=m(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(a(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();vx.type="LOCAL";var yx=vx;function mx(e,t){return Ug(e,"POST","/v2/accounts/mfaSignIn:start",Vg(e,t))}function gx(e){return kx.apply(this,arguments)}function kx(){return kx=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ug(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),kx.apply(this,arguments)}function bx(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=wg("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function wx(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var xx=1e12,_x=function(){function e(t){p(this,e),this.auth=t,this.counter=xx,this._widgets=new Map}return y(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Ix(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||xx;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||xx;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=a(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||xx,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Ix=function(){function e(t,n,r){var i=this;p(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Eg(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return y(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var Ex=wx("rcb"),Sx=new Rg(3e4,6e4),Tx="https://www.google.com/recaptcha/api.js?",Cx=function(){function e(){p(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Xw().grecaptcha}return y(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Eg(Nx(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Xw().grecaptcha):new Promise((function(r,i){var a=Xw().setTimeout((function(){i(wg(e,"network-request-failed"))}),Sx.get());Xw()[Ex]=function(){Xw().clearTimeout(a),delete Xw()[Ex];var o=Xw().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(wg(e,"internal-error"))},bx("".concat(Tx,"?").concat(J({onload:Ex,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(wg(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!Xw().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function Nx(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var Ax=function(){function e(){p(this,e)}return y(e,[{key:"load",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new _x(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Dx="recaptcha",Px={theme:"light",type:"image"},Rx=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},Px),r=arguments.length>2?arguments[2]:void 0;p(this,e),this.parameters=n,this.type=Dx,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Fk(r),this.isInvisible="invisible"===this.parameters.size,Eg("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;Eg(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ax:new Cx,this.validateStartingState()}return y(e,[{key:"verify",value:function(){var e=a(h().mark((function e(){var t,n,r,i=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Eg(!this.parameters.sitekey,this.auth,"argument-error"),Eg(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Eg("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Xw()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Eg(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=a(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=a(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Eg(Dg()&&!Zw(),this.auth,"internal-error"),e.next=3,Ox();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,gx(this.auth);case 8:Eg(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Eg(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function Ox(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var Lx=function(){function e(t,n){p(this,e),this.verificationId=t,this.onConfirmation=n}return y(e,[{key:"confirm",value:function(e){var t=wb._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function Mx(){return Mx=a(h().mark((function e(t,n,r){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Fk(t),e.next=3,jx(i,n,ae(r));case 3:return a=e.sent,e.abrupt("return",new Lx(a,(function(e){return Jb(i,e)})));case 5:case"end":return e.stop()}}),e)}))),Mx.apply(this,arguments)}function Fx(e,t,n){return Vx.apply(this,arguments)}function Vx(){return(Vx=a(h().mark((function e(t,n,r){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ae(t),e.next=3,Kb(!1,i,"phone");case 3:return e.next=5,jx(i.auth,n,ae(r));case 5:return a=e.sent,e.abrupt("return",new Lx(a,(function(e){return Zb(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ux(){return(Ux=a(h().mark((function e(t,n,r){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ae(t),e.next=3,jx(i.auth,n,ae(r));case 3:return a=e.sent,e.abrupt("return",new Lx(a,(function(e){return tw(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jx(e,t,n){return qx.apply(this,arguments)}function qx(){return qx=a(h().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Eg("string"===typeof a,t,"argument-error"),Eg(r.type===Dx,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return Eg("enroll"===u.type,t,"internal-error"),e.next=13,Vw(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return Eg("signin"===u.type,t,"internal-error"),Eg(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,mx(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,vb(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,d=f.sessionInfo,e.abrupt("return",d);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),qx.apply(this,arguments)}function zx(){return(zx=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bb(ae(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Bx=function(){function e(t){p(this,e),this.providerId=e.PROVIDER_ID,this.auth=Fk(t)}return y(e,[{key:"verifyPhoneNumber",value:function(e,t){return jx(this.auth,e,ae(t))}}],[{key:"credential",value:function(e,t){return wb._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?wb._fromTokenResponse(n,r):null}}]),e}();function Gx(e,t){return t?Ng(t):(Eg(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Bx.PROVIDER_ID="phone",Bx.PHONE_SIGN_IN_METHOD="phone";var Kx=function(e){b(n,e);var t=E(n);function n(e){var r;return p(this,n),(r=t.call(this,"custom","custom")).params=e,r}return y(n,[{key:"_getIdTokenResponse",value:function(e){return hb(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return hb(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return hb(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(zk);function Wx(e){return $b(e.auth,new Kx(e),e.bypassAuthState)}function Hx(e){var t=e.auth,n=e.user;return Eg(n,t,"internal-error"),Hb(n,new Kx(e),e.bypassAuthState)}function Qx(e){return $x.apply(this,arguments)}function $x(){return $x=a(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Eg(r=t.user,n,"internal-error"),e.abrupt("return",Bb(r,new Kx(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),$x.apply(this,arguments)}var Yx=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];p(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return y(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=a(h().mark((function t(n,r){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=a(h().mark((function e(t){var n,r,i,a,o,u,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Wx;case"linkViaPopup":case"linkViaRedirect":return Qx;case"reauthViaPopup":case"reauthViaRedirect":return Hx;default:bg(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Tg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Tg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Jx=new Rg(2e3,1e4);function Xx(e,t,n){return Zx.apply(this,arguments)}function Zx(){return Zx=a(h().mark((function e(t,n,r){var i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Fk(t),_g(t,n,Ib),a=Gx(i,r),o=new r_(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),Zx.apply(this,arguments)}function e_(){return(e_=a(h().mark((function e(t,n,r){var i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _g((i=ae(t)).auth,n,Ib),a=Gx(i.auth,r),o=new r_(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t_(e,t,n){return n_.apply(this,arguments)}function n_(){return(n_=a(h().mark((function e(t,n,r){var i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _g((i=ae(t)).auth,n,Ib),a=Gx(i.auth,r),o=new r_(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var r_=function(e){b(n,e);var t=E(n);function n(e,r,i,a,o){var u;return p(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=g(u),u}return y(n,[{key:"executeNotNull",value:function(){var e=a(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Eg(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=a(h().mark((function e(){var t,n=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Tg(1===this.filter.length,"Popup operations only handle one event"),t=Yw(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(wg(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(wg(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(wg(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Jx.get())}()}}]),n}(Yx);r_.currentPopupAction=null;var i_=new Map,a_=function(e){b(n,e);var t=E(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return p(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return y(n,[{key:"execute",value:function(){var e=a(h().mark((function e(){var t,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i_.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,o_(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,_t(w(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:i_.set(this.auth._key(),t);case 21:return this.bypassAuthState||i_.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=a(h().mark((function e(t){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",_t(w(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",_t(w(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Yx);function o_(e,t){return u_.apply(this,arguments)}function u_(){return u_=a(h().mark((function e(t,n){var r,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f_(n),i=l_(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),u_.apply(this,arguments)}function s_(e,t){return c_.apply(this,arguments)}function c_(){return c_=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l_(t)._set(f_(n),"true"));case 1:case"end":return e.stop()}}),e)}))),c_.apply(this,arguments)}function l_(e){return Ng(e._redirectPersistence)}function f_(e){return wk("pendingRedirect",e.config.apiKey,e.name)}function h_(e,t,n){return function(e,t,n){return d_.apply(this,arguments)}(e,t,n)}function d_(){return d_=a(h().mark((function e(t,n,r){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Fk(t),_g(t,n,Ib),a=Gx(i,r),e.next=5,s_(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)}))),d_.apply(this,arguments)}function p_(e,t,n){return function(e,t,n){return v_.apply(this,arguments)}(e,t,n)}function v_(){return(v_=a(h().mark((function e(t,n,r){var i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _g((i=ae(t)).auth,n,Ib),a=Gx(i.auth,r),e.next=5,s_(a,i.auth);case 5:return e.next=7,x_(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y_(e,t,n){return function(e,t,n){return m_.apply(this,arguments)}(e,t,n)}function m_(){return(m_=a(h().mark((function e(t,n,r){var i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _g((i=ae(t)).auth,n,Ib),a=Gx(i.auth,r),e.next=5,Kb(!1,i,n.providerId);case 5:return e.next=7,s_(a,i.auth);case 7:return e.next=9,x_(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g_(e,t){return k_.apply(this,arguments)}function k_(){return k_=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fk(t)._initializationPromise;case 2:return e.abrupt("return",b_(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),k_.apply(this,arguments)}function b_(e,t){return w_.apply(this,arguments)}function w_(){return w_=a(h().mark((function e(t,n){var r,i,a,o,u,s=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=Fk(t),a=Gx(i,n),o=new a_(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),w_.apply(this,arguments)}function x_(e){return __.apply(this,arguments)}function __(){return(__=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Yw("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var I_=function(){function e(t){p(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return y(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return S_(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!S_(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(wg(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(E_(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(E_(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function E_(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function S_(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function T_(e){return C_.apply(this,arguments)}function C_(){return C_=a(h().mark((function e(t){var n,r=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Ug(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),C_.apply(this,arguments)}var N_=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,A_=/^https?/;function D_(){return D_=a(h().mark((function e(t){var n,r,i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,T_(t);case 4:n=e.sent,r=n.authorizedDomains,i=m(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!P_(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:bg(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),D_.apply(this,arguments)}function P_(e){var t=Ag(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!A_.test(r))return!1;if(N_.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var R_=new Rg(3e4,6e4);function O_(){var e=Xw().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=de(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var L_=null;function M_(e){return L_=L_||function(e){return new Promise((function(t,n){var r,i,a;function o(){O_(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){O_(),n(wg(e,"network-request-failed"))},timeout:R_.get()})}if(null===(i=null===(r=Xw().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Xw().gapi)||void 0===a?void 0:a.load)){var u=wx("iframefcb");return Xw()[u]=function(){gapi.load?o():n(wg(e,"network-request-failed"))},bx("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw L_=null,e}))}(e),L_}var F_=new Rg(5e3,15e3),V_={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},U_=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function j_(e){var t=e.config;Eg(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Og(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Ke},i=U_.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(J(r).slice(1))}function q_(e){return z_.apply(this,arguments)}function z_(){return z_=a(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M_(t);case 2:return n=e.sent,Eg(r=Xw().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:j_(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:V_,dontclear:!0},(function(e){return new Promise(function(){var n=a(h().mark((function n(r,i){var a,o,u;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){Xw().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=wg(t,"network-request-failed"),o=Xw().setTimeout((function(){i(a)}),F_.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),z_.apply(this,arguments)}var B_={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},G_="_blank",K_="http://localhost",W_=function(){function e(t){p(this,e),this.window=t,this.associatedEvent=null}return y(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function H_(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},B_),{width:r.toString(),height:i.toString(),top:a,left:o}),c=L().toLowerCase();n&&(u=Sk(c)?G_:n),Ik(c)&&(t=t||K_,s.scrollbars="yes");var f=Object.entries(s).reduce((function(e,t){var n=l(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(Pk(c)&&"_self"!==u)return Q_(t||"",u),new W_(null);var h=window.open(t||"",u,f);Eg(h,e,"popup-blocked");try{h.focus()}catch(d){}return new W_(h)}function Q_(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var $_="__/auth/handler",Y_="emulator/auth/handler";function J_(e,t,n,r,i,a){Eg(e.config.authDomain,e,"auth-domain-config-required"),Eg(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Ke,eventId:i};if(t instanceof Ib){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var c=l(s[u],2),f=c[0],h=c[1];o[f]=h}}if(t instanceof Eb){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,y=Object.keys(p);v<y.length;v++){var m=y[v];void 0===p[m]&&delete p[m]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat($_);return Og(t,Y_)}(e),"?").concat(J(p).slice(1))}var X_="webStorageSupport",Z_=function(){function e(){p(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Hw,this._completeRedirectFn=b_}return y(e,[{key:"_openPopup",value:function(){var e=a(h().mark((function e(t,n,r,i){var a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Tg(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=J_(t,n,r,Ag(),i),e.abrupt("return",H_(t,o,Yw()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=a(h().mark((function e(t,n,r,i){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=J_(t,n,r,Ag(),i),Xw().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Tg(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=a(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q_(t);case 2:return n=e.sent,r=new I_(t),n.register("authEvent",(function(e){return Eg(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(X_,{type:X_},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),bg(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return D_.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Ok()||Ek()||Dk()}}]),e}(),eI=Z_,tI=function(){function e(t){p(this,e),this.factorId=t}return y(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Sg("unexpected MultiFactorSessionType")}}}]),e}(),nI=function(e){b(n,e);var t=E(n);function n(e){var r;return p(this,n),(r=t.call(this,"phone")).credential=e,r}return y(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Ug(e,"POST","/v2/accounts/mfaEnrollment:finalize",Vg(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Ug(e,"POST","/v2/accounts/mfaSignIn:finalize",Vg(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(tI),rI=function(){function e(){p(this,e)}return y(e,null,[{key:"assertion",value:function(e){return nI._fromCredential(e)}}]),e}();rI.FACTOR_ID="phone";var iI,aI="@firebase/auth",oI="0.19.11",uI=function(){function e(t){p(this,e),this.auth=t,this.internalListeners=new Map}return y(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Eg(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function sI(){return window}iI="Browser",Ve(new pe("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){Eg(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),Eg(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:iI,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Lk(iI)},i=new Mk(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ng);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Ve(new pe("auth-internal",(function(e){return function(e){return new uI(e)}(Fk(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Je(aI,oI,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(iI)),Je(aI,oI,"esm2017");function cI(e,t,n){return lI.apply(this,arguments)}function lI(){return lI=a(h().mark((function e(t,n,r){var i,a,o,u,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=sI(),o=a.BuildInfo,Tg(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,yI(n.sessionId);case 4:return u=e.sent,s={},Dk()?s.ibi=o.packageName:Ck()?s.apn=o.packageName:bg(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",J_(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),lI.apply(this,arguments)}function fI(){return fI=a(h().mark((function e(t){var n,r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=sI(),r=n.BuildInfo,i={},Dk()?i.iosBundleId=r.packageName:Ck()?i.androidPackageName=r.packageName:bg(t,"operation-not-supported-in-this-environment"),e.next=5,T_(t,i);case 5:case"end":return e.stop()}}),e)}))),fI.apply(this,arguments)}function hI(e){var t=sI().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function dI(e,t,n){return pI.apply(this,arguments)}function pI(){return pI=a(h().mark((function e(t,n,r){var i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=sI(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(wg(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),Ck()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),pI.apply(this,arguments)}function vI(e){var t,n,r,i,a,o,u,s,c,l,f=sI();Eg("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Eg("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Eg("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Eg("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Eg("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function yI(e){return mI.apply(this,arguments)}function mI(){return(mI=a(h().mark((function e(t){var n,r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=gI(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gI(e){if(Tg(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var kI=function(e){b(n,e);var t=E(n);function n(){var e;return p(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return y(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),_t(w(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(I_);function bI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:EI(),postBody:null,tenantId:e.tenantId,error:wg(e,"no-auth-event")}}function wI(e,t){return SI()._set(TI(e),t)}function xI(e){return _I.apply(this,arguments)}function _I(){return _I=a(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,SI()._get(TI(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,SI()._remove(TI(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),_I.apply(this,arguments)}function II(e,t){var n,r,i=function(e){var t=CI(e),n=t.link?decodeURIComponent(t.link):void 0,r=CI(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return CI(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=CI(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?wg(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function EI(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function SI(){return Ng(Kw)}function TI(e){return wk("authEvent",e.config.apiKey,e.name)}function CI(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=o(t=n)||he(t)||s(t)||c();r[0];return X(r.slice(1).join("?"))}var NI=function(){function e(){p(this,e),this._redirectPersistence=Hw,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=b_}return y(e,[{key:"_initialize",value:function(){var e=a(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new kI(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){bg(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=a(h().mark((function e(t,n,r,i){var a,o,u,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vI(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),i_.clear(),e.next=10,this._originValidation(t);case 10:return o=bI(t,r,i),e.next=13,wI(t,o);case 13:return e.next=15,cI(t,o,n);case 15:return u=e.sent,e.next=18,hI(u);case 18:return s=e.sent,e.abrupt("return",dI(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return fI.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=sI(),r=n.universalLinks,i=n.handleOpenURL,o=n.BuildInfo,u=setTimeout(a(h().mark((function n(){return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,xI(e);case 2:t.onEvent(DI());case 3:case"end":return n.stop()}}),n)}))),500),s=function(){var n=a(h().mark((function n(r){var i,a;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(u),n.next=3,xI(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=II(i,r.url)),t.onEvent(a||DI());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,s);var c=i,l="".concat(o.packageName.toLowerCase(),"://");sI().handleOpenURL=function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(l)&&s({url:t}),"function"===typeof c)try{c(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),AI=NI;function DI(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:wg("no-auth-event")}}function PI(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function RI(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return!("file:"!==PI()&&"ionic:"!==PI()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function OI(){return j()&&11===(null===document||void 0===document?void 0:document.documentMode)}function LI(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return/Edge\/\d+/.test(e)}function MI(){try{var e=self.localStorage,t=Yw();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return OI()||LI(e)}()||q()}catch(n){return FI()&&q()}return!1}function FI(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function VI(){return("http:"===PI()||"https:"===PI()||V()||RI())&&!(U()||F())&&MI()&&!FI()}function UI(){return RI()&&"undefined"!==typeof document}function jI(){return qI.apply(this,arguments)}function qI(){return(qI=a(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(UI()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var zI={LOCAL:"local",NONE:"none",SESSION:"session"},BI=Eg,GI="persistence";function KI(e,t){BI(Object.values(zI).includes(t),e,"invalid-persistence-type"),U()?BI(t!==zI.SESSION,e,"unsupported-persistence-type"):F()?BI(t===zI.NONE,e,"unsupported-persistence-type"):FI()?BI(t===zI.NONE||t===zI.LOCAL&&q(),e,"unsupported-persistence-type"):BI(t===zI.NONE||MI(),e,"unsupported-persistence-type")}function WI(e){return HI.apply(this,arguments)}function HI(){return HI=a(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=QI(),r=wk(GI,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),HI.apply(this,arguments)}function QI(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var $I=Eg,YI=function(){function e(){p(this,e),this.browserResolver=Ng(eI),this.cordovaResolver=Ng(AI),this.underlyingResolver=null,this._redirectPersistence=Hw,this._completeRedirectFn=b_}return y(e,[{key:"_initialize",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=a(h().mark((function e(t,n,r,i){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=a(h().mark((function e(t,n,r,i){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return UI()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return $I(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=a(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,jI();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function JI(e){return e.unwrap()}function XI(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new rE(e,function(e,t){var n,r=ae(e),i=t;return Eg(t.customData.operationType,r,"argument-error"),Eg(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Fw._fromError(r,i)}(e,t));else if(r){var i=ZI(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function ZI(e){var t=(e instanceof G?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof G)&&"temporaryProof"in t&&"phoneNumber"in t)return Bx.credentialFromResult(e);var n,r=t.providerId;if(!r||r===og)return null;switch(r){case ag:n=Cb;break;case rg:n=Tb;break;case ig:n=Nb;break;case ug:n=Pb;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?Ab._create(r,u):pb._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new Sb(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof G?n.credentialFromError(e):n.credentialFromResult(e)}function eE(e,t){return t.catch((function(t){throw t instanceof G&&XI(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,ZI(t)),additionalUserInfo:Lw(e),user:iE.getOrCreate(r)}}))}function tE(e,t){return nE.apply(this,arguments)}function nE(){return nE=a(h().mark((function e(t,n){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return eE(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),nE.apply(this,arguments)}var rE=function(){function e(t,n){p(this,e),this.resolver=n,this.auth=t.wrapped()}return y(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return eE(JI(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),iE=function(){function e(t){p(this,e),this._delegate=t,this.multiFactor=function(e){var t=ae(e);return qw.has(t)||qw.set(t,jw._fromUser(t)),qw.get(t)}(t)}return y(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",eE(this.auth,Zb(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tE(this.auth,Fx(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",eE(this.auth,t_(this._delegate,t,YI)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,WI(Fk(this.auth));case 2:return e.abrupt("return",y_(this._delegate,t,YI));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",eE(this.auth,tw(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return tE(this.auth,function(e,t,n){return Ux.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return eE(this.auth,function(e,t,n){return e_.apply(this,arguments)}(this._delegate,e,YI))}},{key:"reauthenticateWithRedirect",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,WI(Fk(this.auth));case 2:return e.abrupt("return",p_(this._delegate,t,YI));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return xw.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qb(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Tw(ae(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Tw(ae(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return zx.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Sw.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return _w.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();iE.USER_MAP=new WeakMap;var aE=Eg,oE=function(){function e(t,n){if(p(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;aE(r,"invalid-api-key",{appName:t.name}),aE(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?YI:void 0;this._delegate=n.initialize({options:{persistence:sE(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(vg),this.linkUnderlyingAuth()}return y(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?iE.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){Uk(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return fw.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return hw(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return lw.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=a(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",eE(this._delegate,vw(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return ww.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=xb.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=a(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return aE(VI(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,g_(this._delegate,YI);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",eE(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Fk(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=uE(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=uE(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return mw.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return cw.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=a(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:KI(this._delegate,t),e.t0=t,e.next=e.t0===zI.SESSION?4:e.t0===zI.LOCAL?6:e.t0===zI.NONE?11:13;break;case 4:return n=Hw,e.abrupt("break",14);case 6:return e.next=8,Ng(yx)._isAvailable();case 8:return r=e.sent,n=r?yx:Kw,e.abrupt("break",14);case 11:return n=bk,e.abrupt("break",14);case 13:return e.abrupt("return",bg("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return eE(this._delegate,function(e){return Fb.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return eE(this._delegate,Jb(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return eE(this._delegate,function(e,t){return aw.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return eE(this._delegate,function(e,t,n){return Jb(ae(e),_b.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return eE(this._delegate,function(e,t,n){return gw.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return tE(this._delegate,function(e,t,n){return Mx.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return aE(VI(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",eE(this._delegate,Xx(this._delegate,t,YI)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=a(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return aE(VI(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,WI(this._delegate);case 3:return e.abrupt("return",h_(this._delegate,t,YI));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return pw.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function uE(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&iE.getOrCreate(e))},error:t,complete:n}}function sE(e,t){var n=function(e,t){var n=QI();if(!n)return[];var r=wk(GI,e,t);switch(n.getItem(r)){case zI.NONE:return[bk];case zI.LOCAL:return[yx,Hw];case zI.SESSION:return[Hw];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(yx)||n.push(yx),"undefined"!==typeof window)for(var r=0,i=[Kw,Hw];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(bk)||n.push(bk),n}oE.Persistence=zI;var cE=function(){function e(){p(this,e),this.providerId="phone",this._delegate=new Bx(JI(wt.auth()))}return y(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return Bx.credential(e,t)}}]),e}();cE.PHONE_SIGN_IN_METHOD=Bx.PHONE_SIGN_IN_METHOD,cE.PROVIDER_ID=Bx.PROVIDER_ID;var lE,fE=Eg,hE=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wt.app();p(this,e),fE(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Rx(t,n,i.auth()),this.type=this._delegate.type}return y(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();!function(e){e.INTERNAL.registerComponent(new pe("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new oE(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:sg,PASSWORD_RESET:cg,RECOVER_EMAIL:lg,REVERT_SECOND_FACTOR_ADDITION:fg,VERIFY_AND_CHANGE_EMAIL:hg,VERIFY_EMAIL:dg}},EmailAuthProvider:_b,FacebookAuthProvider:Tb,GithubAuthProvider:Nb,GoogleAuthProvider:Cb,OAuthProvider:Sb,SAMLAuthProvider:Db,PhoneAuthProvider:cE,PhoneMultiFactorGenerator:rI,RecaptchaVerifier:hE,TwitterAuthProvider:Pb,Auth:oE,AuthCredential:zk,Error:G}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.2.11")}(wt);var dE="@firebase/installations",pE="0.5.7",vE=1e4,yE="w:".concat(pE),mE="FIS_v2",gE=36e5,kE=(d(lE={},"missing-app-config-values",'Missing App configuration value: "{$valueName}"'),d(lE,"not-registered","Firebase Installation is not registered."),d(lE,"installation-not-found","Firebase Installation not found."),d(lE,"request-failed",'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"'),d(lE,"app-offline","Could not process request. Application offline."),d(lE,"delete-pending-registration","Can't delete installation while there is a pending registration request."),lE),bE=new K("installations","Installations",kE);function wE(e){return e instanceof G&&e.code.includes("request-failed")}function xE(e){var t=e.projectId;return"".concat("https://firebaseinstallations.googleapis.com/v1","/projects/").concat(t,"/installations")}function _E(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function IE(e,t){return EE.apply(this,arguments)}function EE(){return(EE=a(f.mark((function e(t,n){var r,i;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:return r=e.sent,i=r.error,e.abrupt("return",bE.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function SE(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function TE(e,t){var n=t.refreshToken,r=SE(e);return r.append("Authorization",function(e){return"".concat(mE," ").concat(e)}(n)),r}function CE(e){return NE.apply(this,arguments)}function NE(){return NE=a(f.mark((function e(t){var n;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:if(!((n=e.sent).status>=500&&n.status<600)){e.next=5;break}return e.abrupt("return",t());case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)}))),NE.apply(this,arguments)}function AE(e,t){return DE.apply(this,arguments)}function DE(){return(DE=a(f.mark((function e(t,n){var r,i,a,o,u,s,c,l,h,d,p,v;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.appConfig,i=t.heartbeatServiceProvider,a=n.fid,o=xE(r),u=SE(r),!(s=i.getImmediate({optional:!0}))){e.next=10;break}return e.next=8,s.getHeartbeatsHeader();case 8:(c=e.sent)&&u.append("x-firebase-client",c);case 10:return l={fid:a,authVersion:mE,appId:r.appId,sdkVersion:yE},h={method:"POST",headers:u,body:JSON.stringify(l)},e.next=14,CE((function(){return fetch(o,h)}));case 14:if(!(d=e.sent).ok){e.next=23;break}return e.next=18,d.json();case 18:return p=e.sent,v={fid:p.fid||a,registrationStatus:2,refreshToken:p.refreshToken,authToken:_E(p.authToken)},e.abrupt("return",v);case 23:return e.next=25,IE("Create Installation",d);case 25:throw e.sent;case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function PE(e){return new Promise((function(t){setTimeout(t,e)}))}var RE=/^[cdef][\w-]{21}$/;function OE(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){return(t=e,btoa(String.fromCharCode.apply(String,de(t))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}(e);return RE.test(t)?t:""}catch(Bp){return""}}function LE(e){return"".concat(e.appName,"!").concat(e.appId)}var ME=new Map;function FE(e,t){var n=LE(e);VE(n,t),function(e,t){var n=jE();n&&n.postMessage({key:e,fid:t});qE()}(n,t)}function VE(e,t){var n=ME.get(e);if(n){var r,i=m(n);try{for(i.s();!(r=i.n()).done;){(0,r.value)(t)}}catch(a){i.e(a)}finally{i.f()}}}var UE=null;function jE(){return!UE&&"BroadcastChannel"in self&&((UE=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){VE(e.data.key,e.data.fid)}),UE}function qE(){0===ME.size&&UE&&(UE.close(),UE=null)}var zE="firebase-installations-store",BE=null;function GE(){return BE||(BE=fe("firebase-installations-database",1,(function(e,t){if(0===t)e.createObjectStore(zE)}))),BE}function KE(e,t){return WE.apply(this,arguments)}function WE(){return WE=a(f.mark((function e(t,n){var r,i,a,o,u;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=LE(t),e.next=3,GE();case 3:return i=e.sent,a=i.transaction(zE,"readwrite"),o=a.objectStore(zE),e.next=8,o.get(r);case 8:return u=e.sent,e.next=11,o.put(n,r);case 11:return e.next=13,a.complete;case 13:return u&&u.fid===n.fid||FE(t,n.fid),e.abrupt("return",n);case 15:case"end":return e.stop()}}),e)}))),WE.apply(this,arguments)}function HE(e){return QE.apply(this,arguments)}function QE(){return QE=a(f.mark((function e(t){var n,r,i;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=LE(t),e.next=3,GE();case 3:return r=e.sent,i=r.transaction(zE,"readwrite"),e.next=7,i.objectStore(zE).delete(n);case 7:return e.next=9,i.complete;case 9:case"end":return e.stop()}}),e)}))),QE.apply(this,arguments)}function $E(e,t){return YE.apply(this,arguments)}function YE(){return YE=a(f.mark((function e(t,n){var r,i,a,o,u,s;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=LE(t),e.next=3,GE();case 3:return i=e.sent,a=i.transaction(zE,"readwrite"),o=a.objectStore(zE),e.next=8,o.get(r);case 8:if(u=e.sent,void 0!==(s=n(u))){e.next=15;break}return e.next=13,o.delete(r);case 13:e.next=17;break;case 15:return e.next=17,o.put(s,r);case 17:return e.next=19,a.complete;case 19:return!s||u&&u.fid===s.fid||FE(t,s.fid),e.abrupt("return",s);case 21:case"end":return e.stop()}}),e)}))),YE.apply(this,arguments)}function JE(e){return XE.apply(this,arguments)}function XE(){return(XE=a(f.mark((function e(t){var n,r;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$E(t.appConfig,(function(e){var r=ZE(e),i=eS(t,r);return n=i.registrationPromise,i.installationEntry}));case 2:if(""!==(r=e.sent).fid){e.next=8;break}return e.next=6,n;case 6:return e.t0=e.sent,e.abrupt("return",{installationEntry:e.t0});case 8:return e.abrupt("return",{installationEntry:r,registrationPromise:n});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ZE(e){return aS(e||{fid:OE(),registrationStatus:0})}function eS(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(bE.create("app-offline"))};var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=function(e,t){return tS.apply(this,arguments)}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:nS(e)}:{installationEntry:t}}function tS(){return(tS=a(f.mark((function e(t,n){var r;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,AE(t,n);case 3:return r=e.sent,e.abrupt("return",KE(t.appConfig,r));case 7:if(e.prev=7,e.t0=e.catch(0),!wE(e.t0)||409!==e.t0.customData.serverCode){e.next=14;break}return e.next=12,HE(t.appConfig);case 12:e.next=16;break;case 14:return e.next=16,KE(t.appConfig,{fid:n.fid,registrationStatus:0});case 16:throw e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function nS(e){return rS.apply(this,arguments)}function rS(){return(rS=a(f.mark((function e(t){var n,r,i,a;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,iS(t.appConfig);case 2:n=e.sent;case 3:if(1!==n.registrationStatus){e.next=11;break}return e.next=6,PE(100);case 6:return e.next=8,iS(t.appConfig);case 8:n=e.sent,e.next=3;break;case 11:if(0!==n.registrationStatus){e.next=22;break}return e.next=14,JE(t);case 14:if(r=e.sent,i=r.installationEntry,!(a=r.registrationPromise)){e.next=21;break}return e.abrupt("return",a);case 21:return e.abrupt("return",i);case 22:return e.abrupt("return",n);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function iS(e){return $E(e,(function(e){if(!e)throw bE.create("installation-not-found");return aS(e)}))}function aS(e){return 1===(t=e).registrationStatus&&t.registrationTime+vE<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}function oS(e,t){return uS.apply(this,arguments)}function uS(){return(uS=a(f.mark((function e(t,n){var r,i,a,o,u,s,c,l,h,d,p;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.appConfig,i=t.heartbeatServiceProvider,a=sS(r,n),o=TE(r,n),!(u=i.getImmediate({optional:!0}))){e.next=9;break}return e.next=7,u.getHeartbeatsHeader();case 7:(s=e.sent)&&o.append("x-firebase-client",s);case 9:return c={installation:{sdkVersion:yE,appId:r.appId}},l={method:"POST",headers:o,body:JSON.stringify(c)},e.next=13,CE((function(){return fetch(a,l)}));case 13:if(!(h=e.sent).ok){e.next=22;break}return e.next=17,h.json();case 17:return d=e.sent,p=_E(d),e.abrupt("return",p);case 22:return e.next=24,IE("Generate Auth Token",h);case 24:throw e.sent;case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sS(e,t){var n=t.fid;return"".concat(xE(e),"/").concat(n,"/authTokens:generate")}function cS(e){return lS.apply(this,arguments)}function lS(){return lS=a(f.mark((function e(t){var n,r,i,a,o=arguments;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]&&o[1],e.next=3,$E(t.appConfig,(function(e){if(!yS(e))throw bE.create("not-registered");var i=e.authToken;if(!n&&mS(i))return e;if(1===i.requestStatus)return r=fS(t,n),e;if(!navigator.onLine)throw bE.create("app-offline");var a=gS(e);return r=pS(t,a),a}));case 3:if(i=e.sent,!r){e.next=10;break}return e.next=7,r;case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=i.authToken;case 11:return a=e.t0,e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),lS.apply(this,arguments)}function fS(e,t){return hS.apply(this,arguments)}function hS(){return(hS=a(f.mark((function e(t,n){var r,i;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dS(t.appConfig);case 2:r=e.sent;case 3:if(1!==r.authToken.requestStatus){e.next=11;break}return e.next=6,PE(100);case 6:return e.next=8,dS(t.appConfig);case 8:r=e.sent,e.next=3;break;case 11:if(0!==(i=r.authToken).requestStatus){e.next=16;break}return e.abrupt("return",cS(t,n));case 16:return e.abrupt("return",i);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dS(e){return $E(e,(function(e){if(!yS(e))throw bE.create("not-registered");var t,n=e.authToken;return 1===(t=n).requestStatus&&t.requestTime+vE<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e}))}function pS(e,t){return vS.apply(this,arguments)}function vS(){return(vS=a(f.mark((function e(t,n){var r,i,a;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,oS(t,n);case 3:return r=e.sent,i=Object.assign(Object.assign({},n),{authToken:r}),e.next=7,KE(t.appConfig,i);case 7:return e.abrupt("return",r);case 10:if(e.prev=10,e.t0=e.catch(0),!wE(e.t0)||401!==e.t0.customData.serverCode&&404!==e.t0.customData.serverCode){e.next=17;break}return e.next=15,HE(t.appConfig);case 15:e.next=20;break;case 17:return a=Object.assign(Object.assign({},n),{authToken:{requestStatus:0}}),e.next=20,KE(t.appConfig,a);case 20:throw e.t0;case 21:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function yS(e){return void 0!==e&&2===e.registrationStatus}function mS(e){return 2===e.requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+gE}(e)}function gS(e){var t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function kS(){return(kS=a(f.mark((function e(t){var n,r,i,a;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.next=3,JE(n);case 3:return r=e.sent,i=r.installationEntry,(a=r.registrationPromise)?a.catch(console.error):cS(n).catch(console.error),e.abrupt("return",i.fid);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bS(){return bS=a(f.mark((function e(t){var n,r,i,a=arguments;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]&&a[1],r=t,e.next=4,wS(r);case 4:return e.next=6,cS(r,n);case 6:return i=e.sent,e.abrupt("return",i.token);case 8:case"end":return e.stop()}}),e)}))),bS.apply(this,arguments)}function wS(e){return xS.apply(this,arguments)}function xS(){return(xS=a(f.mark((function e(t){var n,r;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,JE(t);case 2:if(n=e.sent,!(r=n.registrationPromise)){e.next=7;break}return e.next=7,r;case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _S(e){return bE.create("missing-app-config-values",{valueName:e})}var IS,ES="installations",SS=function(e){var t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw _S("App Configuration");if(!e.name)throw _S("App Name");for(var t=0,n=["projectId","apiKey","appId"];t<n.length;t++){var r=n[t];if(!e.options[r])throw _S(r)}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:Ue(t,"heartbeat"),_delete:function(){return Promise.resolve()}}},TS=function(e){var t=Ue(e.getProvider("app").getImmediate(),ES).getImmediate(),n={getId:function(){return function(e){return kS.apply(this,arguments)}(t)},getToken:function(e){return function(e){return bS.apply(this,arguments)}(t,e)}};return n};Ve(new pe(ES,SS,"PUBLIC")),Ve(new pe("installations-internal",TS,"PRIVATE")),Je(dE,pE),Je(dE,pE,"esm2017");var CS="analytics",NS=6e4,AS="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",DS="https://www.googletagmanager.com/gtag/js",PS=new Te("@firebase/analytics");function RS(e){return Promise.all(e.map((function(e){return e.catch((function(e){return e}))})))}function OS(e,t){var n=document.createElement("script");n.src="".concat(DS,"?l=").concat(e,"&id=").concat(t),n.async=!0,document.head.appendChild(n)}function LS(e,t,n,r,i,a){return MS.apply(this,arguments)}function MS(){return MS=a(f.mark((function e(t,n,r,i,a,o){var u,s,c;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=i[a],e.prev=1,!u){e.next=7;break}return e.next=5,n[u];case 5:e.next=14;break;case 7:return e.next=9,RS(r);case 9:if(s=e.sent,!(c=s.find((function(e){return e.measurementId===a})))){e.next=14;break}return e.next=14,n[c.appId];case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),PS.error(e.t0);case 19:t("config",a,o);case 20:case"end":return e.stop()}}),e,null,[[1,16]])}))),MS.apply(this,arguments)}function FS(e,t,n,r,i){return VS.apply(this,arguments)}function VS(){return VS=a(f.mark((function e(t,n,r,i,a){var o,u,s,c,l,h;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o=[],!a||!a.send_to){e.next=26;break}return u=a.send_to,Array.isArray(u)||(u=[u]),e.next=7,RS(r);case 7:s=e.sent,c=m(u),e.prev=9,h=function(){var e=l.value,t=s.find((function(t){return t.measurementId===e})),r=t&&n[t.appId];if(!r)return o=[],"break";o.push(r)},c.s();case 12:if((l=c.n()).done){e.next=18;break}if("break"!==h()){e.next=16;break}return e.abrupt("break",18);case 16:e.next=12;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(9),c.e(e.t0);case 23:return e.prev=23,c.f(),e.finish(23);case 26:return 0===o.length&&(o=Object.values(n)),e.next=29,Promise.all(o);case 29:t("event",i,a||{}),e.next=35;break;case 32:e.prev=32,e.t1=e.catch(0),PS.error(e.t1);case 35:case"end":return e.stop()}}),e,null,[[0,32],[9,20,23,26]])}))),VS.apply(this,arguments)}function US(e,t,n,r,i){var o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(o=window[i]),window[i]=function(e,t,n,r){function i(){return(i=a(f.mark((function i(a,o,u){return f.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,"event"!==a){i.next=6;break}return i.next=4,FS(e,t,n,o,u);case 4:i.next=12;break;case 6:if("config"!==a){i.next=11;break}return i.next=9,LS(e,t,n,r,o,u);case 9:i.next=12;break;case 11:e("set",o);case 12:i.next=17;break;case 14:i.prev=14,i.t0=i.catch(0),PS.error(i.t0);case 17:case"end":return i.stop()}}),i,null,[[0,14]])})))).apply(this,arguments)}return function(e,t,n){return i.apply(this,arguments)}}(o,e,t,n),{gtagCore:o,wrappedGtag:window[i]}}function jS(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes(DS))return r}return null}var qS=(d(IS={},"already-exists","A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId."),d(IS,"already-initialized","initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance."),d(IS,"already-initialized-settings","Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect."),d(IS,"interop-component-reg-failed","Firebase Analytics Interop Component failed to instantiate: {$reason}"),d(IS,"invalid-analytics-context","Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),d(IS,"indexeddb-unavailable","IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),d(IS,"fetch-throttle","The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}."),d(IS,"config-fetch-failed","Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}"),d(IS,"no-api-key",'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.'),d(IS,"no-app-id",'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'),IS),zS=new K("analytics","Analytics",qS),BS=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;p(this,e),this.throttleMetadata=t,this.intervalMillis=n}return y(e,[{key:"getThrottleMetadata",value:function(e){return this.throttleMetadata[e]}},{key:"setThrottleMetadata",value:function(e,t){this.throttleMetadata[e]=t}},{key:"deleteThrottleMetadata",value:function(e){delete this.throttleMetadata[e]}}]),e}(),GS=new BS;function KS(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function WS(e){return HS.apply(this,arguments)}function HS(){return HS=a(f.mark((function e(t){var n,r,i,a,o,u,s,c;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.appId,i=t.apiKey,a={method:"GET",headers:KS(i)},o=AS.replace("{app-id}",r),e.next=5,fetch(o,a);case 5:if(200===(u=e.sent).status||304===u.status){e.next=18;break}return s="",e.prev=8,e.next=11,u.json();case 11:c=e.sent,(null===(n=c.error)||void 0===n?void 0:n.message)&&(s=c.error.message),e.next=17;break;case 15:e.prev=15,e.t0=e.catch(8);case 17:throw zS.create("config-fetch-failed",{httpStatus:u.status,responseMessage:s});case 18:return e.abrupt("return",u.json());case 19:case"end":return e.stop()}}),e,null,[[8,15]])}))),HS.apply(this,arguments)}function QS(e){return $S.apply(this,arguments)}function $S(){return $S=a(f.mark((function e(t){var n,r,i,o,u,s,c,l,h=arguments;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=h.length>1&&void 0!==h[1]?h[1]:GS,r=h.length>2?h[2]:void 0,i=t.options,o=i.appId,u=i.apiKey,s=i.measurementId,o){e.next=5;break}throw zS.create("no-app-id");case 5:if(u){e.next=9;break}if(!s){e.next=8;break}return e.abrupt("return",{measurementId:s,appId:o});case 8:throw zS.create("no-api-key");case 9:return c=n.getThrottleMetadata(o)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new eT,setTimeout(a(f.mark((function e(){return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.abort();case 1:case"end":return e.stop()}}),e)}))),void 0!==r?r:NS),e.abrupt("return",YS({appId:o,apiKey:u,measurementId:s},c,l,n));case 13:case"end":return e.stop()}}),e)}))),$S.apply(this,arguments)}function YS(e,t,n){return JS.apply(this,arguments)}function JS(){return JS=a(f.mark((function e(t,n,r){var i,a,o,u,s,c,l,h,d=arguments;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.throttleEndTimeMillis,a=n.backoffCount,o=d.length>3&&void 0!==d[3]?d[3]:GS,u=t.appId,s=t.measurementId,e.prev=3,e.next=6,XS(r,i);case 6:e.next=14;break;case 8:if(e.prev=8,e.t0=e.catch(3),!s){e.next=13;break}return PS.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(s)+' provided in the "measurementId" field in the local Firebase config. ['.concat(e.t0.message,"]")),e.abrupt("return",{appId:u,measurementId:s});case 13:throw e.t0;case 14:return e.prev=14,e.next=17,WS(t);case 17:return c=e.sent,o.deleteThrottleMetadata(u),e.abrupt("return",c);case 22:if(e.prev=22,e.t1=e.catch(14),ZS(e.t1)){e.next=32;break}if(o.deleteThrottleMetadata(u),!s){e.next=31;break}return PS.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(s)+' provided in the "measurementId" field in the local Firebase config. ['.concat(e.t1.message,"]")),e.abrupt("return",{appId:u,measurementId:s});case 31:throw e.t1;case 32:return l=503===Number(e.t1.customData.httpStatus)?ie(a,o.intervalMillis,30):ie(a,o.intervalMillis),h={throttleEndTimeMillis:Date.now()+l,backoffCount:a+1},o.setThrottleMetadata(u,h),PS.debug("Calling attemptFetch again in ".concat(l," millis")),e.abrupt("return",YS(t,h,r,o));case 37:case"end":return e.stop()}}),e,null,[[3,8],[14,22]])}))),JS.apply(this,arguments)}function XS(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),a=setTimeout(n,i);e.addEventListener((function(){clearTimeout(a),r(zS.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}function ZS(e){if(!(e instanceof G)||!e.customData)return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}var eT=function(){function e(){p(this,e),this.listeners=[]}return y(e,[{key:"addEventListener",value:function(e){this.listeners.push(e)}},{key:"abort",value:function(){this.listeners.forEach((function(e){return e()}))}}]),e}();function tT(){return nT.apply(this,arguments)}function nT(){return(nT=a(f.mark((function e(){return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(q()){e.next=5;break}return PS.warn(zS.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),e.abrupt("return",!1);case 5:return e.prev=5,e.next=8,z();case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(5),PS.warn(zS.create("indexeddb-unavailable",{errorInfo:e.t0}).message),e.abrupt("return",!1);case 14:return e.abrupt("return",!0);case 15:case"end":return e.stop()}}),e,null,[[5,10]])})))).apply(this,arguments)}function rT(){return rT=a(f.mark((function e(t,n,r,i,a,o,u){var s,c,h,d,p,v,y,m;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=QS(t)).then((function(e){r[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&PS.warn("The measurement ID in the local Firebase config (".concat(t.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(e.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(e){return PS.error(e)})),n.push(c),h=tT().then((function(e){return e?i.getId():void 0})),e.next=6,Promise.all([c,h]);case 6:return d=e.sent,p=l(d,2),v=p[0],y=p[1],jS()||OS(o,v.measurementId),a("js",new Date),(m=null!==(s=null===u||void 0===u?void 0:u.config)&&void 0!==s?s:{}).origin="firebase",m.update=!0,null!=y&&(m.firebase_id=y),a("config",v.measurementId,m),e.abrupt("return",v.measurementId);case 18:case"end":return e.stop()}}),e)}))),rT.apply(this,arguments)}var iT,aT,oT=function(){function e(t){p(this,e),this.app=t}return y(e,[{key:"_delete",value:function(){return delete uT[this.app.options.appId],Promise.resolve()}}]),e}(),uT={},sT=[],cT={},lT="dataLayer",fT="gtag",hT=!1;function dT(e){if(hT)throw zS.create("already-initialized");e.dataLayerName&&(lT=e.dataLayerName),e.gtagName&&(fT=e.gtagName)}function pT(e,t,n){!function(){var e=[];if(V()&&e.push("This is a browser extension environment."),B()||e.push("Cookies are not available."),e.length>0){var t=e.map((function(e,t){return"(".concat(t+1,") ").concat(e)})).join(" "),n=zS.create("invalid-analytics-context",{errorInfo:t});PS.warn(n.message)}}();var r=e.options.appId;if(!r)throw zS.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw zS.create("no-api-key");PS.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=uT[r])throw zS.create("already-exists",{id:r});if(!hT){!function(e){var t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(lT);var i=US(uT,sT,cT,lT,fT),a=i.wrappedGtag,o=i.gtagCore;aT=a,iT=o,hT=!0}return uT[r]=function(e,t,n,r,i,a,o){return rT.apply(this,arguments)}(e,sT,cT,t,iT,lT,n),new oT(e)}function vT(){return(vT=a(f.mark((function e(t,n,r,i,a){var o,u;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a||!a.global){e.next=5;break}return t("event",r,i),e.abrupt("return");case 5:return e.next=7,n;case 7:o=e.sent,u=Object.assign(Object.assign({},i),{send_to:o}),t("event",r,u);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yT(){return(yT=a(f.mark((function e(t,n,r,i){var a;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i||!i.global){e.next=5;break}return t("set",{screen_name:r}),e.abrupt("return",Promise.resolve());case 5:return e.next=7,n;case 7:a=e.sent,t("config",a,{update:!0,screen_name:r});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mT(){return mT=a(f.mark((function e(t,n,r,i){var a;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i||!i.global){e.next=5;break}return t("set",{user_id:r}),e.abrupt("return",Promise.resolve());case 5:return e.next=7,n;case 7:a=e.sent,t("config",a,{update:!0,user_id:r});case 9:case"end":return e.stop()}}),e)}))),mT.apply(this,arguments)}function gT(){return(gT=a(f.mark((function e(t,n,r,i){var a,o,u,s,c;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i||!i.global){e.next=7;break}for(a={},o=0,u=Object.keys(r);o<u.length;o++)s=u[o],a["user_properties.".concat(s)]=r[s];return t("set",a),e.abrupt("return",Promise.resolve());case 7:return e.next=9,n;case 9:c=e.sent,t("config",c,{update:!0,user_properties:r});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kT(){return(kT=a(f.mark((function e(t,n){var r;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:r=e.sent,window["ga-disable-".concat(r)]=!n;case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bT(){return wT.apply(this,arguments)}function wT(){return(wT=a(f.mark((function e(){var t;return f.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!V()){e.next=2;break}return e.abrupt("return",!1);case 2:if(B()){e.next=4;break}return e.abrupt("return",!1);case 4:if(q()){e.next=6;break}return e.abrupt("return",!1);case 6:return e.prev=6,e.next=9,z();case 9:return t=e.sent,e.abrupt("return",t);case 13:return e.prev=13,e.t0=e.catch(6),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[6,13]])})))).apply(this,arguments)}function xT(e,t,n){e=ae(e),function(e,t,n,r){return yT.apply(this,arguments)}(aT,uT[e.app.options.appId],t,n).catch((function(e){return PS.error(e)}))}function _T(e,t,n){e=ae(e),function(e,t,n,r){return mT.apply(this,arguments)}(aT,uT[e.app.options.appId],t,n).catch((function(e){return PS.error(e)}))}function IT(e,t,n){e=ae(e),function(e,t,n,r){return gT.apply(this,arguments)}(aT,uT[e.app.options.appId],t,n).catch((function(e){return PS.error(e)}))}function ET(e,t){e=ae(e),function(e,t){return kT.apply(this,arguments)}(uT[e.app.options.appId],t).catch((function(e){return PS.error(e)}))}function ST(e,t,n,r){e=ae(e),function(e,t,n,r,i){return vT.apply(this,arguments)}(aT,uT[e.app.options.appId],t,n,r).catch((function(e){return PS.error(e)}))}var TT="@firebase/analytics",CT="0.7.7";Ve(new pe(CS,(function(e,t){var n=t.options;return pT(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)}),"PUBLIC")),Ve(new pe("analytics-internal",(function(e){try{var t=e.getProvider(CS).getImmediate();return{logEvent:function(e,n,r){return ST(t,e,n,r)}}}catch(n){throw zS.create("interop-component-reg-failed",{reason:n})}}),"PRIVATE")),Je(TT,CT),Je(TT,CT,"esm2017");var NT,AT=function(){function e(t,n){p(this,e),this.app=t,this._delegate=n}return y(e,[{key:"logEvent",value:function(e,t,n){ST(this._delegate,e,t,n)}},{key:"setCurrentScreen",value:function(e,t){xT(this._delegate,e,t)}},{key:"setUserId",value:function(e,t){_T(this._delegate,e,t)}},{key:"setUserProperties",value:function(e,t){IT(this._delegate,e,t)}},{key:"setAnalyticsCollectionEnabled",value:function(e){ET(this._delegate,e)}}]),e}();!function(e){e.ADD_SHIPPING_INFO="add_shipping_info",e.ADD_PAYMENT_INFO="add_payment_info",e.ADD_TO_CART="add_to_cart",e.ADD_TO_WISHLIST="add_to_wishlist",e.BEGIN_CHECKOUT="begin_checkout",e.CHECKOUT_PROGRESS="checkout_progress",e.EXCEPTION="exception",e.GENERATE_LEAD="generate_lead",e.LOGIN="login",e.PAGE_VIEW="page_view",e.PURCHASE="purchase",e.REFUND="refund",e.REMOVE_FROM_CART="remove_from_cart",e.SCREEN_VIEW="screen_view",e.SEARCH="search",e.SELECT_CONTENT="select_content",e.SELECT_ITEM="select_item",e.SELECT_PROMOTION="select_promotion",e.SET_CHECKOUT_OPTION="set_checkout_option",e.SHARE="share",e.SIGN_UP="sign_up",e.TIMING_COMPLETE="timing_complete",e.VIEW_CART="view_cart",e.VIEW_ITEM="view_item",e.VIEW_ITEM_LIST="view_item_list",e.VIEW_PROMOTION="view_promotion",e.VIEW_SEARCH_RESULTS="view_search_results"}(NT||(NT={}));var DT=function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("analytics").getImmediate();return new AT(t,n)};function PT(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(t){a(t)}}function u(e){try{s(r.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}s((r=r.apply(e,t||[])).next())}))}function RT(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(u){a=[6,u],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}!function(){var e={Analytics:AT,settings:dT,isSupported:bT,EventName:NT};wt.INTERNAL.registerComponent(new pe("analytics-compat",DT,"PUBLIC").setServiceProps(e).setMultipleInstances(!0))}(),wt.registerVersion("@firebase/analytics-compat","0.1.8");var OT=function(){return OT=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},OT.apply(this,arguments)},LT=function(e){return{loading:void 0===e||null===e,value:e}},MT=function(e){var n=e?e():void 0,r=(0,t.useReducer)((function(e,t){switch(t.type){case"error":return OT(OT({},e),{error:t.error,loading:!1,value:void 0});case"reset":return LT(t.defaultValue);case"value":return OT(OT({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),LT(n)),i=r[0],a=r[1],o=function(){var t=e?e():void 0;a({type:"reset",defaultValue:t})},u=function(e){a({type:"error",error:e})},s=function(e){a({type:"value",value:e})};return(0,t.useMemo)((function(){return{error:i.error,loading:i.loading,reset:o,setError:u,setValue:s,value:i.value}}),[i.error,i.loading,o,u,s,i.value])},FT=function(e,n){var r=MT((function(){return e.currentUser})),i=r.error,a=r.loading,o=r.setError,u=r.setValue,s=r.value;(0,t.useEffect)((function(){var t=function(e,t,n,r){return ae(e).onAuthStateChanged(t,n,r)}(e,(function(e){return PT(void 0,void 0,void 0,(function(){var t;return RT(this,(function(r){switch(r.label){case 0:if(!(null===n||void 0===n?void 0:n.onUserChanged))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.onUserChanged(e)];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),o(t),[3,4];case 4:return u(e),[2]}}))}))}),o);return function(){t()}}),[e]);var c=[s,a,i];return(0,t.useMemo)((function(){return c}),c)};var VT=function(){return VT=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},VT.apply(this,arguments)},UT=function(e){return{loading:void 0===e||null===e,value:e}},jT=function(e){var n=e?e():void 0,r=(0,t.useReducer)((function(e,t){switch(t.type){case"error":return VT(VT({},e),{error:t.error,loading:!1,value:void 0});case"reset":return UT(t.defaultValue);case"value":return VT(VT({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),UT(n)),i=r[0],a=r[1],o=function(){var t=e?e():void 0;a({type:"reset",defaultValue:t})},u=function(e){a({type:"error",error:e})},s=function(e){a({type:"value",value:e})};return(0,t.useMemo)((function(){return{error:i.error,loading:i.loading,reset:o,setError:u,setValue:s,value:i.value}}),[i.error,i.loading,o,u,s,i.value])},qT=function(e,n,r){var i=(0,t.useRef)(e);return(0,t.useEffect)((function(){n(e,i.current)||(i.current=e,r&&r())})),i},zT=function(e,t){var n=!e&&!t,r=!!e&&!!t&&Jv(e,t);return n||r},BT=function(e,t){return qT(e,zT,t)},GT=function(e,n){var r=null===n||void 0===n?void 0:n.snapshotOptions,i=function(e,n){var r=jT(),i=r.error,a=r.loading,o=r.reset,u=r.setError,s=r.setValue,c=r.value,l=BT(e,o);(0,t.useEffect)((function(){if(l.current){var e=(null===n||void 0===n?void 0:n.snapshotListenOptions)?wm(l.current,n.snapshotListenOptions,s,u):wm(l.current,s,u);return function(){e()}}s(void 0)}),[l.current]);var f=[c,a,i];return(0,t.useMemo)((function(){return f}),f)}(e,n),a=i[0],o=i[1],u=i[2],s=[KT(a,r),o,u,a];return(0,t.useMemo)((function(){return s}),s)},KT=function(e,n){return(0,t.useMemo)((function(){return null===e||void 0===e?void 0:e.docs.map((function(e){return e.data(n)}))}),[e,n])},WT=n(184);wt.initializeApp({apiKey:"AIzaSyBt0iQ_LqgTPVJTkP3gqrYvUmsGyqheweA",authDomain:"devs-cc.firebaseapp.com",projectId:"devs-cc",storageBucket:"devs-cc.appspot.com",messagingSenderId:"338957420910",appId:"1:338957420910:web:4750bbf6b29e90925c597f",measurementId:"G-FP686PMV4Y"});var HT=wt.auth(),QT=wt.firestore();wt.analytics();function $T(){return(0,WT.jsxs)(WT.Fragment,{children:[(0,WT.jsx)("button",{className:"sign-in",onClick:function(){var e=new wt.auth.GoogleAuthProvider;HT.signInWithPopup(e)},children:"Sign in with Google"}),(0,WT.jsx)("p",{children:"un google account ah hack panre paru.."})]})}function YT(){return HT.currentUser&&(0,WT.jsx)("button",{className:"sign-out",onClick:function(){return HT.signOut()},children:"Sign Out"})}function JT(){var e=(0,t.useRef)(),n=QT.collection("messages"),r=n.orderBy("createdAt").limit(25),i=l(GT(r,{idField:"id"}),1)[0],o=l((0,t.useState)(""),2),u=o[0],s=o[1],c=function(){var t=a(h().mark((function t(r){var i,a,o;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),i=HT.currentUser,a=i.uid,o=i.photoURL,t.next=4,n.add({text:u,createdAt:wt.firestore.FieldValue.serverTimestamp(),uid:a,photoURL:o});case 4:s(""),e.current.scrollIntoView({behavior:"smooth"});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,WT.jsxs)(WT.Fragment,{children:[(0,WT.jsxs)("main",{children:[i&&i.map((function(e){return(0,WT.jsx)(XT,{message:e},e.id)})),(0,WT.jsx)("span",{ref:e})]}),(0,WT.jsxs)("form",{onSubmit:c,children:[(0,WT.jsx)("input",{value:u,onChange:function(e){return s(e.target.value)},placeholder:"say something nice"}),(0,WT.jsx)("button",{type:"submit",disabled:!u,children:"\ud83d\udd4a\ufe0f"})]})]})}function XT(e){var t=e.message,n=t.text,r=t.uid,i=t.photoURL,a=r===HT.currentUser.uid?"sent":"received";return(0,WT.jsx)(WT.Fragment,{children:(0,WT.jsxs)("div",{className:"message ".concat(a),children:[(0,WT.jsx)("img",{src:i||"https://www.bitesizedmarketing.com/wp-content/uploads/2021/10/Ontwerp-zonder-titel-2021-10-14T165805.934-300x300.png"}),(0,WT.jsx)("p",{children:n})]})})}var ZT=function(){var e=l(FT(HT),1)[0];return(0,WT.jsxs)("div",{className:"App",children:[(0,WT.jsxs)("header",{children:[(0,WT.jsx)("h1",{children:"Soka Mela Soka"}),(0,WT.jsx)(YT,{})]}),(0,WT.jsx)("section",{children:e?(0,WT.jsx)(JT,{}):(0,WT.jsx)($T,{})})]})},eC=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};r.render((0,WT.jsx)(t.StrictMode,{children:(0,WT.jsx)(ZT,{})}),document.getElementById("root")),eC()}()}();
//# sourceMappingURL=main.ab9c4ff1.js.map